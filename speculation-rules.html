<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Speculation Rules</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 4b8aed3f7, updated Thu Mar 6 12:35:01 2025 -0800" name="generator">
  <link href="https://wicg.github.io/nav-speculation/speculation-rules.html" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
/* domintro from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}

/* dl.props from https://resources.whatwg.org/standard.css */
dl.props { display: grid; grid-template-columns: max-content auto; row-gap: 0.25em; column-gap: 1em; }
dl.props > dt { grid-column-start: 1; margin: 0; }
dl.props > dd { grid-column-start: 2; margin: 0; }
p + dl.props { margin-top: -0.5em; }
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Speculation Rules</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2025-03-11">11 March 2025</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/nav-speculation/speculation-rules.html">https://wicg.github.io/nav-speculation/speculation-rules.html</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/WICG/nav-speculation/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:jbroman@chromium.org">Jeremy Roman</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 the Contributors to the Speculation Rules Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>A flexible syntax for defining what outgoing links can be prepared speculatively before navigation.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#speculation-rules"><span class="secno">1</span> <span class="content">Speculation rules</span></a>
     <ol class="toc">
      <li><a href="#speculation-rules-dfns"><span class="secno">1.1</span> <span class="content">Definitions</span></a>
      <li><a href="#speculation-rules-script"><span class="secno">1.2</span> <span class="content">The <code><span>script</span></code> element</span></a>
      <li><a href="#speculation-rules-prepare-the-script-element-patch"><span class="secno">1.3</span> <span class="content">Prepare the script element</span></a>
      <li><a href="#speculation-rules-header"><span class="secno">1.4</span> <span class="content">The `<span><code>Speculation-Rules</code></span>` header</span></a>
      <li><a href="#external-speculation-rule-sets"><span class="secno">1.5</span> <span class="content">External speculation rule sets</span></a>
      <li><a href="#speculation-rules-parsing"><span class="secno">1.6</span> <span class="content">Parsing</span></a>
      <li><a href="#speculation-rules-processing"><span class="secno">1.7</span> <span class="content">Processing model</span></a>
      <li><a href="#document-rule-predicate-matching"><span class="secno">1.8</span> <span class="content">Document rule predicate matching</span></a>
     </ol>
    <li>
     <a href="#content-security-policy"><span class="secno">2</span> <span class="content">Content Security Policy</span></a>
     <ol class="toc">
      <li><a href="#content-security-policy-patches-directives"><span class="secno">2.1</span> <span class="content">Directives</span></a>
      <li><a href="#content-security-policy-patches-source-lists"><span class="secno">2.2</span> <span class="content">Source Lists</span></a>
      <li><a href="#content-security-policy-patches-should-block-inline"><span class="secno">2.3</span> <span class="content">Should element’s inline type behavior be blocked by Content Security Policy?</span></a>
      <li><a href="#content-security-policy-patches-script-src"><span class="secno">2.4</span> <span class="content">script-src</span></a>
      <li><a href="#content-security-policy-patches-allow-all-inline"><span class="secno">2.5</span> <span class="content">Does a source list allow all inline behavior for type?</span></a>
      <li><a href="#content-security-policy-patches-match-element-to-source-list"><span class="secno">2.6</span> <span class="content">Does element match source list for type and source?</span></a>
      <li><a href="#content-security-policy-patches-effective-directive"><span class="secno">2.7</span> <span class="content">Get the effective directive for request</span></a>
     </ol>
    <li>
     <a href="#fetch"><span class="secno">3</span> <span class="content">Fetch</span></a>
     <ol class="toc">
      <li><a href="#fetch-destination"><span class="secno">3.1</span> <span class="content">Destination</span></a>
     </ol>
    <li>
     <a href="#security-considerations"><span class="secno">4</span> <span class="content">Security considerations</span></a>
     <ol class="toc">
      <li><a href="#security-csrf"><span class="secno">4.1</span> <span class="content">Cross-site request forgery</span></a>
      <li><a href="#security-xss"><span class="secno">4.2</span> <span class="content">Cross-site scripting</span></a>
      <li><a href="#type-confusion"><span class="secno">4.3</span> <span class="content">Type confusion</span></a>
      <li><a href="#security-ip-anonymization"><span class="secno">4.4</span> <span class="content">IP anonymization</span></a>
      <li><a href="#mixed-content"><span class="secno">4.5</span> <span class="content">Mixed content</span></a>
     </ol>
    <li>
     <a href="#privacy-considerations"><span class="secno">5</span> <span class="content">Privacy considerations</span></a>
     <ol class="toc">
      <li><a href="#privacy-heuristics"><span class="secno">5.1</span> <span class="content">Heuristics</span></a>
      <li><a href="#privacy-intent"><span class="secno">5.2</span> <span class="content">Intent</span></a>
      <li><a href="#privacy-partitioning"><span class="secno">5.3</span> <span class="content">Partitioning</span></a>
      <li><a href="#privacy-identity-joining"><span class="secno">5.4</span> <span class="content">Identity joining</span></a>
      <li><a href="#privacy-visited-links"><span class="secno">5.5</span> <span class="content">Visited links</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="speculation-rules"><span class="secno">1. </span><span class="content">Speculation rules</span><a class="self-link" href="#speculation-rules"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="speculation-rules-dfns"><span class="secno">1.1. </span><span class="content">Definitions</span><a class="self-link" href="#speculation-rules-dfns"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="speculation-rule">speculation rule</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-tags">tags</dfn>, an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">ordered set</a> of <a data-link-type="dfn" href="#speculation-rules-tag" id="ref-for-speculation-rules-tag">speculation rules tags</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-urls">URLs</dfn>, an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">ordered set</a> of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URLs</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-predicate">predicate</dfn>, a <a data-link-type="dfn" href="#document-rule-predicate" id="ref-for-document-rule-predicate">document rule predicate</a> or null</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-requirements">requirements</dfn>, an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">ordered set</a> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">strings</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-target-navigable-name-hint">target navigable name hint</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a> or null</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-referrer-policy">referrer policy</dfn>, a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy" id="ref-for-referrer-policy">referrer policy</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-eagerness">eagerness</dfn>, one of the <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings">valid eagerness strings</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule" data-dfn-type="dfn" data-noexport id="speculation-rule-no-vary-search-hint">No-Vary-Search hint</dfn>, a <a data-link-type="dfn" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-data-model" id="ref-for-name-data-model">URL search variance</a></p>
   </ul>
   <p>The only valid string for <a data-link-type="dfn" href="#speculation-rule-requirements" id="ref-for-speculation-rule-requirements">requirements</a> to contain is "<code>anonymous-client-ip-when-cross-origin</code>".</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="speculation-rule-set">speculation rule set</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item①">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule set" data-dfn-type="dfn" data-noexport id="speculation-rule-set-prefetch-rules">prefetch rules</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <a data-link-type="dfn" href="#speculation-rule" id="ref-for-speculation-rule">speculation rules</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculation rule set" data-dfn-type="dfn" data-noexport id="speculation-rule-set-prerender-rules">prerender rules</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of <a data-link-type="dfn" href="#speculation-rule" id="ref-for-speculation-rule①">speculation rules</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pending-external-speculation-rule-resource">pending external speculation rule resource</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct②">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item②">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="pending external speculation rule resource" data-dfn-type="dfn" data-noexport id="pending-external-speculation-rule-resource-url">URL</dfn>, a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="pending external speculation rule resource" data-dfn-type="dfn" data-noexport id="pending-external-speculation-rule-resource-controller">controller</dfn>, a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-controller" id="ref-for-fetch-controller">fetch controller</a> or null</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-rule-predicate">document rule predicate</dfn> is one of the following:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#document-rule-conjunction" id="ref-for-document-rule-conjunction">document rule conjunction</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#document-rule-disjunction" id="ref-for-document-rule-disjunction">document rule disjunction</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#document-rule-negation" id="ref-for-document-rule-negation">document rule negation</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#document-rule-url-pattern-predicate" id="ref-for-document-rule-url-pattern-predicate">document rule URL pattern predicate</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#document-rule-css-selector-predicate" id="ref-for-document-rule-css-selector-predicate">document rule CSS selector predicate</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-rule-conjunction">document rule conjunction</dfn> is a struct with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item③">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="document rule conjunction" data-dfn-type="dfn" data-noexport id="document-rule-conjunction-clauses">clauses</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <a data-link-type="dfn" href="#document-rule-predicate" id="ref-for-document-rule-predicate①">document rule predicates</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-rule-disjunction">document rule disjunction</dfn> is a struct with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item④">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="document rule disjunction" data-dfn-type="dfn" data-noexport id="document-rule-disjunction-clauses">clauses</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a> of <a data-link-type="dfn" href="#document-rule-predicate" id="ref-for-document-rule-predicate②">document rule predicates</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-rule-negation">document rule negation</dfn> is a struct with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item⑤">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="document rule negation" data-dfn-type="dfn" data-noexport id="document-rule-negation-clause">clause</dfn>, a <a data-link-type="dfn" href="#document-rule-predicate" id="ref-for-document-rule-predicate③">document rule predicate</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-rule-url-pattern-predicate">document rule URL pattern predicate</dfn> is a struct with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item⑥">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="document rule URL pattern predicate" data-dfn-type="dfn" data-noexport id="document-rule-url-pattern-predicate-patterns">patterns</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">list</a> of <a data-link-type="dfn" href="https://urlpattern.spec.whatwg.org/#url-pattern" id="ref-for-url-pattern">URL patterns</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-rule-css-selector-predicate">document rule CSS selector predicate</dfn> is a struct with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item⑦">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="document rule CSS selector predicate" data-dfn-type="dfn" data-noexport id="document-rule-css-selector-predicate-selectors">selectors</dfn>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">list</a> of <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#selector" id="ref-for-selector">selectors</a></p>
   </ul>
   <p>The following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②">strings</a> are <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="valid-eagerness-strings">valid eagerness strings</dfn>: "<code>immediate</code>", "<code>eager</code>", "<code>moderate</code>", "<code>conservative</code>".</p>
   <p>A <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings①">valid eagerness string</a> <var>a</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="less-eager">less eager</dfn> than another <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings②">valid eagerness string</a> <var>b</var> if <var>a</var> follows <var>b</var> in the above list.</p>
   <p>A <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings③">valid eagerness string</a> <var>A</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="at-least-as-eager">at least as eager</dfn> as another <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings④">valid eagerness string</a> <var>B</var> if <var>A</var> is not <a data-link-type="dfn" href="#less-eager" id="ref-for-less-eager">less eager</a> than <var>B</var>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="speculation-rules-tag">speculation rules tag</dfn> is either an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string">ASCII string</a> or null.</p>
   <h3 class="heading settled" data-level="1.2" id="speculation-rules-script"><span class="secno">1.2. </span><span class="content">The <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script">script</a></code> element</span><a class="self-link" href="#speculation-rules-script"></a></h3>
   <p><em>Note</em>: This section contains modifications to the corresponding section of <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a>.</p>
   <p>To process speculation rules consistently with the existing script types, we make the following changes:</p>
   <ul>
    <li data-md>
     <p>Add "<code>speculationrules</code>" to the list of valid values for a <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script①">script</a></code> element’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-type" id="ref-for-concept-script-type">type</a>.</p>
    <li data-md>
     <p>Add a <a data-link-type="dfn" href="#speculation-rule-set" id="ref-for-speculation-rule-set">speculation rule set</a> to the list of valid values for a <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script②">script</a></code> element’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result" id="ref-for-concept-script-result">result</a>.</p>
   </ul>
   <p>The following algorithms are updated accordingly:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#prepare-the-script-element" id="ref-for-prepare-the-script-element">Prepare the script element</a>: see <a href="#speculation-rules-prepare-the-script-element-patch">§ 1.3 Prepare the script element</a>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#execute-the-script-element" id="ref-for-execute-the-script-element">Execute the script element</a>: Add the following case to the switch on <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-type" id="ref-for-concept-script-type①">type</a>:</p>
     <dl>
      <dt>"<code>speculationrules</code>"
      <dd>
       <ol>
        <li data-md>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: Never reached.</p>
       </ol>
     </dl>
   </ul>
   <p class="issue" id="issue-c2e21e13"><a class="self-link" href="#issue-c2e21e13"></a>We should consider whether we also want to make this execute even if scripting is disabled.</p>
   <p class="issue" id="issue-bb120c28"><a class="self-link" href="#issue-bb120c28"></a>We should also incorporate the case where a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-src" id="ref-for-dom-script-src">src</a></code> attribute is set.</p>
   <p class="issue" id="issue-9cd39e70"><a class="self-link" href="#issue-9cd39e70"></a>We could fire <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-error" id="ref-for-event-error">error</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-load" id="ref-for-event-load">load</a></code> events if we wanted to.</p>
   <ul>
    <li data-md>
     <p>In <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-supports" id="ref-for-dom-script-supports">supports(type)</a></code> method steps, before</p>
     <blockquote>
      <ol start="3">
       <li data-md>
        <p>Return false.</p>
      </ol>
     </blockquote>
     <p>add the following step:</p>
     <blockquote>
      <ol start="3">
       <li data-md>
        <p>If type is "<code>speculationrules</code>", then return true.</p>
      </ol>
     </blockquote>
   </ul>
   <div class="algorithm" data-algorithm="script element removing steps">
     The following steps are added as the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script③">script</a></code> element’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#html-element-removing-steps" id="ref-for-html-element-removing-steps">HTML element removing steps</a>, given <var>removedNode</var> and <var>oldParent</var>: 
    <ol>
     <li data-md>
      <p>If <var>removedNode</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result" id="ref-for-concept-script-result①">result</a> is a <a data-link-type="dfn" href="#speculation-rule-set" id="ref-for-speculation-rule-set①">speculation rule set</a>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>document</var> be <var>removedNode</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> it from <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-speculation-rule-sets" id="ref-for-document-list-of-speculation-rule-sets">list of speculation rule sets</a>.</p>
       <li data-md>
        <p>Set <var>removedNode</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#already-started" id="ref-for-already-started">already started</a> flag to false.</p>
       <li data-md>
        <p>Set <var>removedNode</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result" id="ref-for-concept-script-result②">result</a> to null.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#consider-speculation" id="ref-for-consider-speculation">Consider speculation</a> for <var>document</var>.</p>
      </ol>
      <div class="note" role="note">This means that the rule set can be reparsed if the script is reinserted.</div>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="script element children changed steps">
     The following steps are added as the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script④">script</a></code> element’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-children-changed-ext" id="ref-for-concept-node-children-changed-ext">children changed steps</a> for an element <var>scriptElement</var>. 
    <ol>
     <li data-md>
      <p>If <var>scriptElement</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result" id="ref-for-concept-script-result③">result</a> is a <a data-link-type="dfn" href="#speculation-rule-set" id="ref-for-speculation-rule-set②">speculation rule set</a>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>document</var> be <var>scriptElement</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>.</p>
       <li data-md>
        <p>Let <var>ruleSet</var> be <var>scriptElement</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result" id="ref-for-concept-script-result④">result</a>.</p>
       <li data-md>
        <p>Let <var>newResult</var> be the result of <a data-link-type="dfn" href="#parse-speculation-rules" id="ref-for-parse-speculation-rules">parsing speculation rules</a> given <var>scriptElement</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-child-text-content" id="ref-for-concept-child-text-content">child text content</a>, <var>document</var>, and <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url" id="ref-for-document-base-url">document base URL</a>.</p>
       <li data-md>
        <p>Set <var>scriptElement</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result" id="ref-for-concept-script-result⑤">result</a> to <var>newResult</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-replace" id="ref-for-list-replace">Replace</a> <var>ruleSet</var> with <var>newResult</var> in <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-speculation-rule-sets" id="ref-for-document-list-of-speculation-rule-sets①">list of speculation rule sets</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#consider-speculation" id="ref-for-consider-speculation①">Consider speculation</a> for <var>document</var>.</p>
      </ol>
      <div class="note" role="note">This means that the rule set is reparsed immediately if inline changes are made.</div>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.3" id="speculation-rules-prepare-the-script-element-patch"><span class="secno">1.3. </span><span class="content">Prepare the script element</span><a class="self-link" href="#speculation-rules-prepare-the-script-element-patch"></a></h3>
   <p>Inside the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#prepare-the-script-element" id="ref-for-prepare-the-script-element①">prepare the script element</a> algorithm we make the following changes:</p>
   <ul>
    <li data-md>
     <p>Insert the following step after the step that checks for an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>module</code>":</p>
     <ul>
      <li data-md>
       <p>If the script block’s type string is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive①">ASCII case-insensitive</a> match for the string "<code>speculationrules</code>", then set <var>el</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-type" id="ref-for-concept-script-type②">type</a> to "<code>speculationrules</code>".</p>
     </ul>
    <li data-md>
     <p>Insert the following case in the switch on <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#concept-script-type" id="ref-for-concept-script-type③">type</a> within the step which begins "If <var>el</var> does not have a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-src" id="ref-for-dom-script-src①">src</a></code> content attribute..."</p>
     <dl>
      <dt>"<code>speculationrules</code>"
      <dd>
       <ol>
        <li data-md>
         <p>Let <var>document</var> be <var>el</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a></p>
        <li data-md>
         <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="#parse-speculation-rules" id="ref-for-parse-speculation-rules①">parsing speculation rules</a> given source text, <var>document</var> and base URL.</p>
        <li data-md>
         <p>If <var>result</var> is not null, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> it to <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-speculation-rule-sets" id="ref-for-document-list-of-speculation-rule-sets②">list of speculation rule sets</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/scripting.html#mark-as-ready" id="ref-for-mark-as-ready">Mark as ready</a> <var>el</var> given <var>result</var>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="#consider-speculation" id="ref-for-consider-speculation②">Consider speculation</a> for <var>document</var>.</p>
       </ol>
     </dl>
    <li data-md>
     <p>Replace "script" argument with <var>cspType</var> that is set through the following steps, and passed to <a href="https://w3c.github.io/webappsec-csp/#should-block-inline"><cite>Content Security Policy 3</cite> § 4.2.3 Should element’s inline type behavior be blocked by Content Security Policy?</a> algorithm.</p>
     <dl>
      <dd>
       <ol>
        <li data-md>
         <p>Let <var>cspType</var> be "script".</p>
        <li data-md>
         <p>If <var>type</var> is "<code>speculationrules</code>", then set <var>cspType</var> to "<code>script speculationrules</code>".</p>
       </ol>
     </dl>
   </ul>
   <h3 class="heading settled" data-level="1.4" id="speculation-rules-header"><span class="secno">1.4. </span><span class="content">The `<dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="http-headerdef-speculation-rules"><code>Speculation-Rules</code></dfn>` header</span><a class="self-link" href="#speculation-rules-header"></a></h3>
    Note: This section contains modifications to <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a>. 
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-speculation-rules" id="ref-for-http-headerdef-speculation-rules">Speculation-Rules</a></code>` HTTP response header is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#top" id="ref-for-top">structured header</a> whose value must be a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#list" id="ref-for-list⑥">list</a> whose members must be <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③">strings</a> which are <a data-link-type="dfn" href="https://url.spec.whatwg.org/#valid-url-string" id="ref-for-valid-url-string">valid URL strings</a>.</p>
   <div class="algorithm" data-algorithm="process the Speculation-Rules header">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process-the-speculation-rules-header">process the Speculation-Rules header</dfn> given a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">document</a> <var>document</var> and a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a> <var>response</var>:</p>
    <ol>
     <li data-md>
      <p>Optionally, return.</p>
      <p class="note" role="note">The user agent could ignore this header, for example, if it does not intend to <a data-link-type="dfn" href="#consider-speculation" id="ref-for-consider-speculation③">consider speculation</a> for <var>document</var>.</p>
     <li data-md>
      <p>Let <var>parsedList</var> be the result of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header">getting a structured field value</a> given `<code><a data-link-type="http-header" href="#http-headerdef-speculation-rules" id="ref-for-http-headerdef-speculation-rules①">Speculation-Rules</a></code>` and "<code>list</code>" from <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list">header list</a>.</p>
     <li data-md>
      <p>If <var>parsedList</var> is null, then return.</p>
     <li data-md>
      <p>Let <var>baseUrl</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url" id="ref-for-document-base-url①">document base URL</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>item</var> of <var>parsedList</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>item</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string④">string</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>.</p>
       <li data-md>
        <p>Let <var>parsedURL</var> be the result of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-basic-url-parser" id="ref-for-concept-basic-url-parser">parsing</a> <var>item</var> with <var>baseUrl</var>.</p>
       <li data-md>
        <p>If <var>parsedURL</var> is failure, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①">continue</a>.</p>
       <li data-md>
        <p>Let <var>pendingResource</var> be a <a data-link-type="dfn" href="#pending-external-speculation-rule-resource" id="ref-for-pending-external-speculation-rule-resource">pending external speculation rule resource</a> with <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-url" id="ref-for-pending-external-speculation-rule-resource-url">URL</a> <var>parsedURL</var> and <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-controller" id="ref-for-pending-external-speculation-rule-resource-controller">controller</a> null.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>pendingResource</var> to <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-pending-external-speculation-rule-resources" id="ref-for-document-list-of-pending-external-speculation-rule-resources">list of pending external speculation rule resources</a>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#process-pending-external-speculation-rule-resources" id="ref-for-process-pending-external-speculation-rule-resources">Process pending external speculation rule resources</a> given <var>document</var>.</p>
    </ol>
   </div>
   <p>In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-lifecycle.html#initialise-the-document-object" id="ref-for-initialise-the-document-object">create and initialize a <code>Document</code> object</a>, before the step</p>
   <blockquote>
    <ol start="19">
     <li data-md>
      <p>Return <var>document</var>.</p>
    </ol>
   </blockquote>
   <p>add the following step</p>
   <blockquote>
    <ol start="19">
     <li data-md>
      <p><a data-link-type="dfn" href="#process-the-speculation-rules-header" id="ref-for-process-the-speculation-rules-header">Process the Speculation-Rules header</a> given <var>document</var> and <var>navigationParams</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response①">response</a>.</p>
    </ol>
   </blockquote>
   <h3 class="heading settled" data-level="1.5" id="external-speculation-rule-sets"><span class="secno">1.5. </span><span class="content">External speculation rule sets</span><a class="self-link" href="#external-speculation-rule-sets"></a></h3>
   <div class="algorithm" data-algorithm="process pending external speculation rule resources">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process-pending-external-speculation-rule-resources">process pending external speculation rule resources</dfn> given a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">document</a> <var>document</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>pendingResources</var> be <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-pending-external-speculation-rule-resources" id="ref-for-document-list-of-pending-external-speculation-rule-resources①">list of pending external speculation rule resources</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>pendingResource</var> of <var>pendingResources</var>:</p>
      <ol>
       <li data-md>
        <p>Optionally, <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-cancel-and-discard" id="ref-for-pending-external-speculation-rule-resource-cancel-and-discard">cancel and discard</a> <var>pendingResource</var> given <var>document</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue②">continue</a>.</p>
       <li data-md>
        <p>If <var>pendingResource</var>’s <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-controller" id="ref-for-pending-external-speculation-rule-resource-controller①">controller</a> is not null, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue③">continue</a>.</p>
       <li data-md>
        <p>Optionally, <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-fetch" id="ref-for-pending-external-speculation-rule-resource-fetch">fetch</a> <var>pendingResource</var> given <var>document</var>.</p>
        <p class="note" role="note">The user agent schedules the fetch of external speculation rules at its discretion. That is, if it skips the fetch during this call of <a data-link-type="dfn" href="#process-pending-external-speculation-rule-resources" id="ref-for-process-pending-external-speculation-rule-resources①">process pending external speculation rule resources</a>, it might do the fetch during a later call.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="fetch" data-algorithm-for="pending external speculation rule resource">
    <p>To <dfn class="dfn-paneled" data-dfn-for="pending external speculation rule resource" data-dfn-type="dfn" data-noexport id="pending-external-speculation-rule-resource-fetch">fetch</dfn> a <a data-link-type="dfn" href="#pending-external-speculation-rule-resource" id="ref-for-pending-external-speculation-rule-resource①">pending external speculation rule resource</a> <var>pendingResource</var> given a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document②">document</a> <var>document</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>pendingResources</var> be <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-pending-external-speculation-rule-resources" id="ref-for-document-list-of-pending-external-speculation-rule-resources②">list of pending external speculation rule resources</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>pendingResources</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>pendingResource</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: <var>pendingResource</var>’s <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-controller" id="ref-for-pending-external-speculation-rule-resource-controller②">controller</a> is null.</p>
     <li data-md>
      <p>Let <var>settingsObject</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>requestURL</var> be <var>pendingResource</var>’s <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-url" id="ref-for-pending-external-speculation-rule-resource-url①">URL</a>.</p>
     <li data-md>
      <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a> whose <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url">URL</a> is <var>requestURL</var>, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client">client</a> is <var>settingsObject</var>, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-mode" id="ref-for-concept-request-mode">mode</a> is "<code>cors</code>", and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination">destination</a> is "<code>speculationrules</code>".</p>
     <li data-md>
      <p>Let <var>controller</var> be the result of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch">fetching</a> given <var>request</var> with <i><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#process-response-end-of-body" id="ref-for-process-response-end-of-body">processResponseConsumeBody</a></i> set to the following steps given <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response②">response</a> <var>response</var> and null, failure, or a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a> <var>body</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">Remove</a> <var>pendingResource</var> from <var>pendingResources</var>.</p>
       <li data-md>
        <p>If any of the following conditions are true, abort these steps:</p>
        <ul>
         <li data-md>
          <p><var>body</var> is null.</p>
         <li data-md>
          <p><var>body</var> is failure.</p>
         <li data-md>
          <p><var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status">status</a> is not an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#ok-status" id="ref-for-ok-status">ok status</a>.</p>
         <li data-md>
          <p>The result of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-extract-mime-type" id="ref-for-concept-header-extract-mime-type">extracting a MIME type</a> from <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list①">header list</a> does not have an <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence">essence</a> of "<code>application/speculationrules+json</code>".</p>
        </ul>
       <li data-md>
        <p>Otherwise, let <var>text</var> be the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode" id="ref-for-utf-8-decode">UTF-8 decoding</a> <var>body</var>.</p>
       <li data-md>
        <p>Let <var>ruleSet</var> be the result of <a data-link-type="dfn" href="#parse-speculation-rules" id="ref-for-parse-speculation-rules②">parsing speculation rules</a> given <var>text</var>, <var>document</var> and <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-url" id="ref-for-concept-response-url">URL</a>.</p>
       <li data-md>
        <p>If <var>ruleSet</var> is null, abort these steps.</p>
        <p class="note" role="note">User agents are encouraged to report failures of the previous steps.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">Append</a> <var>ruleSet</var> to <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-speculation-rule-sets" id="ref-for-document-list-of-speculation-rule-sets③">list of speculation rule sets</a>.</p>
      </ol>
     <li data-md>
      <p>Set <var>pendingResource</var>’s <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-controller" id="ref-for-pending-external-speculation-rule-resource-controller③">controller</a> to <var>controller</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="cancel and discard" data-algorithm-for="pending external speculation rule resource">
    <p>To <dfn class="dfn-paneled" data-dfn-for="pending external speculation rule resource" data-dfn-type="dfn" data-noexport id="pending-external-speculation-rule-resource-cancel-and-discard">cancel and discard</dfn> a <a data-link-type="dfn" href="#pending-external-speculation-rule-resource" id="ref-for-pending-external-speculation-rule-resource②">pending external speculation rule resource</a> <var>pendingResource</var> given a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document③">document</a> <var>document</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>pendingResources</var> be <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-pending-external-speculation-rule-resources" id="ref-for-document-list-of-pending-external-speculation-rule-resources③">list of pending external speculation rule resources</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <var>pendingResources</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">contains</a> <var>pendingResource</var>.</p>
     <li data-md>
      <p>Let <var>controller</var> be <var>pendingResource</var>’s <a data-link-type="dfn" href="#pending-external-speculation-rule-resource-controller" id="ref-for-pending-external-speculation-rule-resource-controller④">controller</a>.</p>
     <li data-md>
      <p>If <var>controller</var> is not null, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-controller-abort" id="ref-for-fetch-controller-abort">abort</a> <var>controller</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove②">Remove</a> <var>pendingResource</var> from <var>pendingResources</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.6" id="speculation-rules-parsing"><span class="secno">1.6. </span><span class="content">Parsing</span><a class="self-link" href="#speculation-rules-parsing"></a></h3>
   <p class="note" role="note"> The general principle here is to allow the existence of directives which are not understood, but not to accept into the rule set a rule which the user agent does not fully understand.
  This reduces the risk of unintended activity by user agents which are unaware of most recently added directives which might limit the scope of a rule. </p>
   <div class="algorithm" data-algorithm="parse speculation rules">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-speculation-rules">parse speculation rules</dfn> given a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑤">string</a> <var>input</var>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document④">document</a> <var>document</var>, and a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②">URL</a> <var>baseURL</var>, perform the following steps. They return a <a data-link-type="dfn" href="#speculation-rule-set" id="ref-for-speculation-rule-set③">speculation rule set</a> or null. 
    <ol>
     <li data-md>
      <p>Let <var>parsed</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value" id="ref-for-parse-a-json-string-to-an-infra-value">parsing a JSON string to an Infra value</a> given <var>input</var>.</p>
     <li data-md>
      <p>If <var>parsed</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a>, then return null.</p>
     <li data-md>
      <p>Let <var>result</var> be an empty <a data-link-type="dfn" href="#speculation-rule-set" id="ref-for-speculation-rule-set④">speculation rule set</a>.</p>
     <li data-md>
      <p>Let <var>tag</var> be null.</p>
     <li data-md>
      <p>If <var>parsed</var>["<code>tag</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exists</a>, then:</p>
      <ol>
       <li data-md>
        <p>If <var>parsed</var>["<code>tag</code>"] is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string①">ASCII string</a>, then return null.</p>
       <li data-md>
        <p>Set <var>tag</var> to <var>parsed</var>["<code>tag</code>"].</p>
      </ol>
     <li data-md>
      <p>If <var>parsed</var>["<code>prefetch</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a> and is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑦">list</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">for each</a> <var>prefetchRule</var> of <var>parsed</var>["<code>prefetch</code>"]:</p>
      <ol>
       <li data-md>
        <p>If <var>prefetchRule</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue④">continue</a>.</p>
       <li data-md>
        <p>Let <var>rule</var> be the result of <a data-link-type="dfn" href="#parse-a-speculation-rule" id="ref-for-parse-a-speculation-rule">parsing a speculation rule</a> given <var>prefetchRule</var>, <var>tag</var>, <var>document</var> and <var>baseURL</var>.</p>
       <li data-md>
        <p>If <var>rule</var> is null, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue⑤">continue</a>.</p>
       <li data-md>
        <p>If <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-target-navigable-name-hint" id="ref-for-speculation-rule-target-navigable-name-hint">target navigable name hint</a> is not null, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue⑥">continue</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>rule</var> to <var>result</var>’s <a data-link-type="dfn" href="#speculation-rule-set-prefetch-rules" id="ref-for-speculation-rule-set-prefetch-rules">prefetch rules</a>.</p>
      </ol>
     <li data-md>
      <p>If <var>parsed</var>["<code>prerender</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">exists</a> and is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑧">list</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">for each</a> <var>prerenderRule</var> of <var>parsed</var>["<code>prerender</code>"]:</p>
      <ol>
       <li data-md>
        <p>If <var>prerenderRule</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">map</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue⑦">continue</a>.</p>
       <li data-md>
        <p>Let <var>rule</var> be the result of <a data-link-type="dfn" href="#parse-a-speculation-rule" id="ref-for-parse-a-speculation-rule①">parsing a speculation rule</a> given <var>prerenderRule</var>, <var>tag</var>, <var>document</var>, and <var>baseURL</var>.</p>
       <li data-md>
        <p>If <var>rule</var> is null, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue⑧">continue</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append④">Append</a> <var>rule</var> to <var>result</var>’s <a data-link-type="dfn" href="#speculation-rule-set-prerender-rules" id="ref-for-speculation-rule-set-prerender-rules">prerender rules</a>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="parse a speculation rule">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-a-speculation-rule">parse a speculation rule</dfn> given a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③">map</a> <var>input</var>, a <a data-link-type="dfn" href="#speculation-rules-tag" id="ref-for-speculation-rules-tag①">speculation rules tag</a> <var>rulesetLevelTag</var>, a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑤">document</a> <var>document</var>, and a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url③">URL</a> <var>baseURL</var>, perform the following steps. They return a <a data-link-type="dfn" href="#speculation-rule" id="ref-for-speculation-rule②">speculation rule</a> or null. 
    <ol>
     <li data-md>
      <p>If <var>input</var> has any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key">key</a> other than "<code>source</code>", "<code>urls</code>", "<code>where</code>", "<code>requires</code>", "<code>target_hint</code>","<code>referrer_policy</code>", "<code>relative_to</code>", "<code>eagerness</code>", and "<code>expects_no_vary_search</code>" then return null.</p>
     <li data-md>
      <p>Let <var>source</var> be null.</p>
     <li data-md>
      <p>If <var>input</var>["<code>source</code>"] exists, then:</p>
      <ol>
       <li data-md>
        <p>Set <var>source</var> to <var>input</var>["<code>source</code>"].</p>
      </ol>
     <li data-md>
      <p>Otherwise, if <var>input</var>["<code>urls</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">exists</a> and <var>input</var>["<code>where</code>"] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">exist</a>, then:</p>
      <ol>
       <li data-md>
        <p>Set <var>source</var> to "<code>list</code>".</p>
      </ol>
     <li data-md>
      <p>Otherwise, if <var>input</var>["<code>where</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑤">exists</a> and <var>input</var>["<code>urls</code>"] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑥">exist</a>, then:</p>
      <ol>
       <li data-md>
        <p>Set <var>source</var> to "<code>document</code>".</p>
      </ol>
     <li data-md>
      <p>If <var>source</var> is neither the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑥">string</a> "<code>list</code>" nor the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑦">string</a> "<code>document</code>", then return null.</p>
     <li data-md>
      <p>Let <var>urls</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑨">list</a>.</p>
     <li data-md>
      <p>Let <var>predicate</var> be null.</p>
     <li data-md>
      <p>If <var>source</var> is "<code>list</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>where</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑦">exists</a>, then return null.</p>
       <li data-md>
        <p>If <var>input</var>["<code>urls</code>"] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑧">exist</a>, is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⓪">list</a>, or has any element which is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑧">string</a>, then return null.</p>
       <li data-md>
        <p>If <var>input</var>["<code>relative_to</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑨">exists</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>relativeTo</var> be <var>input</var>["<code>relative_to</code>"].</p>
         <li data-md>
          <p>If <var>relativeTo</var> is neither the string "<code>ruleset</code>" nor the string "<code>document</code>", then return null.</p>
         <li data-md>
          <p>If <var>relativeTo</var> is "<code>document</code>", then set <var>baseURL</var> to the <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url" id="ref-for-document-base-url②">document base URL</a>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">For each</a> <var>urlString</var> of <var>input</var>["<code>urls</code>"]:</p>
        <ol>
         <li data-md>
          <p>Let <var>parsedURL</var> be the result of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-basic-url-parser" id="ref-for-concept-basic-url-parser①">parsing</a> <var>urlString</var> with <var>baseURL</var>.</p>
         <li data-md>
          <p>If <var>parsedURL</var> is failure, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue⑨">continue</a>.</p>
         <li data-md>
          <p>If <var>parsedURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme">scheme</a> is not an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-scheme" id="ref-for-http-scheme">HTTP(S) scheme</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①⓪">continue</a>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑤">Append</a> <var>parsedURL</var> to <var>urls</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>source</var> is "<code>document</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>urls</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⓪">exists</a>, then return null.</p>
       <li data-md>
        <p>If <var>input</var>["<code>relative_to</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①①">exists</a>, then return null.</p>
       <li data-md>
        <p>If <var>input</var>["<code>where</code>"] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①②">exist</a>, then set <var>predicate</var> to a <a data-link-type="dfn" href="#document-rule-conjunction" id="ref-for-document-rule-conjunction①">document rule conjunction</a> whose <a data-link-type="dfn" href="#document-rule-conjunction-clauses" id="ref-for-document-rule-conjunction-clauses">clauses</a> is an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①①">list</a>.</p>
        <p class="note" role="note">Such a predicate will match all links.</p>
       <li data-md>
        <p>Otherwise, set <var>predicate</var> to the result of <a data-link-type="dfn" href="#parse-a-document-rule-predicate" id="ref-for-parse-a-document-rule-predicate">parsing a document rule predicate</a> given <var>input</var>["<code>where</code>"], <var>document</var> and <var>baseURL</var>.</p>
       <li data-md>
        <p>If <var>predicate</var> is null, then return null.</p>
      </ol>
     <li data-md>
      <p>Let <var>requirements</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">ordered set</a>.</p>
     <li data-md>
      <p>If <var>input</var>["<code>requires</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①③">exists</a>, but is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①②">list</a>, then return null.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑤">For each</a> <var>requirement</var> of <var>input</var>["<code>requires</code>"]:</p>
      <ol>
       <li data-md>
        <p>If <var>requirement</var> is not the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑨">string</a> "<code>anonymous-client-ip-when-cross-origin</code>", then return null.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>requirement</var> to <var>requirements</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>targetHint</var> be null.</p>
     <li data-md>
      <p>If <var>input</var>["<code>target_hint</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①④">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>target_hint</code>"] is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#valid-navigable-target-name-or-keyword" id="ref-for-valid-navigable-target-name-or-keyword">valid navigable target name or keyword</a>, then return null.</p>
       <li data-md>
        <p>Set <var>targetHint</var> to <var>input</var>["<code>target_hint</code>"].</p>
      </ol>
     <li data-md>
      <p>Let <var>referrerPolicy</var> be the empty string.</p>
     <li data-md>
      <p>If <var>input</var>["<code>referrer_policy</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑤">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>referrer_policy</code>"] is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy" id="ref-for-referrer-policy①">referrer policy</a>, then return null.</p>
       <li data-md>
        <p>Set <var>referrerPolicy</var> to <var>input</var>["<code>referrer_policy</code>"].</p>
      </ol>
     <li data-md>
      <p>Let <var>eagerness</var> be "<code>immediate</code>" if <var>source</var> is "<code>list</code>", and "<code>conservative</code>" otherwise.</p>
     <li data-md>
      <p>If <var>input</var>["<code>eagerness</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑥">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>eagerness</code>"] is not one of the <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings⑤">valid eagerness strings</a>, then return null.</p>
       <li data-md>
        <p>Set <var>eagerness</var> to <var>input</var>["<code>eagerness</code>"].</p>
      </ol>
     <li data-md>
      <p>Let <var>noVarySearchHint</var> be the <a data-link-type="dfn" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#iref-default-url-search-variance" id="ref-for-iref-default-url-search-variance">default URL search variance</a>.</p>
     <li data-md>
      <p>If <var>input</var>["<code>expects_no_vary_search</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑦">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>expects_no_vary_search</code>"] is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⓪">string</a>, then return null.</p>
       <li data-md>
        <p>Set <var>noVarySearchHint</var> to the result of <a data-link-type="dfn" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-obtain-a-url-search-varianc" id="ref-for-name-obtain-a-url-search-varianc">obtaining a URL search variance</a> given <var>input</var>["<code>expects_no_vary_search</code>"].</p>
      </ol>
     <li data-md>
      <p>Let <var>tags</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set④">ordered set</a>.</p>
     <li data-md>
      <p>If <var>rulesetLevelTag</var> is not null, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">append</a> <var>rulesetLevelTag</var> to <var>tags</var>.</p>
     <li data-md>
      <p>If <var>input</var>["<code>tag</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑧">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var>["<code>tag</code>"] is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string②">ASCII string</a>, then return null.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append②">Append</a> <var>input</var>["<code>tag</code>"] to <var>tags</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>tags</var> is empty, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append③">append</a> null to <var>tags</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert④">Assert</a>: <var>tags</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">size</a> is either 1 or 2.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="#speculation-rule" id="ref-for-speculation-rule③">speculation rule</a> with</p>
      <dl class="props">
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-tags" id="ref-for-speculation-rule-tags">tags</a>
       <dd data-md>
        <p><var>tags</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-urls" id="ref-for-speculation-rule-urls">URLs</a>
       <dd data-md>
        <p><var>urls</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-predicate" id="ref-for-speculation-rule-predicate">predicate</a>
       <dd data-md>
        <p><var>predicate</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-requirements" id="ref-for-speculation-rule-requirements①">requirements</a>
       <dd data-md>
        <p><var>requirements</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-target-navigable-name-hint" id="ref-for-speculation-rule-target-navigable-name-hint①">target navigable name hint</a>
       <dd data-md>
        <p><var>targetHint</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-referrer-policy" id="ref-for-speculation-rule-referrer-policy">referrer policy</a>
       <dd data-md>
        <p><var>referrerPolicy</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-eagerness" id="ref-for-speculation-rule-eagerness">eagerness</a>
       <dd data-md>
        <p><var>eagerness</var></p>
       <dt data-md><a data-link-type="dfn" href="#speculation-rule-no-vary-search-hint" id="ref-for-speculation-rule-no-vary-search-hint">No-Vary-Search hint</a>
       <dd data-md>
        <p><var>noVarySearchHint</var></p>
      </dl>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="parse a document rule predicate">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-a-document-rule-predicate">parse a document rule predicate</dfn> given a value <var>input</var>, a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑥">document</a> <var>document</var> and <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url④">URL</a> <var>baseURL</var>: 
    <ol>
     <li data-md>
      <p>If <var>input</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④">map</a>, then return null.</p>
     <li data-md>
      <p>If <var>input</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑨">contain</a> exactly one of "<code>and</code>", "<code>or</code>", "<code>not</code>", "<code>href_matches</code>" and "<code>selector_matches</code>", then return null. Otherwise, let <var>predicateType</var> be that key.</p>
      <p class="note" role="note">This makes sure it is unambiguous what type of predicate is being used.</p>
     <li data-md>
      <p>If <var>predicateType</var> is "<code>and</code>" or "<code>or</code>", then:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var> has any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key①">key</a> other than <var>predicateType</var>, then return null.</p>
        <p class="note" role="note">This, and other similar checks below, make sure that unexpected extra options cause the predicate to be invalid.</p>
       <li data-md>
        <p>Let <var>rawClauses</var> be the <var>input</var>[<var>predicateType</var>].</p>
       <li data-md>
        <p>If <var>rawClauses</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①③">list</a>, then return null.</p>
       <li data-md>
        <p>Let <var>clauses</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①④">list</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑥">For each</a> <var>rawClause</var> of <var>rawClauses</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>clause</var> be the result of <a data-link-type="dfn" href="#parse-a-document-rule-predicate" id="ref-for-parse-a-document-rule-predicate①">parsing a document rule predicate</a> given <var>rawClause</var>, <var>document</var> and <var>baseURL</var>.</p>
         <li data-md>
          <p>If <var>clause</var> is null, then return null.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑥">Append</a> <var>clause</var> to <var>clauses</var>.</p>
        </ol>
       <li data-md>
        <p>If <var>predicateType</var> is "<code>and</code>", then return a <a data-link-type="dfn" href="#document-rule-conjunction" id="ref-for-document-rule-conjunction②">document rule conjunction</a> whose <a data-link-type="dfn" href="#document-rule-conjunction-clauses" id="ref-for-document-rule-conjunction-clauses①">clauses</a> is <var>clauses</var>.</p>
       <li data-md>
        <p>If <var>predicateType</var> is "<code>or</code>", then return a <a data-link-type="dfn" href="#document-rule-disjunction" id="ref-for-document-rule-disjunction①">document rule disjunction</a> whose <a data-link-type="dfn" href="#document-rule-disjunction-clauses" id="ref-for-document-rule-disjunction-clauses">clauses</a> is <var>clauses</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>predicateType</var> is "<code>not</code>", then:</p>
      <ol>
       <li data-md>
        <p>If <var>input</var> has any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key②">key</a> other than "<code>not</code>", then return null.</p>
       <li data-md>
        <p>Let <var>rawClause</var> be the <var>input</var>[<var>predicateType</var>].</p>
       <li data-md>
        <p>Let <var>clause</var> be the result of <a data-link-type="dfn" href="#parse-a-document-rule-predicate" id="ref-for-parse-a-document-rule-predicate②">parsing a document rule predicate</a> given <var>rawClause</var>, <var>document</var> and <var>baseURL</var>.</p>
       <li data-md>
        <p>If <var>clause</var> is null, then return null.</p>
       <li data-md>
        <p>Return a <a data-link-type="dfn" href="#document-rule-negation" id="ref-for-document-rule-negation①">document rule negation</a> whose <a data-link-type="dfn" href="#document-rule-negation-clause" id="ref-for-document-rule-negation-clause">clause</a> is <var>clause</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>predicateType</var> is "<code>href_matches</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>input</var> has any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key③">key</a> other than "<code>href_matches</code>" and "<code>relative_to</code>", then return null.</p>
       <li data-md>
        <p>If <var>input</var>["<code>relative_to</code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⓪">exists</a>, then:</p>
        <ol>
         <li data-md>
          <p>Let <var>relativeTo</var> be <var>input</var>["<code>relative_to</code>"].</p>
         <li data-md>
          <p>If <var>relativeTo</var> is neither the string "<code>ruleset</code>" nor the string "<code>document</code>", then return null.</p>
         <li data-md>
          <p>If <var>relativeTo</var> is "<code>document</code>", set <var>baseURL</var> to the <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url" id="ref-for-document-base-url③">document base URL</a>.</p>
        </ol>
       <li data-md>
        <p>Let <var>rawPatterns</var> be <var>input</var>["<code>href_matches</code>"].</p>
       <li data-md>
        <p>If <var>rawPatterns</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⑤">list</a>, then set <var>rawPatterns</var> to « <var>rawPatterns</var> ».</p>
       <li data-md>
        <p>Let <var>patterns</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⑥">list</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑦">For each</a> <var>rawPattern</var> of <var>rawPatterns</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>pattern</var> be the result of <a data-link-type="dfn" href="https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-infra-value" id="ref-for-build-a-url-pattern-from-an-infra-value">building a URL pattern from an Infra value</a> <var>rawPattern</var> given <var>baseURL</var>. If this step throws, catch the exception and return null.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑦">Append</a> <var>pattern</var> to <var>patterns</var>.</p>
        </ol>
       <li data-md>
        <p>Return a <a data-link-type="dfn" href="#document-rule-url-pattern-predicate" id="ref-for-document-rule-url-pattern-predicate①">document rule URL pattern predicate</a> whose <a data-link-type="dfn" href="#document-rule-url-pattern-predicate-patterns" id="ref-for-document-rule-url-pattern-predicate-patterns">patterns</a> is <var>patterns</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>predicateType</var> is "<code>selector_matches</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>input</var> has any <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key④">key</a> other than "<code>selector_matches</code>", then return null.</p>
       <li data-md>
        <p>Let <var>rawSelectors</var> be <var>input</var>["<code>selector_matches</code>"].</p>
       <li data-md>
        <p>If <var>rawSelectors</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⑦">list</a>, then set <var>rawSelectors</var> to « <var>rawSelectors</var> ».</p>
       <li data-md>
        <p>Let <var>selectors</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⑧">list</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑧">For each</a> <var>rawSelector</var> of <var>selectors</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>rawSelector</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①①">string</a>, then return null.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#parse-a-selector" id="ref-for-parse-a-selector">Parse a selector</a> from <var>rawSelector</var>. If the result is failure, then return null. Otherwise, let <var>selector</var> be the result.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑧">Append</a> <var>selector</var> to <var>selectors</var>.</p>
        </ol>
       <li data-md>
        <p>Return a <a data-link-type="dfn" href="#document-rule-css-selector-predicate" id="ref-for-document-rule-css-selector-predicate①">document rule CSS selector predicate</a> whose <a data-link-type="dfn" href="#document-rule-css-selector-predicate-selectors" id="ref-for-document-rule-css-selector-predicate-selectors">selectors</a> is <var>selectors</var>.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.7" id="speculation-rules-processing"><span class="secno">1.7. </span><span class="content">Processing model</span><a class="self-link" href="#speculation-rules-processing"></a></h3>
   <p>A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑦">document</a> has a <dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-export id="document-list-of-speculation-rule-sets">list of speculation rule sets</dfn>, which is an initially empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⑨">list</a>.</p>
   <p>A <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑧">document</a> has a <dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-export id="document-list-of-pending-external-speculation-rule-resources">list of pending external speculation rule resources</dfn>, which is an initially empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②⓪">list</a> of <a data-link-type="dfn" href="#pending-external-speculation-rule-resource" id="ref-for-pending-external-speculation-rule-resource③">pending external speculation rule resources</a>.</p>
   <p>Periodically, for any <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document⑨">document</a> <var>document</var>, the user agent may <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source">DOM manipulation task source</a> with <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> to <a data-link-type="dfn" href="#consider-speculation" id="ref-for-consider-speculation④">consider speculation</a> for <var>document</var>.</p>
   <p class="note" role="note"> The user agent will likely do when resources are idle and available, or otherwise the circumstances of its previous decision whether to start a speculation could have changed. </p>
   <p class="note" role="note"> The user agent might still <a data-link-type="dfn" href="#consider-speculation" id="ref-for-consider-speculation⑤">consider speculation</a> when there are <a data-link-type="dfn" href="#document-list-of-pending-external-speculation-rule-resources" id="ref-for-document-list-of-pending-external-speculation-rule-resources④">rule sets that have not been loaded yet</a>. </p>
   <p>The user agent may also <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source" id="ref-for-networking-task-source">networking task source</a> with <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a> to <a data-link-type="dfn" href="#process-pending-external-speculation-rule-resources" id="ref-for-process-pending-external-speculation-rule-resources②">process pending external speculation rule resources</a> given <var>document</var>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="speculative-load-candidate">speculative load candidate</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct③">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item⑧">items</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculative load candidate" data-dfn-type="dfn" data-noexport id="speculative-load-candidate-tags">tags</dfn>, an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑤">ordered set</a> of <a data-link-type="dfn" href="#speculation-rules-tag" id="ref-for-speculation-rules-tag②">speculation rules tags</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculative load candidate" data-dfn-type="dfn" data-noexport id="speculative-load-candidate-url">URL</dfn>, a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url⑤">URL</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculative load candidate" data-dfn-type="dfn" data-noexport id="speculative-load-candidate-referrer-policy">referrer policy</dfn>, a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy" id="ref-for-referrer-policy②">referrer policy</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculative load candidate" data-dfn-type="dfn" data-noexport id="speculative-load-candidate-eagerness">eagerness</dfn>, one of the <a data-link-type="dfn" href="#valid-eagerness-strings" id="ref-for-valid-eagerness-strings⑥">valid eagerness strings</a></p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="speculative load candidate" data-dfn-type="dfn" data-noexport id="speculative-load-candidate-no-vary-search-hint">No-Vary-Search hint</dfn>, a <a data-link-type="dfn" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-data-model" id="ref-for-name-data-model①">URL search variance</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="prefetch-candidate">prefetch candidate</dfn> is a <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate">speculative load candidate</a> with the following additional <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item⑨">item</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="prefetch candidate" data-dfn-type="dfn" data-noexport id="prefetch-candidate-anonymization-policy">anonymization policy</dfn>, a <a data-link-type="dfn" href="prefetch.html#prefetch-ip-anonymization-policy" id="ref-for-prefetch-ip-anonymization-policy">prefetch IP anonymization policy</a></p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="prerender-candidate">prerender candidate</dfn> is a <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate①">speculative load candidate</a> with the following additional <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item①⓪">item</a>:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="prerender candidate" data-dfn-type="dfn" data-noexport id="prerender-candidate-target-navigable-name-hint">target navigable name hint</dfn>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#valid-navigable-target-name-or-keyword" id="ref-for-valid-navigable-target-name-or-keyword①">valid navigable target name or keyword</a> or null</p>
   </ul>
   <div class="algorithm" data-algorithm="redundant with" data-algorithm-for="speculative load candidate">
     A <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate②">speculative load candidate</a> <var>A</var> is <dfn class="dfn-paneled" data-dfn-for="speculative load candidate" data-dfn-type="dfn" data-noexport id="speculative-load-candidate-redundant-with">redundant with</dfn> another <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate③">speculative load candidate</a> <var>B</var> if the following steps return true: 
    <ol>
     <li data-md>
      <p>If <var>A</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint">No-Vary-Search hint</a> is not equal to <var>B</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint①">No-Vary-Search hint</a>, then return false.</p>
     <li data-md>
      <p>If <var>A</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url">URL</a> is not <a data-link-type="dfn" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-comparing" id="ref-for-name-comparing">equivalent modulo search variance</a> to <var>B</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url①">URL</a> given <var>A</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint②">No-Vary-Search hint</a>, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
    <p class="note" role="note">This definition is the <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate④">speculative load candidate</a> version of <a data-link-type="dfn" href="prefetch.html#has-a-matching-prefetch-record" id="ref-for-has-a-matching-prefetch-record">has a matching prefetch record</a>.</p>
   </div>
   <div class="algorithm" data-algorithm="continues" data-algorithm-for="prefetch candidate">
     A <a data-link-type="dfn" href="#prefetch-candidate" id="ref-for-prefetch-candidate">prefetch candidate</a> <var>prefetchCandidate</var> <dfn class="dfn-paneled" data-dfn-for="prefetch candidate" data-dfn-type="dfn" data-noexport id="prefetch-candidate-continues">continues</dfn> a <a data-link-type="dfn" href="prefetch.html#prefetch-record" id="ref-for-prefetch-record">prefetch record</a> <var>prefetchRecord</var> if the following are all true: 
    <ul>
     <li data-md>
      <p><var>prefetchRecord</var>’s <a data-link-type="dfn" href="prefetch.html#prefetch-record-label" id="ref-for-prefetch-record-label">label</a> is "<code>speculation-rules</code>"</p>
     <li data-md>
      <p><var>prefetchRecord</var>’s <a data-link-type="dfn" href="prefetch.html#prefetch-record-state" id="ref-for-prefetch-record-state">state</a> is not "<code>canceled</code>"</p>
     <li data-md>
      <p><var>prefetchRecord</var> <a data-link-type="dfn" href="prefetch.html#prefetch-record-matches-a-url" id="ref-for-prefetch-record-matches-a-url">matches a URL</a> given <var>prefetchCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url②">URL</a></p>
     <li data-md>
      <p><var>prefetchRecord</var>’s <a data-link-type="dfn" href="prefetch.html#prefetch-record-anonymization-policy" id="ref-for-prefetch-record-anonymization-policy">anonymization policy</a> equals <var>prefetchCandidate</var>’s <a data-link-type="dfn" href="#prefetch-candidate-anonymization-policy" id="ref-for-prefetch-candidate-anonymization-policy">anonymization policy</a></p>
    </ul>
   </div>
   <div class="algorithm" data-algorithm="find matching links">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="find-matching-links">find matching links</dfn> given a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> <var>document</var> and <a data-link-type="dfn" href="#document-rule-predicate" id="ref-for-document-rule-predicate④">document rule predicate</a> <var>predicate</var>: 
    <ol>
     <li data-md>
      <p>Let <var>links</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②①">list</a>.</p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-descendant" id="ref-for-concept-shadow-including-descendant">shadow-including descendant</a> <var>descendant</var> of <var>document</var>, in <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" id="ref-for-concept-shadow-including-tree-order">shadow-including tree order</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>descendant</var> is not an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element">a</a></code> with an <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" id="ref-for-attr-hyperlink-href">href</a></code> attribute or <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element" id="ref-for-the-area-element">area</a></code> element with an <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" id="ref-for-attr-hyperlink-href①">href</a></code> attribute, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①①">continue</a>.</p>
        <div class="note" role="note">This corresponds to the elements which match <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#any-link-pseudo" id="ref-for-any-link-pseudo">:any-link</a> <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#pseudo-class" id="ref-for-pseudo-class">pseudo-class</a>, or which appear in the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#dom-document-links" id="ref-for-dom-document-links">links</a></code> collection.</div>
       <li data-md>
        <p>If <var>descendant</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/rendering.html#being-rendered" id="ref-for-being-rendered">being rendered</a> or is part of <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#skips-its-contents" id="ref-for-skips-its-contents">skipped contents</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①②">continue</a>.</p>
        <div class="note" role="note">Such links, though present in the document, aren’t available for the user to interact with and are unlikely to be good candidates. In addition, they might not have their style or layout computed, which might make CSS selector matching less efficient in user agents which skip some or all of that work for these elements.</div>
       <li data-md>
        <p>Let <var>url</var> be <var>descendant</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#concept-hyperlink-url" id="ref-for-concept-hyperlink-url">url</a>.</p>
       <li data-md>
        <p>If <var>url</var> is null, or its <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme①">scheme</a> is not an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-scheme" id="ref-for-http-scheme①">HTTP(S) scheme</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①③">continue</a>.</p>
       <li data-md>
        <p>If <var>predicate</var> <a data-link-type="dfn" href="#document-rule-predicate-matches" id="ref-for-document-rule-predicate-matches">matches</a> <var>descendant</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑨">append</a> <var>descendant</var> to <var>links</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>links</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="compute a speculative action referrer policy">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compute-a-speculative-action-referrer-policy">compute a speculative action referrer policy</dfn> given a <a data-link-type="dfn" href="#speculation-rule" id="ref-for-speculation-rule④">speculation rule</a> <var>rule</var> and an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element①">a</a></code> element, an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element" id="ref-for-the-area-element①">area</a></code> element, or null <var>link</var>: 
    <ol>
     <li data-md>
      <p>If <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-referrer-policy" id="ref-for-speculation-rule-referrer-policy①">referrer policy</a> is not the empty string, then return <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-referrer-policy" id="ref-for-speculation-rule-referrer-policy②">referrer policy</a>.</p>
     <li data-md>
      <p>If <var>link</var> is null, then return the empty string.</p>
     <li data-md>
      <p>If <var>link</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-rel" id="ref-for-attr-hyperlink-rel">rel</a></code> attribute includes the <code><a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/links.html#link-type-noreferrer" id="ref-for-link-type-noreferrer">noreferrer</a></code> keyword, then return "<code>no-referrer</code>".</p>
     <li data-md>
      <p>Otherwise, return the current state of <var>link</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-referrerpolicy" id="ref-for-attr-hyperlink-referrerpolicy">referrerpolicy</a></code> content attribute.</p>
      <p class="note" role="note">The <a data-link-type="dfn" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy" id="ref-for-referrer-policy③">referrer policy</a> computed based on <var>link</var> is intended to be equivalent to the referrer policy computation in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2" id="ref-for-following-hyperlinks-2">following a hyperlink</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="consider speculation">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="consider-speculation">consider speculation</dfn> for a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①⓪">document</a> <var>document</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#await-a-stable-state" id="ref-for-await-a-stable-state">Await a stable state</a>. Steps in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#synchronous-section" id="ref-for-synchronous-section">synchronous section</a> are marked with ⌛.</p>
     <li data-md>
      <p>⌛ If <var>document</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, then return.</p>
      <p class="issue" id="issue-30bcda38"><a class="self-link" href="#issue-30bcda38"></a>It’s likely that we should also handle prerendered and back-forward cached documents. </p>
     <li data-md>
      <p>⌛ Let <var>prefetchCandidates</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②②">list</a>.</p>
     <li data-md>
      <p>⌛ Let <var>prerenderCandidates</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②③">list</a>.</p>
     <li data-md>
      <p>⌛ For each <var>ruleSet</var> of <var>document</var>’s <a data-link-type="dfn" href="#document-list-of-speculation-rule-sets" id="ref-for-document-list-of-speculation-rule-sets④">list of speculation rule sets</a>:</p>
      <ol>
       <li data-md>
        <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate⑨">For each</a> <var>rule</var> of <var>ruleSet</var>’s <a data-link-type="dfn" href="#speculation-rule-set-prefetch-rules" id="ref-for-speculation-rule-set-prefetch-rules①">prefetch rules</a>:</p>
        <ol>
         <li data-md>
          <p>⌛ Let <var>anonymizationPolicy</var> be null.</p>
         <li data-md>
          <p>⌛ If <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-requirements" id="ref-for-speculation-rule-requirements②">requirements</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain②">contains</a> "<code>anonymous-client-ip-when-cross-origin</code>", set <var>anonymizationPolicy</var> to a <a data-link-type="dfn" href="prefetch.html#cross-origin-prefetch-ip-anonymization-policy" id="ref-for-cross-origin-prefetch-ip-anonymization-policy">cross-origin prefetch IP anonymization policy</a> whose <a data-link-type="dfn" href="prefetch.html#cross-origin-prefetch-ip-anonymization-policy-origin" id="ref-for-cross-origin-prefetch-ip-anonymization-policy-origin">origin</a> is <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a>.</p>
         <li data-md>
          <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⓪">For each</a> <var>url</var> of <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-urls" id="ref-for-speculation-rule-urls①">URLs</a>:</p>
          <ol>
           <li data-md>
            <p>⌛ Let <var>referrerPolicy</var> be the result of <a data-link-type="dfn" href="#compute-a-speculative-action-referrer-policy" id="ref-for-compute-a-speculative-action-referrer-policy">computing a speculative action referrer policy</a> given <var>rule</var> and null.</p>
           <li data-md>
            <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①⓪">Append</a> a <a data-link-type="dfn" href="#prefetch-candidate" id="ref-for-prefetch-candidate①">prefetch candidate</a> with</p>
            <dl class="props">
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-tags" id="ref-for-speculative-load-candidate-tags">tags</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-tags" id="ref-for-speculation-rule-tags①">tags</a></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url③">URL</a>
             <dd data-md>
              <p><var>url</var></p>
             <dt data-md><a data-link-type="dfn" href="#prefetch-candidate-anonymization-policy" id="ref-for-prefetch-candidate-anonymization-policy①">anonymization policy</a>
             <dd data-md>
              <p><var>anonymizationPolicy</var></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-referrer-policy" id="ref-for-speculative-load-candidate-referrer-policy">referrer policy</a>
             <dd data-md>
              <p><var>referrerPolicy</var></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness">eagerness</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-eagerness" id="ref-for-speculation-rule-eagerness①">eagerness</a></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint③">No-Vary-Search hint</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-no-vary-search-hint" id="ref-for-speculation-rule-no-vary-search-hint①">No-Vary-Search hint</a></p>
            </dl>
            <p>to <var>prefetchCandidates</var>.</p>
          </ol>
         <li data-md>
          <p>⌛ If <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-predicate" id="ref-for-speculation-rule-predicate①">predicate</a> is not null, then:</p>
          <ol>
           <li data-md>
            <p>⌛ Let <var>links</var> be the result of <a data-link-type="dfn" href="#find-matching-links" id="ref-for-find-matching-links">finding matching links</a> given <var>document</var> and <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-predicate" id="ref-for-speculation-rule-predicate②">predicate</a>.</p>
           <li data-md>
            <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①①">For each</a> <var>link</var> of <var>links</var>:</p>
            <ol>
             <li data-md>
              <p>⌛ Let <var>url</var> be <var>link</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#concept-hyperlink-url" id="ref-for-concept-hyperlink-url①">url</a>.</p>
             <li data-md>
              <p>⌛ Let <var>referrerPolicy</var> be the result of <a data-link-type="dfn" href="#compute-a-speculative-action-referrer-policy" id="ref-for-compute-a-speculative-action-referrer-policy①">computing a speculative action referrer policy</a> given <var>rule</var> and <var>link</var>.</p>
             <li data-md>
              <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①①">Append</a> a <a data-link-type="dfn" href="#prefetch-candidate" id="ref-for-prefetch-candidate②">prefetch candidate</a> with</p>
              <dl class="props">
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-tags" id="ref-for-speculative-load-candidate-tags①">tags</a>
               <dd data-md>
                <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-tags" id="ref-for-speculation-rule-tags②">tags</a></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url④">URL</a>
               <dd data-md>
                <p><var>url</var></p>
               <dt data-md><a data-link-type="dfn" href="#prefetch-candidate-anonymization-policy" id="ref-for-prefetch-candidate-anonymization-policy②">anonymization policy</a>
               <dd data-md>
                <p><var>anonymizationPolicy</var></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-referrer-policy" id="ref-for-speculative-load-candidate-referrer-policy①">referrer policy</a>
               <dd data-md>
                <p><var>referrerPolicy</var></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness①">eagerness</a>
               <dd data-md>
                <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-eagerness" id="ref-for-speculation-rule-eagerness②">eagerness</a></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint④">No-Vary-Search hint</a>
               <dd data-md>
                <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-no-vary-search-hint" id="ref-for-speculation-rule-no-vary-search-hint②">No-Vary-Search hint</a></p>
              </dl>
              <p>to <var>prefetchCandidates</var>.</p>
            </ol>
          </ol>
        </ol>
       <li data-md>
        <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①②">For each</a> <var>rule</var> of <var>ruleSet</var>’s <a data-link-type="dfn" href="#speculation-rule-set-prerender-rules" id="ref-for-speculation-rule-set-prerender-rules①">prerender rules</a>:</p>
        <ol>
         <li data-md>
          <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①③">For each</a> <var>url</var> of <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-urls" id="ref-for-speculation-rule-urls②">URLs</a>:</p>
          <ol>
           <li data-md>
            <p>⌛ Let <var>referrerPolicy</var> be the result of <a data-link-type="dfn" href="#compute-a-speculative-action-referrer-policy" id="ref-for-compute-a-speculative-action-referrer-policy②">computing a speculative action referrer policy</a> given <var>rule</var> and null.</p>
           <li data-md>
            <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①②">Append</a> a <a data-link-type="dfn" href="#prerender-candidate" id="ref-for-prerender-candidate">prerender candidate</a> with</p>
            <dl class="props">
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-tags" id="ref-for-speculative-load-candidate-tags②">tags</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-tags" id="ref-for-speculation-rule-tags③">tags</a></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url⑤">URL</a>
             <dd data-md>
              <p><var>url</var></p>
             <dt data-md><a data-link-type="dfn" href="#prerender-candidate-target-navigable-name-hint" id="ref-for-prerender-candidate-target-navigable-name-hint">target navigable name hint</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-target-navigable-name-hint" id="ref-for-speculation-rule-target-navigable-name-hint②">target navigable name hint</a></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-referrer-policy" id="ref-for-speculative-load-candidate-referrer-policy②">referrer policy</a>
             <dd data-md>
              <p><var>referrerPolicy</var></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness②">eagerness</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-eagerness" id="ref-for-speculation-rule-eagerness③">eagerness</a></p>
             <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint⑤">No-Vary-Search hint</a>
             <dd data-md>
              <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-no-vary-search-hint" id="ref-for-speculation-rule-no-vary-search-hint③">No-Vary-Search hint</a></p>
            </dl>
            <p>to <var>prerenderCandidates</var>.</p>
          </ol>
         <li data-md>
          <p>⌛ If <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-predicate" id="ref-for-speculation-rule-predicate③">predicate</a> is not null, then:</p>
          <ol>
           <li data-md>
            <p>⌛ Let <var>links</var> be the result of <a data-link-type="dfn" href="#find-matching-links" id="ref-for-find-matching-links①">finding matching links</a> given <var>document</var> and <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-predicate" id="ref-for-speculation-rule-predicate④">predicate</a>.</p>
           <li data-md>
            <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①④">For each</a> <var>link</var> of <var>links</var>:</p>
            <ol>
             <li data-md>
              <p>⌛ Let <var>url</var> be the <var>link</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#concept-hyperlink-url" id="ref-for-concept-hyperlink-url②">url</a>.</p>
             <li data-md>
              <p>⌛ Let <var>target</var> be <var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-target-navigable-name-hint" id="ref-for-speculation-rule-target-navigable-name-hint③">target navigable name hint</a>.</p>
             <li data-md>
              <p>⌛ If <var>target</var> is null, set it to the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#get-an-element&apos;s-target" id="ref-for-get-an-element&apos;s-target">getting an element’s target</a> given <var>link</var>.</p>
             <li data-md>
              <p>⌛ Let <var>referrerPolicy</var> be the result of <a data-link-type="dfn" href="#compute-a-speculative-action-referrer-policy" id="ref-for-compute-a-speculative-action-referrer-policy③">computing a speculative action referrer policy</a> given <var>rule</var> and <var>link</var>.</p>
             <li data-md>
              <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①③">Append</a> a <a data-link-type="dfn" href="#prerender-candidate" id="ref-for-prerender-candidate①">prerender candidate</a> with</p>
              <dl class="props">
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-tags" id="ref-for-speculative-load-candidate-tags③">tags</a>
               <dd data-md>
                <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-tags" id="ref-for-speculation-rule-tags④">tags</a></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url⑥">URL</a>
               <dd data-md>
                <p><var>url</var></p>
               <dt data-md><a data-link-type="dfn" href="#prerender-candidate-target-navigable-name-hint" id="ref-for-prerender-candidate-target-navigable-name-hint①">target navigable name hint</a>
               <dd data-md>
                <p><var>target</var></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-referrer-policy" id="ref-for-speculative-load-candidate-referrer-policy③">referrer policy</a>
               <dd data-md>
                <p><var>referrerPolicy</var></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness③">eagerness</a>
               <dd data-md>
                <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-eagerness" id="ref-for-speculation-rule-eagerness④">eagerness</a></p>
               <dt data-md><a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint⑥">No-Vary-Search hint</a>
               <dd data-md>
                <p><var>rule</var>’s <a data-link-type="dfn" href="#speculation-rule-no-vary-search-hint" id="ref-for-speculation-rule-no-vary-search-hint④">No-Vary-Search hint</a></p>
              </dl>
              <p>to <var>prerenderCandidates</var>.</p>
            </ol>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⑤">For each</a> <var>prefetchRecord</var> of <var>document</var>’s <a data-link-type="dfn" href="prefetch.html#document-prefetch-records" id="ref-for-document-prefetch-records">prefetch records</a>:</p>
      <ol>
       <li data-md>
        <p>⌛ If <var>prefetchRecord</var>’s <a data-link-type="dfn" href="prefetch.html#prefetch-record-label" id="ref-for-prefetch-record-label①">label</a> is not "<code>speculation-rules</code>", then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①④">continue</a>.</p>
       <li data-md>
        <p>⌛ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑤">Assert</a>: <var>prefetchRecord</var>’s <a data-link-type="dfn" href="prefetch.html#prefetch-record-state" id="ref-for-prefetch-record-state①">state</a> is not "<code>canceled</code>".</p>
       <li data-md>
        <p>⌛ If no element of <var>prefetchCandidates</var> <a data-link-type="dfn" href="#prefetch-candidate-continues" id="ref-for-prefetch-candidate-continues">continues</a> <var>prefetchRecord</var>, then <a data-link-type="dfn" href="prefetch.html#prefetch-record-cancel-and-discard" id="ref-for-prefetch-record-cancel-and-discard">cancel and discard</a> <var>prefetchRecord</var> given <var>document</var>.</p>
      </ol>
     <li data-md>
      <p>End the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#synchronous-section" id="ref-for-synchronous-section①">synchronous section</a>, continuing the remaining steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⑥">For each</a> <var>prefetchCandidate</var> of <var>prefetchCandidates</var>:</p>
      <ol>
       <li data-md>
        <p>The user agent may run the following steps:</p>
        <ol>
         <li data-md>
          <p>Let <var>prefetchAndPrerenderCandidates</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②④">list</a>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-extend" id="ref-for-list-extend">Extend</a> <var>prefetchAndPrerenderCandidates</var> with <var>prefetchCandidates</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-extend" id="ref-for-list-extend①">Extend</a> <var>prefetchAndPrerenderCandidates</var> with <var>prerenderCandidates</var>.</p>
         <li data-md>
          <p>Let <var>tagsToSend</var> be the result of <a data-link-type="dfn" href="#collect-tags-for-matching-speculative-load-candidates" id="ref-for-collect-tags-for-matching-speculative-load-candidates">collecting tags for matching speculative load candidates</a> given <var>prefetchCandidate</var> and <var>prefetchAndPrerenderCandidates</var>.</p>
         <li data-md>
          <p>Let <var>prefetchRecord</var> be a new <a data-link-type="dfn" href="prefetch.html#prefetch-record" id="ref-for-prefetch-record①">prefetch record</a> with</p>
          <dl class="props">
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-tags" id="ref-for-prefetch-record-tags">tags</a>
           <dd data-md>
            <p><var>tagsToSend</var></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-url" id="ref-for-prefetch-record-url">URL</a>
           <dd data-md>
            <p><var>prefetchCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url⑦">URL</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-anonymization-policy" id="ref-for-prefetch-record-anonymization-policy①">anonymization policy</a>
           <dd data-md>
            <p><var>prefetchCandidate</var>’s <a data-link-type="dfn" href="#prefetch-candidate-anonymization-policy" id="ref-for-prefetch-candidate-anonymization-policy③">anonymization policy</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-referrer-policy" id="ref-for-prefetch-record-referrer-policy">referrer policy</a>
           <dd data-md>
            <p><var>prefetchCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-referrer-policy" id="ref-for-speculative-load-candidate-referrer-policy④">referrer policy</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-no-vary-search-hint" id="ref-for-prefetch-record-no-vary-search-hint">No-Vary-Search hint</a>
           <dd data-md>
            <p><var>prefetchCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint⑦">No-Vary-Search hint</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-label" id="ref-for-prefetch-record-label②">label</a>
           <dd data-md>
            <p>"<code>speculation-rules</code>"</p>
          </dl>
         <li data-md>
          <p><a data-link-type="dfn" href="prefetch.html#prefetch" id="ref-for-prefetch">Prefetch</a> given <var>document</var> and <var>prefetchRecord</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⑦">For each</a> <var>prerenderCandidate</var> of <var>prerenderCandidates</var>:</p>
      <ol>
       <li data-md>
        <p>The user agent may run the following steps:</p>
        <ol>
         <li data-md>
          <p>Let <var>tagsToSend</var> be the result of <a data-link-type="dfn" href="#collect-tags-for-matching-speculative-load-candidates" id="ref-for-collect-tags-for-matching-speculative-load-candidates①">collecting tags for matching speculative load candidates</a> given <var>prerenderCandidate</var> and <var>prerenderCandidates</var>.</p>
         <li data-md>
          <p>Let <var>prefetchRecord</var> be a new <a data-link-type="dfn" href="prefetch.html#prefetch-record" id="ref-for-prefetch-record②">prefetch record</a> with</p>
          <dl class="props">
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-tags" id="ref-for-prefetch-record-tags①">tags</a>
           <dd data-md>
            <p><var>tagsToSend</var></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-url" id="ref-for-prefetch-record-url①">URL</a>
           <dd data-md>
            <p><var>prerenderCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url⑧">URL</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-anonymization-policy" id="ref-for-prefetch-record-anonymization-policy②">anonymization policy</a>
           <dd data-md>
            <p>null</p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-referrer-policy" id="ref-for-prefetch-record-referrer-policy①">referrer policy</a>
           <dd data-md>
            <p><var>prerenderCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-referrer-policy" id="ref-for-speculative-load-candidate-referrer-policy⑤">referrer policy</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-no-vary-search-hint" id="ref-for-prefetch-record-no-vary-search-hint①">No-Vary-Search hint</a>
           <dd data-md>
            <p><var>prerenderCandidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint⑧">No-Vary-Search hint</a></p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-label" id="ref-for-prefetch-record-label③">label</a>
           <dd data-md>
            <p>"<code>speculation-rules</code>"</p>
           <dt data-md><a data-link-type="dfn" href="prefetch.html#prefetch-record-prerendering-traversable" id="ref-for-prefetch-record-prerendering-traversable">prerendering traversable</a>
           <dd data-md>
            <p>"<code>to be created</code>"</p>
          </dl>
         <li data-md>
          <p><a data-link-type="dfn" href="prerendering.html#start-referrer-initiated-prerendering" id="ref-for-start-referrer-initiated-prerendering">Start referrer-initiated prerendering</a> given <var>document</var> and <var>prefetchRecord</var>.</p>
          <p>The user agent can use <var>prerenderCandidate</var>’s <a data-link-type="dfn" href="#prerender-candidate-target-navigable-name-hint" id="ref-for-prerender-candidate-target-navigable-name-hint②">target navigable name hint</a> as a hint to their implementation of the <a data-link-type="dfn" href="prerendering.html#start-referrer-initiated-prerendering" id="ref-for-start-referrer-initiated-prerendering①">start referrer-initiated prerendering</a> algorithm. This hint indicates that the web developer expects the eventual <a data-link-type="dfn" href="prerendering.html#prerendering-traversable-activate" id="ref-for-prerendering-traversable-activate">activation</a> of the created <a data-link-type="dfn" href="prerendering.html#prerendering-traversable" id="ref-for-prerendering-traversable">prerendering traversable</a> to be in place of a particular predecessor traversable: the one that would be chosen by the invoking the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable" id="ref-for-the-rules-for-choosing-a-navigable">rules for choosing a navigable</a> given <var>prerenderCandidate</var>’s <a data-link-type="dfn" href="#prerender-candidate-target-navigable-name-hint" id="ref-for-prerender-candidate-target-navigable-name-hint③">target navigable name hint</a> and <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable">node navigable</a>.</p>
          <p class="note" role="note">This is just a hint. The <a data-link-type="dfn" href="#speculation-rule-target-navigable-name-hint" id="ref-for-speculation-rule-target-navigable-name-hint④">target navigable name hint</a> actually has no normative implications, after being parsed. It is still perfectly fine to <a data-link-type="dfn" href="prerendering.html#prerendering-traversable-activate" id="ref-for-prerendering-traversable-activate①">activate</a> in place of a different predecessor traversable that was not hinted at. </p>
        </ol>
      </ol>
    </ol>
    <p>When deciding whether to execute the "may" steps above that enact from among <var>prefetchCandidates</var> and <var>prerenderCandidates</var>, user agents should consider their <a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness④">eagerness</a>, in accordance with the following:</p>
    <dl>
     <dt data-md>"<code>immediate</code>"
     <dd data-md>
      <p>The author believes this is very likely to be worthwhile, and might also expect it to require significant lead time to complete. User agents should usually enact the candidate as soon as practical, subject only to considerations such as user preferences, device conditions, and resource limits.</p>
     <dt data-md>"<code>eager</code>"
     <dd data-md>
      <p>User agents should enact the candidate on even a slight suggestion that the user may navigate to this URL in the future. For instance, the user might have moved the cursor toward a link or hovered it, even momentarily, or paused scrolling when the link is one of the more prominent ones in the viewport. The author is seeking to capture as many navigations as possible, as early as possible.</p>
     <dt data-md>"<code>moderate</code>"
     <dd data-md>
      <p>User agents should enact the candidate if user behavior suggests the user may navigate to this URL in the near future. For instance, the user might have scrolled a link into the viewport and moved the cursor over it for some time. The author is seeking a balance between "<code>eager</code>" and "<code>conservative</code>".</p>
     <dt data-md>"<code>conservative</code>"
     <dd data-md>
      <p>User agents should enact the candidate only when the user is very likely to navigate to this URL at any moment. For instance, the user might have begun to interact with a link. The author is seeking to capture some of the benefits of speculative loading with a fairly small tradeoff of resources.</p>
    </dl>
    <p>If a user agent chooses to enact a candidate <var>A</var>, then the user agent should also enact other candidates which are <a data-link-type="dfn" href="#speculative-load-candidate-redundant-with" id="ref-for-speculative-load-candidate-redundant-with">redundant with</a> <var>A</var> and whose <a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness⑤">eagerness</a> is <a data-link-type="dfn" href="#at-least-as-eager" id="ref-for-at-least-as-eager">at least as eager</a> as <var>A</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness⑥">eagerness</a>. The first-encountered candidate will win, and the others will be ignored by the <a data-link-type="dfn" href="prefetch.html#prefetch" id="ref-for-prefetch①">prefetch</a> or <a data-link-type="dfn" href="prerendering.html#start-referrer-initiated-prerendering" id="ref-for-start-referrer-initiated-prerendering②">prerender</a> algorithms. This gives deterministic behavior for authors.</p>
    <div class="example" id="example-multiple-matching-rules">
     <a class="self-link" href="#example-multiple-matching-rules"></a> 
     <p>The following speculation rules generate two <a data-link-type="dfn" href="#speculative-load-candidate-redundant-with" id="ref-for-speculative-load-candidate-redundant-with①">redundant</a> candidates: </p>
<pre class="highlight"><c- p>{</c->
  <c- f>"prefetch"</c-><c- p>:</c-> <c- p>[</c->
    <c- p>{</c->
      <c- f>"tag"</c-><c- p>:</c-> <c- u>"a"</c-><c- p>,</c->
      <c- f>"urls"</c-><c- p>:</c-> <c- p>[</c-><c- u>"next.html"</c-><c- p>]</c->
    <c- p>},</c->
    <c- p>{</c->
      <c- f>"tag"</c-><c- p>:</c-> <c- u>"b"</c-><c- p>,</c->
      <c- f>"urls"</c-><c- p>:</c-> <c- p>[</c-><c- u>"next.html"</c-><c- p>],</c->
      <c- f>"referrer_policy"</c-><c- p>:</c-> <c- u>"no-referrer"</c->
    <c- p>}</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
     <p>A user agent which follows the above algorithm will enact both candidates. The second call to the <a data-link-type="dfn" href="prefetch.html#prefetch" id="ref-for-prefetch②">prefetch</a> algorithm will end up doing nothing, and so the request will be made with the default referrer policy, instead of using <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer" id="ref-for-referrer-policy-no-referrer">"no-referrer"</a></code>. </p>
     <p>However, the <a data-link-type="dfn" href="#collect-tags-for-matching-speculative-load-candidates" id="ref-for-collect-tags-for-matching-speculative-load-candidates②">collect tags for matching speculative load candidates</a> algorithm will collect tags from both candidates, so the `<code><a data-link-type="http-header" href="prefetch.html#sec-speculation-tags-header" id="ref-for-sec-speculation-tags-header">Sec-Speculation-Tags</a></code>` header will be set to <code>"a", "b"</code>. This indicates to server operators that either rule could have caused the speculative load. </p>
    </div>
    <p>Notwithstanding the above, user agents should prioritize user preferences (express and implied, such as a low-data-usage mode) over eagerness expressed by the author.</p>
    <p class="note" role="note">A user agent’s heuristics for enacting non-eager candidates could incorporate a <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint⑨">No-Vary-Search hint</a>. For example, a user hovering over a link whose URL and a candidate’s <a data-link-type="dfn" href="#speculative-load-candidate-url" id="ref-for-speculative-load-candidate-url⑨">URL</a> are <a data-link-type="dfn" href="https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-comparing" id="ref-for-name-comparing①">equivalent modulo search variance</a> given the candidate’s <a data-link-type="dfn" href="#speculative-load-candidate-no-vary-search-hint" id="ref-for-speculative-load-candidate-no-vary-search-hint①⓪">No-Vary-Search hint</a> could indicate to the user agent that enacting it would be useful.</p>
   </div>
   <p class="issue" id="issue-1cafd308"><a class="self-link" href="#issue-1cafd308"></a> We should also cancel speculated prerenders. </p>
   <div class="algorithm" data-algorithm="collect tags for matching speculative load candidates">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="collect-tags-for-matching-speculative-load-candidates">collect tags for matching speculative load candidates</dfn>, given a <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate⑤">speculative load candidate</a> <var>candidateUnderConsideration</var> and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②⑤">list</a> of <a data-link-type="dfn" href="#speculative-load-candidate" id="ref-for-speculative-load-candidate⑥">speculative load candidates</a> <var>allCandidates</var>: 
    <ol>
     <li data-md>
      <p>Let <var>tags</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑥">ordered set</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⑧">For each</a> <var>candidate</var> of <var>allCandidates</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>candidate</var> is not <a data-link-type="dfn" href="#speculative-load-candidate-redundant-with" id="ref-for-speculative-load-candidate-redundant-with②">redundant with</a> <var>candidateUnderConsideration</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①⑤">continue</a>.</p>
       <li data-md>
        <p>If <var>candidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness⑦">eagerness</a> is <a data-link-type="dfn" href="#less-eager" id="ref-for-less-eager①">less eager</a> than <var>candidateUnderConsideration</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-eagerness" id="ref-for-speculative-load-candidate-eagerness⑧">eagerness</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①⑥">continue</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①④">Append</a> <var>candidate</var>’s <a data-link-type="dfn" href="#speculative-load-candidate-tags" id="ref-for-speculative-load-candidate-tags④">tags</a> to <var>tags</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-sort-in-ascending-order" id="ref-for-list-sort-in-ascending-order">Sort in ascending order</a> <var>tags</var>, with <var>tagA</var> being less than <var>tagB</var> if <var>tagA</var> is null, or if <var>tagA</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit-less-than" id="ref-for-code-unit-less-than">code unit less than</a> <var>tagB</var>.</p>
     <li data-md>
      <p>Return <var>tags</var>.</p>
    </ol>
    <p class="note" role="note">The intuition here is that the tag for candidate <var>B</var> will be included in a speculative load triggered by candidate <var>A</var>, if and only if, were candidate <var>A</var> no longer present, <var>B</var> would trigger a speculative load that would be used in the same circumstances as <var>A</var>. </p>
   </div>
   <h3 class="heading settled" data-level="1.8" id="document-rule-predicate-matching"><span class="secno">1.8. </span><span class="content">Document rule predicate matching</span><a class="self-link" href="#document-rule-predicate-matching"></a></h3>
   <div class="algorithm" data-algorithm="matches" data-algorithm-for="document rule predicate">
     A <a data-link-type="dfn" href="#document-rule-predicate" id="ref-for-document-rule-predicate⑤">document rule predicate</a> <var>predicate</var> <dfn class="dfn-paneled" data-dfn-for="document rule predicate" data-dfn-type="dfn" data-noexport id="document-rule-predicate-matches">matches</dfn> an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code> <var>el</var> implementing the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/links.html#htmlhyperlinkelementutils" id="ref-for-htmlhyperlinkelementutils">HTMLHyperlinkElementUtils</a></code> mixin if the following steps return true: 
    <ol>
     <li data-md>
      <p>If <var>predicate</var> is a <a data-link-type="dfn" href="#document-rule-conjunction" id="ref-for-document-rule-conjunction③">document rule conjunction</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①⑨">For each</a> <var>clause</var> of <var>predicate</var>’s <a data-link-type="dfn" href="#document-rule-conjunction-clauses" id="ref-for-document-rule-conjunction-clauses②">clauses</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>clause</var> does not <a data-link-type="dfn" href="#document-rule-predicate-matches" id="ref-for-document-rule-predicate-matches①">match</a> <var>el</var>, return false.</p>
        </ol>
       <li data-md>
        <p>Return true.</p>
      </ol>
     <li data-md>
      <p>If <var>predicate</var> is a <a data-link-type="dfn" href="#document-rule-disjunction" id="ref-for-document-rule-disjunction②">document rule disjunction</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②⓪">For each</a> <var>clause</var> of <var>predicate</var>’s <a data-link-type="dfn" href="#document-rule-disjunction-clauses" id="ref-for-document-rule-disjunction-clauses①">clauses</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>clause</var> <a data-link-type="dfn" href="#document-rule-predicate-matches" id="ref-for-document-rule-predicate-matches②">matches</a> <var>el</var>, return true.</p>
        </ol>
       <li data-md>
        <p>Return false.</p>
      </ol>
     <li data-md>
      <p>If <var>predicate</var> is a <a data-link-type="dfn" href="#document-rule-negation" id="ref-for-document-rule-negation②">document rule negation</a>, then:</p>
      <ol>
       <li data-md>
        <p>If <var>predicate</var>’s <a data-link-type="dfn" href="#document-rule-negation-clause" id="ref-for-document-rule-negation-clause①">clause</a> <a data-link-type="dfn" href="#document-rule-predicate-matches" id="ref-for-document-rule-predicate-matches③">matches</a> <var>el</var>, return false.</p>
       <li data-md>
        <p>Return true.</p>
      </ol>
     <li data-md>
      <p>If <var>predicate</var> is a <a data-link-type="dfn" href="#document-rule-url-pattern-predicate" id="ref-for-document-rule-url-pattern-predicate②">document rule URL pattern predicate</a>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>href</var> be the result of running <var>el</var>’s <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/links.html#dom-hyperlink-href" id="ref-for-dom-hyperlink-href">href</a></code> getter steps.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②①">For each</a> <var>pattern</var> of <var>predicate</var>’s <a data-link-type="dfn" href="#document-rule-url-pattern-predicate-patterns" id="ref-for-document-rule-url-pattern-predicate-patterns①">patterns</a>:</p>
        <ol>
         <li data-md>
          <p>Perform a <a data-link-type="dfn" href="https://urlpattern.spec.whatwg.org/#url-pattern-match" id="ref-for-url-pattern-match">match</a> given <var>pattern</var> and <var>href</var>. If the result is not null, return true.</p>
        </ol>
       <li data-md>
        <p>Return false.</p>
      </ol>
     <li data-md>
      <p>If <var>predicate</var> is a <a data-link-type="dfn" href="#document-rule-css-selector-predicate" id="ref-for-document-rule-css-selector-predicate②">document rule CSS selector predicate</a>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②②">For each</a> <var>selector</var> of <var>predicate</var>’s <a data-link-type="dfn" href="#document-rule-css-selector-predicate-selectors" id="ref-for-document-rule-css-selector-predicate-selectors①">selectors</a>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#match-a-selector-against-an-element" id="ref-for-match-a-selector-against-an-element">Match</a> <var>selector</var> against <var>el</var> with the <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#scoping-root" id="ref-for-scoping-root">scoping root</a> set to <var>el</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root">root</a>. If the result is true, return true.</p>
          <p>During this step, user agents must apply the same privacy restrictions to the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#visited-pseudo" id="ref-for-visited-pseudo">:visited</a> pseudo-class as they would to other selector matching logic that could be observed by authors (e.g., <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-parentnode-queryselector" id="ref-for-dom-parentnode-queryselector">querySelector(selectors)</a></code>).</p>
          <div class="advisement"> This is important to prevent this from opening an avenue for attackers to gather information about a user’s browsing history, e.g., by using a selector such as <code>:root:has(.sensitive-site:visited) .report-sensitive-site</code>. See the <a href="#privacy-visited-links">Privacy Considerations</a> section. </div>
        </ol>
       <li data-md>
        <p>Return false.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑥">Assert</a>: This step is not reached.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="2" id="content-security-policy"><span class="secno">2. </span><span class="content">Content Security Policy</span><a class="self-link" href="#content-security-policy"></a></h2>
    Inline script use is restricted by <a data-link-type="biblio" href="#biblio-csp" title="Content Security Policy Level 3">[CSP]</a>, but there are cases where a developer doesn’t want to permit general inline scripts, but wants to permit inline speculation rules. So, we make the following change that extends <a data-link-type="biblio" href="#biblio-csp" title="Content Security Policy Level 3">[CSP]</a> to support a new source keyword for inline speculation rules. 
   <h3 class="heading settled" data-level="2.1" id="content-security-policy-patches-directives"><span class="secno">2.1. </span><span class="content">Directives</span><a class="self-link" href="#content-security-policy-patches-directives"></a></h3>
    In <a href="https://w3c.github.io/webappsec-csp/#framework-directives"><cite>Content Security Policy 3</cite> § 2.3 Directives</a>, we define several associated algorithms, and an <dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-inline-check">inline check</dfn> algorithm needs a patch to define how to choose the type argument. 
   <ol start="3">
    <li data-md>
     <p>An <dfn class="dfn-paneled" data-dfn-for="directive" data-dfn-type="dfn" data-noexport id="directive-inline-check">inline check</dfn>, which takes an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code>, a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="type"><code>type</code></dfn> string, a policy, and a source string as arguments,
  and is executed during <a href="https://w3c.github.io/webappsec-csp/#should-block-inline"><cite>Content Security Policy 3</cite> § 4.2.3 Should element’s inline type behavior be blocked by Content Security Policy?</a> and during <a href="https://w3c.github.io/webappsec-csp/#should-block-navigation-request"><cite>Content Security Policy 3</cite> § 4.2.4 Should navigation request of type be blocked by Content Security Policy?</a> for <code>javascript:</code> requests. This
  algorithm returns "<code>Allowed</code>" unless otherwise specified.</p>
     <ins>The <a data-link-type="dfn" href="#type" id="ref-for-type"><code>type</code></a> string is set to
  "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-script-speculationrules"><code>script speculationrules</code></dfn>"
  if the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code> is <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement" id="ref-for-htmlscriptelement">HTMLScriptElement</a></code> and the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-type" id="ref-for-dom-script-type">type</a></code> attribute is "<code>speculationrules</code>", or set to
  "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-script-attribute"><code>script attribute</code></dfn>" for
  JavaScript event handlers. Otherwise, it is set to
  "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-script"><code>script</code></dfn>".</ins>
   </ol>
   <h3 class="heading settled" data-level="2.2" id="content-security-policy-patches-source-lists"><span class="secno">2.2. </span><span class="content">Source Lists</span><a class="self-link" href="#content-security-policy-patches-source-lists"></a></h3>
    In <a href="https://w3c.github.io/webappsec-csp/#framework-directive-source-list"><cite>Content Security Policy 3</cite> § 2.3.1 Source Lists</a>, we change the following definition to have a new source, <code>inline-speculation-rules</code>. 
<pre><dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-keyword-source">keyword-source</dfn> = "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-self">'self'</dfn>" / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-unsafe-inline">'unsafe-inline'</dfn>" / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-unsafe-eval">'unsafe-eval'</dfn>"
  / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-strict-dynamic">'strict-dynamic'</dfn>" / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-unsafe-hashes">'unsafe-hashes'</dfn>"
  / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-report-sample">'report-sample'</dfn>" / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-unsafe-allow-redirects">'unsafe-allow-redirects'</dfn>"
  / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-wasm-unsafe-eval">'wasm-unsafe-eval'</dfn>"<ins> / "<dfn class="dfn-paneled" data-dfn-type="grammar" data-noexport id="grammardef-inline-speculation-rules">'inline-speculation-rules'</dfn>"</ins>
</pre>
   <h3 class="heading settled" data-level="2.3" id="content-security-policy-patches-should-block-inline"><span class="secno">2.3. </span><span class="content">Should element’s inline type behavior be blocked by Content Security Policy?</span><a class="self-link" href="#content-security-policy-patches-should-block-inline"></a></h3>
    Also, we make a following change for a note in <a href="https://w3c.github.io/webappsec-csp/#should-block-inline"><cite>Content Security Policy 3</cite> § 4.2.3 Should element’s inline type behavior be blocked by Content Security Policy?</a>. 
   <p class="note" role="note">
    <span class="marker">Note:</span> The valid values for <a data-link-type="dfn" href="#type" id="ref-for-type①"><code>type</code></a> are "<code>script</code>", "<code>script attribute</code>", 
    <ins>"<code>script speculationrules</code>", </ins>
    "<code>style</code>", and "<code>style attribute</code>".
   </p>
   <h3 class="heading settled" data-level="2.4" id="content-security-policy-patches-script-src"><span class="secno">2.4. </span><span class="content">script-src</span><a class="self-link" href="#content-security-policy-patches-script-src"></a></h3>
    Also we make the following change for <a href="https://w3c.github.io/webappsec-csp/#directive-script-src"><cite>Content Security Policy 3</cite> § 6.1.10 script-src</a>. 
   <ol start="3">
    <li data-md>
     <p>
      Inline <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script⑤">script</a></code> blocks MUST pass through <a href="https://w3c.github.io/webappsec-csp/#should-block-inline"><cite>Content Security Policy 3</cite> § 4.2.3 Should element’s inline type behavior be blocked by Content Security Policy?</a>. Their behavior will be blocked unless every policy allows inline script, either implicitly by not specifying a <code>script-src</code> (or <code>default-src</code>) directive, or explicitly, by specifying "<code>unsafe-inline</code>", a <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-nonce-source" id="ref-for-grammardef-nonce-source">nonce-source</a> or a <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-hash-source" id="ref-for-grammardef-hash-source">hash-source</a> that matches the inline block
      <ins>, or specifying "<code>inline-speculation-rules</code>" on the type attribute being "<code>speculationrules</code>"</ins>
      .
     </p>
   </ol>
   <h3 class="heading settled" data-level="2.5" id="content-security-policy-patches-allow-all-inline"><span class="secno">2.5. </span><span class="content">Does a source list allow all inline behavior for type?</span><a class="self-link" href="#content-security-policy-patches-allow-all-inline"></a></h3>
    The algorithm needs a patch to handle the "<code>script speculationrules</code>" type. 
   <ol start="2">
    <li data-md>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②③">For each</a> <var>expression</var> of list:</p>
     <ol>
      <li data-md>
       <p>If <var>expression</var> matches the <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-nonce-source" id="ref-for-grammardef-nonce-source①"><code>nonce-source</code></a> or <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-hash-source" id="ref-for-grammardef-hash-source①"><code>hash-source</code></a> grammar, return "<code>Does Not Allow</code>".</p>
      <li data-md>
       <p>If <a data-link-type="dfn" href="#type" id="ref-for-type②"><code>type</code></a> is "<code>script</code>", "<code>script attribute</code>" or "<code>navigation</code>"
  and <var>expression</var> matches the <a data-link-type="grammar" href="#grammardef-keyword-source" id="ref-for-grammardef-keyword-source">keyword-source</a> "<a data-link-type="grammar" href="#grammardef-strict-dynamic" id="ref-for-grammardef-strict-dynamic"><code>'strict-dynamic'</code></a>", return "<code>Does Not Allow</code>".</p>
       <p class="note" role="note"><span class="marker">Note:</span> <code>'strict-dynamic'</code> only applies to scripts, not other resource
  types. Usage is explained in more detail in <a href="https://w3c.github.io/webappsec-csp/#strict-dynamic-usage"><cite>Content Security Policy 3</cite> § 8.2 Usage of "'strict-dynamic'"</a>.</p>
      <li data-md>
       <ins>If <a data-link-type="dfn" href="#type" id="ref-for-type③"><code>type</code></a> is "<code>script speculationrules</code>" and <var>expression</var> matches the <a data-link-type="grammar" href="#grammardef-keyword-source" id="ref-for-grammardef-keyword-source①">keyword-source</a> "<a data-link-type="grammar" href="#grammardef-inline-speculation-rules" id="ref-for-grammardef-inline-speculation-rules"><code>'inline-speculation-rules'</code></a>",
  set <code>allow all inline</code> to <code>true</code>.</ins>
      <li data-md>
       <p>If <var>expression</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive②">ASCII case-insensitive</a> match for the <a data-link-type="grammar" href="#grammardef-keyword-source" id="ref-for-grammardef-keyword-source②"><code>keyword-source</code></a> "<a data-link-type="grammar" href="#grammardef-unsafe-inline" id="ref-for-grammardef-unsafe-inline"><code>'unsafe-inline'</code></a>",
  set <code>allow all inline</code> to <code>true</code>.</p>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="2.6" id="content-security-policy-patches-match-element-to-source-list"><span class="secno">2.6. </span><span class="content">Does element match source list for type and source?</span><a class="self-link" href="#content-security-policy-patches-match-element-to-source-list"></a></h3>
    The algorithm needs patches to handle the "<code>script speculationrules</code>" type at the step 2 and 5. 
   <ol start="2">
    <li data-md>
     <p>
      If <a data-link-type="dfn" href="#type" id="ref-for-type④"><code>type</code></a> is "<code>script</code>",
      <ins> "<code>script speculationrules</code>",</ins>
       or "<code>style</code>", and <a href="https://w3c.github.io/webappsec-csp/#is-element-nonceable"><cite>Content Security Policy 3</cite> § 6.7.3.1 Is element nonceable?</a> returns "<code>Nonceable</code>" when executed upon <var>element</var>:
     </p>
     <ol>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②④">For each</a> <var>expression</var> of <var>list</var>:</p>
       <ol>
        <li data-md>
         <p>If <var>expression</var> matches the <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-nonce-source" id="ref-for-grammardef-nonce-source②"><code>nonce-source</code></a> grammar,
  and <var>element</var> has a <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#attr-nonce" id="ref-for-attr-nonce">nonce</a></code> attribute whose value <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-is" id="ref-for-string-is">is</a> <var>expression</var>’s <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-base64-value" id="ref-for-grammardef-base64-value"><code>base64-value</code></a> part,
  return "<code>Matches</code>".</p>
       </ol>
     </ol>
     <p class="note" role="note"><span class="marker">Note:</span> Nonces only apply to inline <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script⑥">script</a></code> and inline <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-style-element" id="ref-for-the-style-element">style</a></code>, not to
  attributes of either element or to <code>javascript:</code> navigations.</p>
    <li data-md>
     <p>Let <var>unsafe-hashes flag</var> be <code>false</code>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②⑤">For each</a> <var>expression</var> of <var>list</var>:</p>
     <ol>
      <li data-md>
       <p>If <var>expression</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive③">ASCII case-insensitive</a> match for the <a data-link-type="grammar" href="#grammardef-keyword-source" id="ref-for-grammardef-keyword-source③"><code>keyword-source</code></a> "<a data-link-type="grammar" href="#grammardef-unsafe-hashes" id="ref-for-grammardef-unsafe-hashes"><code>'unsafe-hashes'</code></a>",
  set <var>unsafe-hashes flag</var> to <code>true</code>. Break out of the loop.</p>
     </ol>
    <li data-md>
     <p>
      If <a data-link-type="dfn" href="#type" id="ref-for-type⑤"><code>type</code></a> is "<code>script</code>",
      <ins> "<code>script speculationrules</code>",</ins>
       "<code>style</code>",
  or <var>unsafe-hashes flag</var> is <code>true</code>:
     </p>
   </ol>
   <h3 class="heading settled" data-level="2.7" id="content-security-policy-patches-effective-directive"><span class="secno">2.7. </span><span class="content">Get the effective directive for request</span><a class="self-link" href="#content-security-policy-patches-effective-directive"></a></h3>
   <p>In <a href="https://w3c.github.io/webappsec-csp/#effective-directive-for-a-request"><cite>Content Security Policy 3</cite> § 6.8.1 Get the effective directive for request</a>, the switch on the request <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination①">destination</a> needs one additional case.</p>
   <p class="note" role="note">At present, requests can only be issued in the case of the `<code><a data-link-type="http-header" href="#http-headerdef-speculation-rules" id="ref-for-http-headerdef-speculation-rules②">Speculation-Rules</a></code>` header, so CSP does not apply. If support is added for loading external rule sets via <code>&lt;script src></code>, for which CSP would apply, then the CSP directive selection will need to distinguish this case, such as by the introduction of a new request <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-initiator" id="ref-for-concept-request-initiator">initiator</a>.</p>
   <dl>
    <dt data-md>"<code>speculationrules</code>"
    <dd data-md>
     <ol>
      <li data-md>
       <p>Return null.</p>
     </ol>
   </dl>
   <h2 class="heading settled" data-level="3" id="fetch"><span class="secno">3. </span><span class="content">Fetch</span><a class="self-link" href="#fetch"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="fetch-destination"><span class="secno">3.1. </span><span class="content">Destination</span><a class="self-link" href="#fetch-destination"></a></h3>
   <p>The string "<code>speculationrules</code>" is added to the list of valid <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination②">destinations</a> and also to the list of enumerators in <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#requestdestination" id="ref-for-requestdestination">RequestDestination</a></code>.</p>
   <h2 class="heading settled" data-level="4" id="security-considerations"><span class="secno">4. </span><span class="content">Security considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="security-csrf"><span class="secno">4.1. </span><span class="content">Cross-site request forgery</span><a class="self-link" href="#security-csrf"></a></h3>
   <p>This specification allows documents to cause HTTP requests to be issued.</p>
   <p>When any supported action acts on a URL which is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a> to the document, then this does not constitute a risk of cross-site request forgery, since the request uses only the credentials available to the document.</p>
   <p>Otherwise, requests are always issued without using any previously existing <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#credentials" id="ref-for-credentials">credentials</a>. This limits the ambient authority available to any potentially forged request, and such requests can already be made through <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[FETCH]</a>, a subresource or frame, or various other means. Site operators are therefore already well-advised to use CSRF tokens or other mitigations for this threat.</p>
   <p>Because links in a document could be selected using a document rule, if the document may contain user-generated markup then authors should construct their speculation rules to exclude such links that may have harmful side effects, e.g., by using a <a data-link-type="dfn" href="#document-rule-css-selector-predicate" id="ref-for-document-rule-css-selector-predicate③">document rule CSS selector predicate</a> to exclude links in regions with user-generated links or by using a <a data-link-type="dfn" href="#document-rule-url-pattern-predicate" id="ref-for-document-rule-url-pattern-predicate③">document rule URL pattern predicate</a> to allow only URL patterns known to be safe to fetch without side effects.</p>
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-speculation-rules" id="ref-for-http-headerdef-speculation-rules③">Speculation-Rules</a></code>` header can also cause requests to be issued. These requests are unlikely to be useful in mounting a CSRF attack, because:</p>
   <ul>
    <li data-md>
     <p>These requests are sent with <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode" id="ref-for-concept-request-credentials-mode">credentials mode</a> "<code>same-origin</code>" (the default), so no stored credentials are included in the request, and such credentials are likely to be required to cause unwanted side effects.</p>
    <li data-md>
     <p>These requests are unlikely to be useful in inferring the contents of a non-speculation rules resource, because responses with the incorrect MIME type are not honored.</p>
    <li data-md>
     <p>These requests are unlikely to be useful in inferring the contents of a speculation rules resource, because they are sent with <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-mode" id="ref-for-concept-request-mode①">mode</a> "<code>cors</code>", and so cross-origin resources must explicitly opt in using `<code><a data-link-type="http-header" href="https://fetch.spec.whatwg.org/#http-access-control-allow-origin" id="ref-for-http-access-control-allow-origin">Access-Control-Allow-Origin</a></code>`.</p>
    <li data-md>
     <p>These requests are distinguishable from requests by other causes in the browser because a separate value, "<code>speculationrules</code>", is provided in the `<code><a data-link-type="http-header" href="https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-dest" id="ref-for-http-headerdef-sec-fetch-dest">Sec-Fetch-Dest</a></code>` request header.</p>
   </ul>
   <h3 class="heading settled" data-level="4.2" id="security-xss"><span class="secno">4.2. </span><span class="content">Cross-site scripting</span><a class="self-link" href="#security-xss"></a></h3>
   <p>This specification causes activity in response to content found in the document, so it is worth considering the options open to an attacker able to inject unescaped HTML.</p>
   <p>Such an attacker is otherwise able to inject JavaScript, frames or other elements. The activity possible with this specification (requesting fetches etc) is generally less dangerous than arbitrary script execution, and comparable to other elements. It would, however, make it possible to cause prefetches of links in the document, and the existence of those prefetches could provide a vector for exfiltrating information about those links.</p>
   <p>The same mitigations available to other features also apply here. In particular, the <a data-link-type="biblio" href="#biblio-csp" title="Content Security Policy Level 3">[CSP]</a> <code>script-src</code> directive applies to the parsing of the speculation rules and the <code>default-src</code> directive applies to prefetch requests arising from the rules.</p>
   <p>The possibility of leaking link URLs via this mechanism is additionally mitigated by the fact that prefetch and prerender to plaintext HTTP (other than to localhost) is not permitted, and so such an on-path attacker could not directly observe preloading request URLs, but would only have access to metadata and traffic analysis. This does not, however, replace standard XSS protections.</p>
   <p>It’s generally not expected that user-generated content will be added as arbitrary response headers; server operators are already going to encounter significant trouble if this is possible. It is therefore unlikely that the `<code><a data-link-type="http-header" href="#http-headerdef-speculation-rules" id="ref-for-http-headerdef-speculation-rules④">Speculation-Rules</a></code>` header meaningfully expands the XSS attack surface. Therefore, <a data-link-type="biblio" href="#biblio-csp" title="Content Security Policy Level 3">[CSP]</a> does not apply to the loading of rule sets via the header.</p>
   <h3 class="heading settled" data-level="4.3" id="type-confusion"><span class="secno">4.3. </span><span class="content">Type confusion</span><a class="self-link" href="#type-confusion"></a></h3>
   <p>In the case of speculation rules in an inline <code>&lt;script></code>, an application which erroneously parsed speculation rules as a JavaScript script (though user agents are instructed not to execute scripts who "<code>type</code>" is unrecognized) would either interpret it as the empty block <code>{}</code> or produce a syntax error, since the U+003A COLON (<code>:</code>) after the first key is invalid JavaScript. In neither case would such an application execute harmful behavior.</p>
   <p>Since the parsing behavior of the <code>&lt;script></code> element has long been part of HTML, any modern HTML parser would not construct any non-text children of the element. There is thus a low risk of other text hidden inside a <code>&lt;script></code> element with <code>type="speculationrules"</code> which is parsed as part of the script content by compliant HTML implementations but as HTML tags by others.</p>
   <p>Authors should, however, still escape any potentially attacker-controlled content inserted into speculation rules. In particular, it may be necessary to escape JSON syntax as well as, if the speculation rules are in an inline <code>&lt;script></code> tag, the closing <code>&lt;/script></code> tag. <a data-link-type="biblio" href="#biblio-csp" title="Content Security Policy Level 3">[CSP]</a> is a useful additional mitigation for vulnerabilities of this type.</p>
   <p>Similarly, processing non-speculation rules resources as speculation rules is unlikely because this specification requires implementations to validate that its MIME type has an <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence①">essence</a> of "<code>application/speculationrules+json"</code>.</p>
   <h3 class="heading settled" data-level="4.4" id="security-ip-anonymization"><span class="secno">4.4. </span><span class="content">IP anonymization</span><a class="self-link" href="#security-ip-anonymization"></a></h3>
   <p>This specification allows authors to request prefetch traffic using IP anonymization technology provided by the user agent. The details of this technology are not a part of this specification; nonetheless some general principles apply.</p>
   <p>To the extent IP anonymization is implemented using a proxy service, it is advisable to minimize the information available to the service operator and other entities on the network path. This likely involves, at a minimum, the use of <a data-link-type="biblio" href="#biblio-tls" title="The Transport Layer Security (TLS) Protocol Version 1.3">[TLS]</a> for the connection.</p>
   <p>Site operators should be aware that, similar to virtual private network (VPN) technology, the client IP address seen by the HTTP server may not exactly correspond to the user’s actual network provider or location, and a traffic for multiple distinct subscribers may originate from a single client IP address. This may affect site operators' security and abuse prevention measures. IP anonymization measures may make an effort to use an egress IP address which has a similar geolocation or is located in the same jurisdiction as the user, but any such behavior is particular to the user agent and not guaranteed by this specification.</p>
   <h3 class="heading settled" data-level="4.5" id="mixed-content"><span class="secno">4.5. </span><span class="content">Mixed content</span><a class="self-link" href="#mixed-content"></a></h3>
   <p>Speculation rules are either inline (so are delivered by the same origin as the document) or fetched via the `<code><a data-link-type="http-header" href="#http-headerdef-speculation-rules" id="ref-for-http-headerdef-speculation-rules⑤">Speculation-Rules</a></code>` header (in which case they are <a data-link-type="dfn" href="https://w3c.github.io/webappsec-mixed-content/#blockable-mixed-content" id="ref-for-blockable-mixed-content">blockable</a> as part of <a data-link-type="dfn" href="https://w3c.github.io/webappsec-mixed-content/#should-block-fetch" id="ref-for-should-block-fetch">should fetching request be blocked as mixed content?</a>).</p>
   <p>The speculative actions initiated by this specification may also have similar protections. For example, prefetching of URLs which are not <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url" id="ref-for-potentially-trustworthy-url">potentially trustworthy</a> is not permitted at all, even from environments which are not themselves <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context" id="ref-for-secure-context">secure contexts</a>.</p>
   <h2 class="heading settled" data-level="5" id="privacy-considerations"><span class="secno">5. </span><span class="content">Privacy considerations</span><a class="self-link" href="#privacy-considerations"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="privacy-heuristics"><span class="secno">5.1. </span><span class="content">Heuristics</span><a class="self-link" href="#privacy-heuristics"></a></h3>
   <p>Because the candidate prefetches and other actions are not required, the user agent can use heuristics to determine which actions would be best to execute. Because it may be observable to the document whether actions were executed, user agents must take care to protect privacy when making such decisions — for instance by only using information which is already available to the origin. If these heuristics depend on any persistent state, that state must be erased whenever the user erases other site data. If the user agent automatically clears other site data from time to time, it must erase such persistent state at the same time.</p>
   <div class="note" role="note"> The use of <em>origin</em> here instead of <em>site</em> here is intentional. Origins generally form the basis for the web’s security boundary. Though same-site origins are generally allowed to coordinate if they wish, origins are generally not allowed access to data from other origins, even same-site ones. </div>
   <p>Examples of inputs which would be already known to the document:</p>
   <ul>
    <li data-md>
     <p>author-supplied <a data-link-type="dfn" href="#speculation-rule-eagerness" id="ref-for-speculation-rule-eagerness⑤">eagerness</a></p>
    <li data-md>
     <p>order of appearance in the document</p>
    <li data-md>
     <p>whether the link is in the viewport</p>
    <li data-md>
     <p>whether the cursor is near the link</p>
    <li data-md>
     <p>rendered size of the link</p>
   </ul>
   <p>Examples of persistent data related to the origin (which the origin could have gathered itself) but which must be erased according to user intent:</p>
   <ul>
    <li data-md>
     <p>whether the user has clicked this or similar links on this document or other documents on the same origin</p>
   </ul>
   <p>Examples of device information which may be valuable in deciding whether prefetching is appropriate, but which must be considered as part of the user agent’s overall privacy posture because it may make the user more identifiable across origins:</p>
   <ul>
    <li data-md>
     <p>coarse device class (CPU, memory)</p>
    <li data-md>
     <p>coarse battery level</p>
    <li data-md>
     <p>whether the network connection is known to be metered</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="privacy-intent"><span class="secno">5.2. </span><span class="content">Intent</span><a class="self-link" href="#privacy-intent"></a></h3>
   <p>While efforts have been made to minimize the privacy impact of prefetching, some users may nonetheless prefer that prefetching not occur, even though this may make loading slower. User agents are encouraged to provide a setting to disable prefetching features to accommodate such users.</p>
   <h3 class="heading settled" data-level="5.3" id="privacy-partitioning"><span class="secno">5.3. </span><span class="content">Partitioning</span><a class="self-link" href="#privacy-partitioning"></a></h3>
   <p>Some user agents <a href="https://privacycg.github.io/storage-partitioning/">partition storage</a> according to the site or origin of the top-level document. In order for prefetching and prerendering to be useful, it is therefore essential that prefetching or prerendering of a document either occur in the partition in which the navigation would occur (e.g., for a same-site URL) or in an isolated partition, so as to ensure that prefetching does not become a mechanism for bypassing the partitioning scheme.</p>
   <p>The <a href="prefetch.html">prefetch specification</a> allows issuing HTTP requests which behave consistently with the partitioning scheme. If a navigation using its response would load a document in the same partition (approximately, the top-level site would not change), then partitioned state (e.g., cookies) can be sent, as they can with subresource requests and scripted fetches. If it would load a document in another partition, it would be inconsistent with the partitioning scheme to use partitioned state for the destination partition (since this would cross the boundary between partitions without a top-level navigation) and also inconsistent to use partitioned state within the originating partition (since this would result in the user seeing a document with different state than a non-prefetched navigation). Instead, a third, initially empty, partition is used for such requests. These requests therefore contain no partitioned state from either partition (though it may still be possible to fingerprint the user agent by other means).</p>
   <p>However, the response to a prefetch request in an empty partition can only be used if:</p>
   <ol>
    <li data-md>
     <p>the response declares that the resource can be used even if an ordinary navigation would have sent credentials; or</p>
    <li data-md>
     <p>the destination partition contains no credentials which would have been included</p>
   </ol>
   <p>Checking the latter requires examining the destination partition’s state. To avoid this being a workaround for the partitioning scheme, the prefetch must continue <em>even if the existence of conflicting partitioned state will preclude it being used for navigation</em>.</p>
   <p>Redirects are possible between these two types of requests. A redirect from a same- to cross-partition URL could contain information derived from partitioned state in the originating partition; however, this is equivalent to the originating document fetching the same-partition URL itself and then issuing a request for the cross-partition URL. A redirect from a cross- to same-origin URL could carry state from the isolated partition, but since this partition has no prior state this does not enable tracking based on the user’s prior browsing activity on that site, and the document could construct the same state by issuing uncredentialed requests itself.</p>
   <h3 class="heading settled" data-level="5.4" id="privacy-identity-joining"><span class="secno">5.4. </span><span class="content">Identity joining</span><a class="self-link" href="#privacy-identity-joining"></a></h3>
   <p>This specification describes a mechanism through which HTTP requests for later top-level navigation (in the case of prefetching) can be made without a user gesture. It is natural to ask whether it is possible for two coordinating sites to connect user identities.</p>
   <p>Since existing <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#credentials" id="ref-for-credentials①">credentials</a> for the destination origin are not sent (assuming it is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same origin</a> with the referrer), that site is limited in its ability to identify the user before navigation in a similar way to if the referrer site had simply used <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[FETCH]</a> to make an uncredentialed request. Upon navigation, this becomes similar to ordinary navigation (e.g., by clicking a link that was not prefetched).</p>
   <p>To the extent that user agents attempt to mitigate identity joining for ordinary fetches and navigations, they can apply similar mitigations to prefetched navigations.</p>
   <h3 class="heading settled" data-level="5.5" id="privacy-visited-links"><span class="secno">5.5. </span><span class="content">Visited links</span><a class="self-link" href="#privacy-visited-links"></a></h3>
   <p>It is imperative that the features in this specification do not allow sites to determine which other web sites a user has visited in the past.</p>
   <p>Because a <a data-link-type="dfn" href="#document-rule-css-selector-predicate" id="ref-for-document-rule-css-selector-predicate④">document rule CSS selector predicate</a> can use arbitrary CSS selectors, it is critical that browsers apply the same privacy mitigations (which may not be covered by a specification) to the <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/selectors-4/#visited-pseudo" id="ref-for-visited-pseudo①">:visited</a> pseudo-class as in other cases where it could be used by an attacker to extract information about the user’s browsing history. The <a data-link-type="dfn" href="#document-rule-predicate-matches" id="ref-for-document-rule-predicate-matches④">matching algorithm</a> requires this behavior. For more information, see <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Privacy_and_the_:visited_selector">Privacy and the :visited selector</a>.</p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#prefetch-candidate-anonymization-policy">anonymization policy</a><span>, in § 1.7</span>
   <li><a href="#at-least-as-eager">at least as eager</a><span>, in § 1.1</span>
   <li><a href="#pending-external-speculation-rule-resource-cancel-and-discard">cancel and discard</a><span>, in § 1.5</span>
   <li><a href="#document-rule-negation-clause">clause</a><span>, in § 1.1</span>
   <li>
    clauses
    <ul>
     <li><a href="#document-rule-conjunction-clauses">dfn for document rule conjunction</a><span>, in § 1.1</span>
     <li><a href="#document-rule-disjunction-clauses">dfn for document rule disjunction</a><span>, in § 1.1</span>
    </ul>
   <li><a href="#collect-tags-for-matching-speculative-load-candidates">collect tags for matching speculative load candidates</a><span>, in § 1.7</span>
   <li><a href="#compute-a-speculative-action-referrer-policy">compute a speculative action referrer policy</a><span>, in § 1.7</span>
   <li><a href="#consider-speculation">consider speculation</a><span>, in § 1.7</span>
   <li><a href="#prefetch-candidate-continues">continues</a><span>, in § 1.7</span>
   <li><a href="#pending-external-speculation-rule-resource-controller">controller</a><span>, in § 1.1</span>
   <li><a href="#document-rule-conjunction">document rule conjunction</a><span>, in § 1.1</span>
   <li><a href="#document-rule-css-selector-predicate">document rule CSS selector predicate</a><span>, in § 1.1</span>
   <li><a href="#document-rule-disjunction">document rule disjunction</a><span>, in § 1.1</span>
   <li><a href="#document-rule-negation">document rule negation</a><span>, in § 1.1</span>
   <li><a href="#document-rule-predicate">document rule predicate</a><span>, in § 1.1</span>
   <li><a href="#document-rule-url-pattern-predicate">document rule URL pattern predicate</a><span>, in § 1.1</span>
   <li>
    eagerness
    <ul>
     <li><a href="#speculation-rule-eagerness">dfn for speculation rule</a><span>, in § 1.1</span>
     <li><a href="#speculative-load-candidate-eagerness">dfn for speculative load candidate</a><span>, in § 1.7</span>
    </ul>
   <li><a href="#pending-external-speculation-rule-resource-fetch">fetch</a><span>, in § 1.5</span>
   <li><a href="#find-matching-links">find matching links</a><span>, in § 1.7</span>
   <li>
    inline check
    <ul>
     <li><a href="#grammardef-inline-check">(grammar)</a><span>, in § 2.1</span>
     <li><a href="#directive-inline-check">dfn for directive</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#grammardef-inline-speculation-rules">'inline-speculation-rules'</a><span>, in § 2.2</span>
   <li><a href="#grammardef-keyword-source">keyword-source</a><span>, in § 2.2</span>
   <li><a href="#less-eager">less eager</a><span>, in § 1.1</span>
   <li><a href="#document-list-of-pending-external-speculation-rule-resources">list of pending external speculation rule resources</a><span>, in § 1.7</span>
   <li><a href="#document-list-of-speculation-rule-sets">list of speculation rule sets</a><span>, in § 1.7</span>
   <li><a href="#document-rule-predicate-matches">matches</a><span>, in § 1.8</span>
   <li>
    No-Vary-Search hint
    <ul>
     <li><a href="#speculation-rule-no-vary-search-hint">dfn for speculation rule</a><span>, in § 1.1</span>
     <li><a href="#speculative-load-candidate-no-vary-search-hint">dfn for speculative load candidate</a><span>, in § 1.7</span>
    </ul>
   <li><a href="#parse-a-document-rule-predicate">parse a document rule predicate</a><span>, in § 1.6</span>
   <li><a href="#parse-a-speculation-rule">parse a speculation rule</a><span>, in § 1.6</span>
   <li><a href="#parse-speculation-rules">parse speculation rules</a><span>, in § 1.6</span>
   <li><a href="#document-rule-url-pattern-predicate-patterns">patterns</a><span>, in § 1.1</span>
   <li><a href="#pending-external-speculation-rule-resource">pending external speculation rule resource</a><span>, in § 1.1</span>
   <li><a href="#speculation-rule-predicate">predicate</a><span>, in § 1.1</span>
   <li><a href="#prefetch-candidate">prefetch candidate</a><span>, in § 1.7</span>
   <li><a href="#speculation-rule-set-prefetch-rules">prefetch rules</a><span>, in § 1.1</span>
   <li><a href="#prerender-candidate">prerender candidate</a><span>, in § 1.7</span>
   <li><a href="#speculation-rule-set-prerender-rules">prerender rules</a><span>, in § 1.1</span>
   <li><a href="#process-pending-external-speculation-rule-resources">process pending external speculation rule resources</a><span>, in § 1.5</span>
   <li><a href="#process-the-speculation-rules-header">process the Speculation-Rules header</a><span>, in § 1.4</span>
   <li><a href="#speculative-load-candidate-redundant-with">redundant with</a><span>, in § 1.7</span>
   <li>
    referrer policy
    <ul>
     <li><a href="#speculation-rule-referrer-policy">dfn for speculation rule</a><span>, in § 1.1</span>
     <li><a href="#speculative-load-candidate-referrer-policy">dfn for speculative load candidate</a><span>, in § 1.7</span>
    </ul>
   <li><a href="#grammardef-report-sample">'report-sample'</a><span>, in § 2.2</span>
   <li><a href="#speculation-rule-requirements">requirements</a><span>, in § 1.1</span>
   <li><a href="#grammardef-script">script</a><span>, in § 2.1</span>
   <li><a href="#grammardef-script-attribute">script attribute</a><span>, in § 2.1</span>
   <li><a href="#grammardef-script-speculationrules">script speculationrules</a><span>, in § 2.1</span>
   <li><a href="#document-rule-css-selector-predicate-selectors">selectors</a><span>, in § 1.1</span>
   <li><a href="#grammardef-self">'self'</a><span>, in § 2.2</span>
   <li><a href="#speculation-rule">speculation rule</a><span>, in § 1.1</span>
   <li><a href="#http-headerdef-speculation-rules">Speculation-Rules</a><span>, in § 1.4</span>
   <li><a href="#speculation-rule-set">speculation rule set</a><span>, in § 1.1</span>
   <li><a href="#speculation-rules-tag">speculation rules tag</a><span>, in § 1.1</span>
   <li><a href="#speculative-load-candidate">speculative load candidate</a><span>, in § 1.7</span>
   <li><a href="#grammardef-strict-dynamic">'strict-dynamic'</a><span>, in § 2.2</span>
   <li>
    tags
    <ul>
     <li><a href="#speculation-rule-tags">dfn for speculation rule</a><span>, in § 1.1</span>
     <li><a href="#speculative-load-candidate-tags">dfn for speculative load candidate</a><span>, in § 1.7</span>
    </ul>
   <li>
    target navigable name hint
    <ul>
     <li><a href="#prerender-candidate-target-navigable-name-hint">dfn for prerender candidate</a><span>, in § 1.7</span>
     <li><a href="#speculation-rule-target-navigable-name-hint">dfn for speculation rule</a><span>, in § 1.1</span>
    </ul>
   <li><a href="#type">type</a><span>, in § 2.1</span>
   <li><a href="#grammardef-unsafe-allow-redirects">'unsafe-allow-redirects'</a><span>, in § 2.2</span>
   <li><a href="#grammardef-unsafe-eval">'unsafe-eval'</a><span>, in § 2.2</span>
   <li><a href="#grammardef-unsafe-hashes">'unsafe-hashes'</a><span>, in § 2.2</span>
   <li><a href="#grammardef-unsafe-inline">'unsafe-inline'</a><span>, in § 2.2</span>
   <li>
    URL
    <ul>
     <li><a href="#pending-external-speculation-rule-resource-url">dfn for pending external speculation rule resource</a><span>, in § 1.1</span>
     <li><a href="#speculative-load-candidate-url">dfn for speculative load candidate</a><span>, in § 1.7</span>
    </ul>
   <li><a href="#speculation-rule-urls">URLs</a><span>, in § 1.1</span>
   <li><a href="#valid-eagerness-strings">valid eagerness strings</a><span>, in § 1.1</span>
   <li><a href="#grammardef-wasm-unsafe-eval">'wasm-unsafe-eval'</a><span>, in § 2.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSP]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="aa9871ba">base64-value</span>
     <li><span class="dfn-paneled" id="550c8676">hash-source</span>
     <li><span class="dfn-paneled" id="4945e6fc">nonce-source</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-CONTAIN-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9e5e3305">skipped contents</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="631f76db">child text content</span>
     <li><span class="dfn-paneled" id="29149164">children changed steps</span>
     <li><span class="dfn-paneled" id="a973e0fe">document</span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="c62cd7cf">origin</span>
     <li><span class="dfn-paneled" id="31e1cce6">querySelector(selectors)</span>
     <li><span class="dfn-paneled" id="f7960529">root</span>
     <li><span class="dfn-paneled" id="fd32e3c9">shadow-including descendant</span>
     <li><span class="dfn-paneled" id="fefa5851">shadow-including tree order</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCODING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b0fcb8d7">UTF-8 decode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b4c5b3f7">RequestDestination</span>
     <li><span class="dfn-paneled" id="49a5521a">abort</span>
     <li><span class="dfn-paneled" id="eed8e0e4">Access-Control-Allow-Origin</span>
     <li><span class="dfn-paneled" id="857d5516">client</span>
     <li><span class="dfn-paneled" id="a6b85a00">credentials</span>
     <li><span class="dfn-paneled" id="902380f7">credentials mode</span>
     <li><span class="dfn-paneled" id="3ae34c95">destination</span>
     <li><span class="dfn-paneled" id="36a75887">extracting a MIME type</span>
     <li><span class="dfn-paneled" id="a33db89a">fetch</span>
     <li><span class="dfn-paneled" id="6bb42fbb">fetch controller</span>
     <li><span class="dfn-paneled" id="5c66de35">get a structured field value</span>
     <li><span class="dfn-paneled" id="f7b00a8b">header list</span>
     <li><span class="dfn-paneled" id="eb62573b">HTTP(S) scheme</span>
     <li><span class="dfn-paneled" id="fa4ea124">initiator</span>
     <li><span class="dfn-paneled" id="cb98f71f">mode</span>
     <li><span class="dfn-paneled" id="a27468c5">ok status</span>
     <li><span class="dfn-paneled" id="08b51e40">processResponseConsumeBody</span>
     <li><span class="dfn-paneled" id="55213b5b">request</span>
     <li><span class="dfn-paneled" id="ee7bba09">response</span>
     <li><span class="dfn-paneled" id="a1d47575">status</span>
     <li><span class="dfn-paneled" id="dc1cd39b">URL <small>(for request)</small></span>
     <li><span class="dfn-paneled" id="3268a8eb">URL <small>(for response)</small></span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH-METADATA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a4f8c442">Sec-Fetch-Dest</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="154d8845">HTMLHyperlinkElementUtils</span>
     <li><span class="dfn-paneled" id="ec4838d8">HTMLScriptElement</span>
     <li><span class="dfn-paneled" id="68bf3d31">a</span>
     <li><span class="dfn-paneled" id="da66facb">already started</span>
     <li><span class="dfn-paneled" id="a1a807e5">area</span>
     <li><span class="dfn-paneled" id="6696b114">await a stable state</span>
     <li><span class="dfn-paneled" id="f8434dee">being rendered</span>
     <li><span class="dfn-paneled" id="cdede25f">create and initialize a Document object</span>
     <li><span class="dfn-paneled" id="6eb8a5d8">document base URL</span>
     <li><span class="dfn-paneled" id="e10e7eb7">DOM manipulation task source</span>
     <li><span class="dfn-paneled" id="544fc7df">error</span>
     <li><span class="dfn-paneled" id="3327afdd">execute the script element</span>
     <li><span class="dfn-paneled" id="a72806b1">following a hyperlink</span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="4fd2d05e">get an element's target</span>
     <li><span class="dfn-paneled" id="5cc50ead">href <small>(for HTMLHyperlinkElementUtils)</small></span>
     <li><span class="dfn-paneled" id="ca0c892d">href <small>(for a)</small></span>
     <li><span class="dfn-paneled" id="37d0f4ab">HTML element removing steps</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="6db2a1f0">links</span>
     <li><span class="dfn-paneled" id="18e7dde9">load</span>
     <li><span class="dfn-paneled" id="2b07d94d">mark as ready</span>
     <li><span class="dfn-paneled" id="b6ae4501">networking task source</span>
     <li><span class="dfn-paneled" id="13dd6cae">node navigable</span>
     <li><span class="dfn-paneled" id="b1e9fc19">nonce</span>
     <li><span class="dfn-paneled" id="e29d133b">noreferrer</span>
     <li><span class="dfn-paneled" id="037b46da">prepare the script element</span>
     <li><span class="dfn-paneled" id="48438eb3">queue a global task</span>
     <li><span class="dfn-paneled" id="a94363e9">referrerpolicy</span>
     <li><span class="dfn-paneled" id="2037b271">rel</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="41c9dc51">result</span>
     <li><span class="dfn-paneled" id="a72583a7">rules for choosing a navigable</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="0cf3964f">script</span>
     <li><span class="dfn-paneled" id="65181da8">secure context</span>
     <li><span class="dfn-paneled" id="1037f0b6">src</span>
     <li><span class="dfn-paneled" id="ba920583">style</span>
     <li><span class="dfn-paneled" id="05064bc7">supports(type)</span>
     <li><span class="dfn-paneled" id="ce7beab0">synchronous section</span>
     <li><span class="dfn-paneled" id="9e0a18e8">type</span>
     <li><span class="dfn-paneled" id="c7c0dde1">url</span>
     <li><span class="dfn-paneled" id="36706746">valid navigable target name or keyword</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="7f9469b5">ASCII case-insensitive</span>
     <li><span class="dfn-paneled" id="2d5a2765">ASCII string</span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="3de9e659">byte sequence</span>
     <li><span class="dfn-paneled" id="4135591f">code unit less than</span>
     <li><span class="dfn-paneled" id="ae8def21">contain <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a326add7">contain <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="f937b7b6">continue</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="d8f8bd6e">extend</span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="7a87d819">is</span>
     <li><span class="dfn-paneled" id="c88f3887">item</span>
     <li><span class="dfn-paneled" id="d14a6f26">key</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="3fca5a9e">map</span>
     <li><span class="dfn-paneled" id="692595fe">ordered set</span>
     <li><span class="dfn-paneled" id="5ff3a316">parse a JSON string to an Infra value</span>
     <li><span class="dfn-paneled" id="99c988d6">remove</span>
     <li><span class="dfn-paneled" id="167d1cb0">replace</span>
     <li><span class="dfn-paneled" id="0204d188">size</span>
     <li><span class="dfn-paneled" id="5ecc2082">sort in ascending order</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="984221ca">struct</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIMESNIFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7c195f8b">essence</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIXED-CONTENT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f2116e87">blockable mixed content</span>
     <li><span class="dfn-paneled" id="3d877348">Should fetching request be blocked as mixed content?</span>
    </ul>
   <li>
    <a data-link-type="biblio">[NAV-SPECULATION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0525c77b">activate</span>
     <li><span class="dfn-paneled" id="4d493a0f">anonymization policy</span>
     <li><span class="dfn-paneled" id="885e47de">cancel and discard</span>
     <li><span class="dfn-paneled" id="8c33c575">cross-origin prefetch IP anonymization policy</span>
     <li><span class="dfn-paneled" id="3173f811">has a matching prefetch record</span>
     <li><span class="dfn-paneled" id="a48cb9c0">label</span>
     <li><span class="dfn-paneled" id="fd3baafe">matches a URL</span>
     <li><span class="dfn-paneled" id="99117fcc">No-Vary-Search hint</span>
     <li><span class="dfn-paneled" id="7fe03931">origin</span>
     <li><span class="dfn-paneled" id="14a6613b">prefetch</span>
     <li><span class="dfn-paneled" id="bc1b7d17">prefetch IP anonymization policy</span>
     <li><span class="dfn-paneled" id="fba1e812">prefetch record</span>
     <li><span class="dfn-paneled" id="ec2d76e2">prefetch records</span>
     <li><span class="dfn-paneled" id="a132d33a">prerendering traversable</span>
     <li><span class="dfn-paneled" id="9c66063f">prerendering traversable <small>(for prefetch record)</small></span>
     <li><span class="dfn-paneled" id="430e99f3">referrer policy</span>
     <li><span class="dfn-paneled" id="93ccea52">Sec-Speculation-Tags</span>
     <li><span class="dfn-paneled" id="97efccfd">start referrer-initiated prerendering</span>
     <li><span class="dfn-paneled" id="dafa539d">state</span>
     <li><span class="dfn-paneled" id="a001637b">tags</span>
     <li><span class="dfn-paneled" id="1e6dbcc5">URL</span>
    </ul>
   <li>
    <a data-link-type="biblio">[NO-VARY-SEARCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9b5830c5">default URL search variance</span>
     <li><span class="dfn-paneled" id="0875e72b">equivalent modulo search variance</span>
     <li><span class="dfn-paneled" id="1e542ed3">obtain a URL search variance</span>
     <li><span class="dfn-paneled" id="f08e1f8e">URL search variance</span>
    </ul>
   <li>
    <a data-link-type="biblio">[REFERRER-POLICY]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="bb0c2ce5">"no-referrer"</span>
     <li><span class="dfn-paneled" id="2d09a0dd">referrer policy</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC8941]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2d1d761a">list</span>
     <li><span class="dfn-paneled" id="cb1e75b1">string</span>
     <li><span class="dfn-paneled" id="9b23f22f">structured header</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SECURE-CONTEXTS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9c5d9c4d">potentially trustworthy URL</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SELECTORS-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a6d5d47b">:any-link</span>
     <li><span class="dfn-paneled" id="0fa1ecd0">:visited</span>
     <li><span class="dfn-paneled" id="5e0d3b02">match a selector against an element</span>
     <li><span class="dfn-paneled" id="eec5e973">parse a selector</span>
     <li><span class="dfn-paneled" id="628c6566">pseudo-class</span>
     <li><span class="dfn-paneled" id="34c941b4">scoping root</span>
     <li><span class="dfn-paneled" id="33cbcfca">selector</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="9ed8b710">basic URL parser</span>
     <li><span class="dfn-paneled" id="3a711be7">scheme</span>
     <li><span class="dfn-paneled" id="dcffbccd">URL</span>
     <li><span class="dfn-paneled" id="05af0c3f">valid URL string</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URLPATTERN]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="f9933a9c">build a URL pattern from an Infra value</span>
     <li><span class="dfn-paneled" id="5c4f772b">match</span>
     <li><span class="dfn-paneled" id="60393e82">URL pattern</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-csp">[CSP]
   <dd>Mike West; Antonio Sartori. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 3</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
   <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://drafts.csswg.org/css-contain-2/"><cite>CSS Containment Module Level 2</cite></a>. URL: <a href="https://drafts.csswg.org/css-contain-2/">https://drafts.csswg.org/css-contain-2/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-encoding">[ENCODING]
   <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-fetch-metadata">[FETCH-METADATA]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-fetch-metadata/"><cite>Fetch Metadata Request Headers</cite></a>. URL: <a href="https://w3c.github.io/webappsec-fetch-metadata/">https://w3c.github.io/webappsec-fetch-metadata/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mimesniff">[MIMESNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-mixed-content">[MIXED-CONTENT]
   <dd>Emily Stark; Mike West; Carlos IbarraLopez. <a href="https://w3c.github.io/webappsec-mixed-content/"><cite>Mixed Content</cite></a>. URL: <a href="https://w3c.github.io/webappsec-mixed-content/">https://w3c.github.io/webappsec-mixed-content/</a>
   <dt id="biblio-no-vary-search">[NO-VARY-SEARCH]
   <dd><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-no-vary-search"><cite>No-Vary-Search</cite></a>. Editor's Draft. URL: <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-no-vary-search">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-no-vary-search</a>
   <dt id="biblio-referrer-policy">[REFERRER-POLICY]
   <dd>Jochen Eisinger; Emily Stark. <a href="https://w3c.github.io/webappsec-referrer-policy/"><cite>Referrer Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-referrer-policy/">https://w3c.github.io/webappsec-referrer-policy/</a>
   <dt id="biblio-rfc8941">[RFC8941]
   <dd>M. Nottingham; P-H. Kamp. <a href="https://httpwg.org/specs/rfc8941.html"><cite>Structured Field Values for HTTP</cite></a>. February 2021. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc8941.html">https://httpwg.org/specs/rfc8941.html</a>
   <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-secure-contexts/"><cite>Secure Contexts</cite></a>. URL: <a href="https://w3c.github.io/webappsec-secure-contexts/">https://w3c.github.io/webappsec-secure-contexts/</a>
   <dt id="biblio-selectors-4">[SELECTORS-4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/selectors/"><cite>Selectors Level 4</cite></a>. URL: <a href="https://drafts.csswg.org/selectors/">https://drafts.csswg.org/selectors/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-urlpattern">[URLPATTERN]
   <dd>Ben Kelly; Jeremy Roman; 宍戸俊哉 (Shunya Shishido). <a href="https://urlpattern.spec.whatwg.org/"><cite>URL Pattern Standard</cite></a>. Living Standard. URL: <a href="https://urlpattern.spec.whatwg.org/">https://urlpattern.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-tls">[TLS]
   <dd>E. Rescorla. <a href="https://www.rfc-editor.org/rfc/rfc8446"><cite>The Transport Layer Security (TLS) Protocol Version 1.3</cite></a>. August 2018. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue">We should consider whether we also want to make this execute even if scripting is disabled. <a class="issue-return" href="#issue-c2e21e13" title="Jump to section">↵</a></div>
   <div class="issue">We should also incorporate the case where a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-src">src</a></code> attribute is set. <a class="issue-return" href="#issue-bb120c28" title="Jump to section">↵</a></div>
   <div class="issue">We could fire <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-error">error</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-load">load</a></code> events if we wanted to. <a class="issue-return" href="#issue-9cd39e70" title="Jump to section">↵</a></div>
   <div class="issue">It’s likely that we should also handle prerendered and back-forward cached documents. <a class="issue-return" href="#issue-30bcda38" title="Jump to section">↵</a></div>
   <div class="issue"> We should also cancel speculated prerenders. <a class="issue-return" href="#issue-1cafd308" title="Jump to section">↵</a></div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"0204d188": {"dfnID":"0204d188","dfnText":"size","external":true,"refSections":[{"refs":[{"id":"ref-for-list-size"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#list-size"},
"037b46da": {"dfnID":"037b46da","dfnText":"prepare the script element","external":true,"refSections":[{"refs":[{"id":"ref-for-prepare-the-script-element"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-prepare-the-script-element\u2460"}],"title":"1.3. Prepare the script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#prepare-the-script-element"},
"05064bc7": {"dfnID":"05064bc7","dfnText":"supports(type)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-script-supports"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-supports"},
"0525c77b": {"dfnID":"0525c77b","dfnText":"activate","external":true,"refSections":[{"refs":[{"id":"ref-for-prerendering-traversable-activate"},{"id":"ref-for-prerendering-traversable-activate\u2460"}],"title":"1.7. Processing model"}],"url":"prerendering.html#prerendering-traversable-activate"},
"05af0c3f": {"dfnID":"05af0c3f","dfnText":"valid URL string","external":true,"refSections":[{"refs":[{"id":"ref-for-valid-url-string"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"https://url.spec.whatwg.org/#valid-url-string"},
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"},{"id":"ref-for-string\u2460"},{"id":"ref-for-string\u2461"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-string\u2463"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-string\u2464"},{"id":"ref-for-string\u2465"},{"id":"ref-for-string\u2466"},{"id":"ref-for-string\u2467"},{"id":"ref-for-string\u2468"},{"id":"ref-for-string\u2460\u24ea"},{"id":"ref-for-string\u2460\u2460"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#string"},
"0875e72b": {"dfnID":"0875e72b","dfnText":"equivalent modulo search variance","external":true,"refSections":[{"refs":[{"id":"ref-for-name-comparing"},{"id":"ref-for-name-comparing\u2460"}],"title":"1.7. Processing model"}],"url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-comparing"},
"08b51e40": {"dfnID":"08b51e40","dfnText":"processResponseConsumeBody","external":true,"refSections":[{"refs":[{"id":"ref-for-process-response-end-of-body"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#process-response-end-of-body"},
"0cf3964f": {"dfnID":"0cf3964f","dfnText":"script","external":true,"refSections":[{"refs":[{"id":"ref-for-script"},{"id":"ref-for-script\u2460"},{"id":"ref-for-script\u2461"},{"id":"ref-for-script\u2462"},{"id":"ref-for-script\u2463"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-script\u2464"}],"title":"2.4. script-src"},{"refs":[{"id":"ref-for-script\u2465"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#script"},
"0e3ba9f8": {"dfnID":"0e3ba9f8","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"0fa1ecd0": {"dfnID":"0fa1ecd0","dfnText":":visited","external":true,"refSections":[{"refs":[{"id":"ref-for-visited-pseudo"}],"title":"1.8. Document rule predicate matching"},{"refs":[{"id":"ref-for-visited-pseudo\u2460"}],"title":"5.5. Visited links"}],"url":"https://drafts.csswg.org/selectors-4/#visited-pseudo"},
"1037f0b6": {"dfnID":"1037f0b6","dfnText":"src","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-script-src"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-dom-script-src\u2460"}],"title":"1.3. Prepare the script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-src"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"},{"id":"ref-for-map-exists\u2460"},{"id":"ref-for-map-exists\u2461"},{"id":"ref-for-map-exists\u2462"},{"id":"ref-for-map-exists\u2463"},{"id":"ref-for-map-exists\u2464"},{"id":"ref-for-map-exists\u2465"},{"id":"ref-for-map-exists\u2466"},{"id":"ref-for-map-exists\u2467"},{"id":"ref-for-map-exists\u2468"},{"id":"ref-for-map-exists\u2460\u24ea"},{"id":"ref-for-map-exists\u2460\u2460"},{"id":"ref-for-map-exists\u2460\u2461"},{"id":"ref-for-map-exists\u2460\u2462"},{"id":"ref-for-map-exists\u2460\u2463"},{"id":"ref-for-map-exists\u2460\u2464"},{"id":"ref-for-map-exists\u2460\u2465"},{"id":"ref-for-map-exists\u2460\u2466"},{"id":"ref-for-map-exists\u2460\u2467"},{"id":"ref-for-map-exists\u2460\u2468"},{"id":"ref-for-map-exists\u2461\u24ea"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"13dd6cae": {"dfnID":"13dd6cae","dfnText":"node navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-node-navigable"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"},
"14a6613b": {"dfnID":"14a6613b","dfnText":"prefetch","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch"},{"id":"ref-for-prefetch\u2460"},{"id":"ref-for-prefetch\u2461"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch"},
"154d8845": {"dfnID":"154d8845","dfnText":"HTMLHyperlinkElementUtils","external":true,"refSections":[{"refs":[{"id":"ref-for-htmlhyperlinkelementutils"}],"title":"1.8. Document rule predicate matching"}],"url":"https://html.spec.whatwg.org/multipage/links.html#htmlhyperlinkelementutils"},
"167d1cb0": {"dfnID":"167d1cb0","dfnText":"replace","external":true,"refSections":[{"refs":[{"id":"ref-for-list-replace"}],"title":"1.2. The script element"}],"url":"https://infra.spec.whatwg.org/#list-replace"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-list-iterate\u2460"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-list-iterate\u2461"},{"id":"ref-for-list-iterate\u2462"},{"id":"ref-for-list-iterate\u2463"},{"id":"ref-for-list-iterate\u2464"},{"id":"ref-for-list-iterate\u2465"},{"id":"ref-for-list-iterate\u2466"},{"id":"ref-for-list-iterate\u2467"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-list-iterate\u2468"},{"id":"ref-for-list-iterate\u2460\u24ea"},{"id":"ref-for-list-iterate\u2460\u2460"},{"id":"ref-for-list-iterate\u2460\u2461"},{"id":"ref-for-list-iterate\u2460\u2462"},{"id":"ref-for-list-iterate\u2460\u2463"},{"id":"ref-for-list-iterate\u2460\u2464"},{"id":"ref-for-list-iterate\u2460\u2465"},{"id":"ref-for-list-iterate\u2460\u2466"},{"id":"ref-for-list-iterate\u2460\u2467"}],"title":"1.7. Processing model"},{"refs":[{"id":"ref-for-list-iterate\u2460\u2468"},{"id":"ref-for-list-iterate\u2461\u24ea"},{"id":"ref-for-list-iterate\u2461\u2460"},{"id":"ref-for-list-iterate\u2461\u2461"}],"title":"1.8. Document rule predicate matching"},{"refs":[{"id":"ref-for-list-iterate\u2461\u2462"}],"title":"2.5. Does a source list allow all inline behavior for type?"},{"refs":[{"id":"ref-for-list-iterate\u2461\u2463"},{"id":"ref-for-list-iterate\u2461\u2464"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"18e7dde9": {"dfnID":"18e7dde9","dfnText":"load","external":true,"refSections":[{"refs":[{"id":"ref-for-event-load"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/indices.html#event-load"},
"1e542ed3": {"dfnID":"1e542ed3","dfnText":"obtain a URL search variance","external":true,"refSections":[{"refs":[{"id":"ref-for-name-obtain-a-url-search-varianc"}],"title":"1.6. Parsing"}],"url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-obtain-a-url-search-varianc"},
"1e6dbcc5": {"dfnID":"1e6dbcc5","dfnText":"URL","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-url"},{"id":"ref-for-prefetch-record-url\u2460"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-url"},
"2037b271": {"dfnID":"2037b271","dfnText":"rel","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-hyperlink-rel"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-rel"},
"29149164": {"dfnID":"29149164","dfnText":"children changed steps","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-children-changed-ext"}],"title":"1.2. The script element"}],"url":"https://dom.spec.whatwg.org/#concept-node-children-changed-ext"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"}],"title":"1.8. Document rule predicate matching"},{"refs":[{"id":"ref-for-element\u2460"},{"id":"ref-for-element\u2461"}],"title":"2.1. Directives"}],"url":"https://dom.spec.whatwg.org/#element"},
"2b07d94d": {"dfnID":"2b07d94d","dfnText":"mark as ready","external":true,"refSections":[{"refs":[{"id":"ref-for-mark-as-ready"}],"title":"1.3. Prepare the script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#mark-as-ready"},
"2d09a0dd": {"dfnID":"2d09a0dd","dfnText":"referrer policy","external":true,"refSections":[{"refs":[{"id":"ref-for-referrer-policy"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-referrer-policy\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-referrer-policy\u2461"},{"id":"ref-for-referrer-policy\u2462"}],"title":"1.7. Processing model"}],"url":"https://w3c.github.io/webappsec-referrer-policy/#referrer-policy"},
"2d1d761a": {"dfnID":"2d1d761a","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list\u2465"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"https://httpwg.org/specs/rfc8941.html#list"},
"2d5a2765": {"dfnID":"2d5a2765","dfnText":"ASCII string","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-string"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-ascii-string\u2460"},{"id":"ref-for-ascii-string\u2461"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#ascii-string"},
"3173f811": {"dfnID":"3173f811","dfnText":"has a matching prefetch record","external":true,"refSections":[{"refs":[{"id":"ref-for-has-a-matching-prefetch-record"}],"title":"1.7. Processing model"}],"url":"prefetch.html#has-a-matching-prefetch-record"},
"31e1cce6": {"dfnID":"31e1cce6","dfnText":"querySelector(selectors)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-parentnode-queryselector"}],"title":"1.8. Document rule predicate matching"}],"url":"https://dom.spec.whatwg.org/#dom-parentnode-queryselector"},
"3268a8eb": {"dfnID":"3268a8eb","dfnText":"URL (for response)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-url"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-response-url"},
"3327afdd": {"dfnID":"3327afdd","dfnText":"execute the script element","external":true,"refSections":[{"refs":[{"id":"ref-for-execute-the-script-element"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#execute-the-script-element"},
"33cbcfca": {"dfnID":"33cbcfca","dfnText":"selector","external":true,"refSections":[{"refs":[{"id":"ref-for-selector"}],"title":"1.1. Definitions"}],"url":"https://drafts.csswg.org/selectors-4/#selector"},
"34c941b4": {"dfnID":"34c941b4","dfnText":"scoping root","external":true,"refSections":[{"refs":[{"id":"ref-for-scoping-root"}],"title":"1.8. Document rule predicate matching"}],"url":"https://drafts.csswg.org/selectors-4/#scoping-root"},
"36706746": {"dfnID":"36706746","dfnText":"valid navigable target name or keyword","external":true,"refSections":[{"refs":[{"id":"ref-for-valid-navigable-target-name-or-keyword"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-valid-navigable-target-name-or-keyword\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#valid-navigable-target-name-or-keyword"},
"36a75887": {"dfnID":"36a75887","dfnText":"extracting a MIME type","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-extract-mime-type"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-header-extract-mime-type"},
"37d0f4ab": {"dfnID":"37d0f4ab","dfnText":"HTML element removing steps","external":true,"refSections":[{"refs":[{"id":"ref-for-html-element-removing-steps"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#html-element-removing-steps"},
"3a711be7": {"dfnID":"3a711be7","dfnText":"scheme","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-scheme"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-concept-url-scheme\u2460"}],"title":"1.7. Processing model"}],"url":"https://url.spec.whatwg.org/#concept-url-scheme"},
"3ae34c95": {"dfnID":"3ae34c95","dfnText":"destination","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-destination"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-concept-request-destination\u2460"}],"title":"2.7. Get the effective directive for request"},{"refs":[{"id":"ref-for-concept-request-destination\u2461"}],"title":"3.1. Destination"}],"url":"https://fetch.spec.whatwg.org/#concept-request-destination"},
"3d877348": {"dfnID":"3d877348","dfnText":"Should fetching request be blocked as mixed content?","external":true,"refSections":[{"refs":[{"id":"ref-for-should-block-fetch"}],"title":"4.5. Mixed content"}],"url":"https://w3c.github.io/webappsec-mixed-content/#should-block-fetch"},
"3de9e659": {"dfnID":"3de9e659","dfnText":"byte sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-byte-sequence"}],"title":"1.5. External speculation rule sets"}],"url":"https://infra.spec.whatwg.org/#byte-sequence"},
"3fca5a9e": {"dfnID":"3fca5a9e","dfnText":"map","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-map"},{"id":"ref-for-ordered-map\u2460"},{"id":"ref-for-ordered-map\u2461"},{"id":"ref-for-ordered-map\u2462"},{"id":"ref-for-ordered-map\u2463"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#ordered-map"},
"4135591f": {"dfnID":"4135591f","dfnText":"code unit less than","external":true,"refSections":[{"refs":[{"id":"ref-for-code-unit-less-than"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#code-unit-less-than"},
"41c9dc51": {"dfnID":"41c9dc51","dfnText":"result","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-script-result"},{"id":"ref-for-concept-script-result\u2460"},{"id":"ref-for-concept-script-result\u2461"},{"id":"ref-for-concept-script-result\u2462"},{"id":"ref-for-concept-script-result\u2463"},{"id":"ref-for-concept-script-result\u2464"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result"},
"430e99f3": {"dfnID":"430e99f3","dfnText":"referrer policy","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-referrer-policy"},{"id":"ref-for-prefetch-record-referrer-policy\u2460"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-referrer-policy"},
"48438eb3": {"dfnID":"48438eb3","dfnText":"queue a global task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-global-task"},{"id":"ref-for-queue-a-global-task\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"4945e6fc": {"dfnID":"4945e6fc","dfnText":"nonce-source","external":true,"refSections":[{"refs":[{"id":"ref-for-grammardef-nonce-source"}],"title":"2.4. script-src"},{"refs":[{"id":"ref-for-grammardef-nonce-source\u2460"}],"title":"2.5. Does a source list allow all inline behavior for type?"},{"refs":[{"id":"ref-for-grammardef-nonce-source\u2461"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://w3c.github.io/webappsec-csp/#grammardef-nonce-source"},
"49a5521a": {"dfnID":"49a5521a","dfnText":"abort","external":true,"refSections":[{"refs":[{"id":"ref-for-fetch-controller-abort"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#fetch-controller-abort"},
"4d493a0f": {"dfnID":"4d493a0f","dfnText":"anonymization policy","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-anonymization-policy"},{"id":"ref-for-prefetch-record-anonymization-policy\u2460"},{"id":"ref-for-prefetch-record-anonymization-policy\u2461"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-anonymization-policy"},
"4fd2d05e": {"dfnID":"4fd2d05e","dfnText":"get an element's target","external":true,"refSections":[{"refs":[{"id":"ref-for-get-an-element's-target"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/semantics.html#get-an-element's-target"},
"5216e1a0": {"dfnID":"5216e1a0","dfnText":"node document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-document"},{"id":"ref-for-concept-node-document\u2460"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-concept-node-document\u2461"}],"title":"1.3. Prepare the script element"}],"url":"https://dom.spec.whatwg.org/#concept-node-document"},
"53275e46": {"dfnID":"53275e46","dfnText":"append (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"1.3. Prepare the script element"},{"refs":[{"id":"ref-for-list-append\u2460"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-list-append\u2461"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-list-append\u2462"},{"id":"ref-for-list-append\u2463"},{"id":"ref-for-list-append\u2464"},{"id":"ref-for-list-append\u2465"},{"id":"ref-for-list-append\u2466"},{"id":"ref-for-list-append\u2467"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-list-append\u2468"},{"id":"ref-for-list-append\u2460\u24ea"},{"id":"ref-for-list-append\u2460\u2460"},{"id":"ref-for-list-append\u2460\u2461"},{"id":"ref-for-list-append\u2460\u2462"},{"id":"ref-for-list-append\u2460\u2463"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"544fc7df": {"dfnID":"544fc7df","dfnText":"error","external":true,"refSections":[{"refs":[{"id":"ref-for-event-error"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/indices.html#event-error"},
"550c8676": {"dfnID":"550c8676","dfnText":"hash-source","external":true,"refSections":[{"refs":[{"id":"ref-for-grammardef-hash-source"}],"title":"2.4. script-src"},{"refs":[{"id":"ref-for-grammardef-hash-source\u2460"}],"title":"2.5. Does a source list allow all inline behavior for type?"}],"url":"https://w3c.github.io/webappsec-csp/#grammardef-hash-source"},
"55213b5b": {"dfnID":"55213b5b","dfnText":"request","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-request"},
"5c4f772b": {"dfnID":"5c4f772b","dfnText":"match","external":true,"refSections":[{"refs":[{"id":"ref-for-url-pattern-match"}],"title":"1.8. Document rule predicate matching"}],"url":"https://urlpattern.spec.whatwg.org/#url-pattern-match"},
"5c66de35": {"dfnID":"5c66de35","dfnText":"get a structured field value","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-get-structured-header"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header"},
"5cc50ead": {"dfnID":"5cc50ead","dfnText":"href (for HTMLHyperlinkElementUtils)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-hyperlink-href"}],"title":"1.8. Document rule predicate matching"}],"url":"https://html.spec.whatwg.org/multipage/links.html#dom-hyperlink-href"},
"5e0d3b02": {"dfnID":"5e0d3b02","dfnText":"match a selector against an element","external":true,"refSections":[{"refs":[{"id":"ref-for-match-a-selector-against-an-element"}],"title":"1.8. Document rule predicate matching"}],"url":"https://drafts.csswg.org/selectors-4/#match-a-selector-against-an-element"},
"5ecc2082": {"dfnID":"5ecc2082","dfnText":"sort in ascending order","external":true,"refSections":[{"refs":[{"id":"ref-for-list-sort-in-ascending-order"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#list-sort-in-ascending-order"},
"5ff3a316": {"dfnID":"5ff3a316","dfnText":"parse a JSON string to an Infra value","external":true,"refSections":[{"refs":[{"id":"ref-for-parse-a-json-string-to-an-infra-value"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value"},
"60393e82": {"dfnID":"60393e82","dfnText":"URL pattern","external":true,"refSections":[{"refs":[{"id":"ref-for-url-pattern"}],"title":"1.1. Definitions"}],"url":"https://urlpattern.spec.whatwg.org/#url-pattern"},
"628c6566": {"dfnID":"628c6566","dfnText":"pseudo-class","external":true,"refSections":[{"refs":[{"id":"ref-for-pseudo-class"}],"title":"1.7. Processing model"}],"url":"https://drafts.csswg.org/selectors-4/#pseudo-class"},
"631f76db": {"dfnID":"631f76db","dfnText":"child text content","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-child-text-content"}],"title":"1.2. The script element"}],"url":"https://dom.spec.whatwg.org/#concept-child-text-content"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"},{"id":"ref-for-list\u2460"},{"id":"ref-for-list\u2461"},{"id":"ref-for-list\u2462"},{"id":"ref-for-list\u2463"},{"id":"ref-for-list\u2464"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-list\u2466"},{"id":"ref-for-list\u2467"},{"id":"ref-for-list\u2468"},{"id":"ref-for-list\u2460\u24ea"},{"id":"ref-for-list\u2460\u2460"},{"id":"ref-for-list\u2460\u2461"},{"id":"ref-for-list\u2460\u2462"},{"id":"ref-for-list\u2460\u2463"},{"id":"ref-for-list\u2460\u2464"},{"id":"ref-for-list\u2460\u2465"},{"id":"ref-for-list\u2460\u2466"},{"id":"ref-for-list\u2460\u2467"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-list\u2460\u2468"},{"id":"ref-for-list\u2461\u24ea"},{"id":"ref-for-list\u2461\u2460"},{"id":"ref-for-list\u2461\u2461"},{"id":"ref-for-list\u2461\u2462"},{"id":"ref-for-list\u2461\u2463"},{"id":"ref-for-list\u2461\u2464"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#list"},
"65181da8": {"dfnID":"65181da8","dfnText":"secure context","external":true,"refSections":[{"refs":[{"id":"ref-for-secure-context"}],"title":"4.5. Mixed content"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"},
"6696b114": {"dfnID":"6696b114","dfnText":"await a stable state","external":true,"refSections":[{"refs":[{"id":"ref-for-await-a-stable-state"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#await-a-stable-state"},
"68bf3d31": {"dfnID":"68bf3d31","dfnText":"a","external":true,"refSections":[{"refs":[{"id":"ref-for-the-a-element"},{"id":"ref-for-the-a-element\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"},
"692595fe": {"dfnID":"692595fe","dfnText":"ordered set","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-set"},{"id":"ref-for-ordered-set\u2460"},{"id":"ref-for-ordered-set\u2461"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-ordered-set\u2462"},{"id":"ref-for-ordered-set\u2463"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-ordered-set\u2464"},{"id":"ref-for-ordered-set\u2465"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#ordered-set"},
"6bb42fbb": {"dfnID":"6bb42fbb","dfnText":"fetch controller","external":true,"refSections":[{"refs":[{"id":"ref-for-fetch-controller"}],"title":"1.1. Definitions"}],"url":"https://fetch.spec.whatwg.org/#fetch-controller"},
"6db2a1f0": {"dfnID":"6db2a1f0","dfnText":"links","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-document-links"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#dom-document-links"},
"6eb8a5d8": {"dfnID":"6eb8a5d8","dfnText":"document base URL","external":true,"refSections":[{"refs":[{"id":"ref-for-document-base-url"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-document-base-url\u2460"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-document-base-url\u2461"},{"id":"ref-for-document-base-url\u2462"}],"title":"1.6. Parsing"}],"url":"https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url"},
"7393da89": {"dfnID":"7393da89","dfnText":"same origin","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin"}],"title":"4.1. Cross-site request forgery"},{"refs":[{"id":"ref-for-same-origin\u2460"}],"title":"5.4. Identity joining"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-assert\u2460"},{"id":"ref-for-assert\u2461"},{"id":"ref-for-assert\u2462"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-assert\u2463"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-assert\u2464"}],"title":"1.7. Processing model"},{"refs":[{"id":"ref-for-assert\u2465"}],"title":"1.8. Document rule predicate matching"}],"url":"https://infra.spec.whatwg.org/#assert"},
"7a87d819": {"dfnID":"7a87d819","dfnText":"is","external":true,"refSections":[{"refs":[{"id":"ref-for-string-is"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://infra.spec.whatwg.org/#string-is"},
"7c195f8b": {"dfnID":"7c195f8b","dfnText":"essence","external":true,"refSections":[{"refs":[{"id":"ref-for-mime-type-essence"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-mime-type-essence\u2460"}],"title":"4.3. Type confusion"}],"url":"https://mimesniff.spec.whatwg.org/#mime-type-essence"},
"7f9469b5": {"dfnID":"7f9469b5","dfnText":"ASCII case-insensitive","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-case-insensitive"},{"id":"ref-for-ascii-case-insensitive\u2460"}],"title":"1.3. Prepare the script element"},{"refs":[{"id":"ref-for-ascii-case-insensitive\u2461"}],"title":"2.5. Does a source list allow all inline behavior for type?"},{"refs":[{"id":"ref-for-ascii-case-insensitive\u2462"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://infra.spec.whatwg.org/#ascii-case-insensitive"},
"7fe03931": {"dfnID":"7fe03931","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-cross-origin-prefetch-ip-anonymization-policy-origin"}],"title":"1.7. Processing model"}],"url":"prefetch.html#cross-origin-prefetch-ip-anonymization-policy-origin"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"1.7. Processing model"}],"url":"https://dom.spec.whatwg.org/#document"},
"857d5516": {"dfnID":"857d5516","dfnText":"client","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-client"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-request-client"},
"885e47de": {"dfnID":"885e47de","dfnText":"cancel and discard","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-cancel-and-discard"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-cancel-and-discard"},
"8c33c575": {"dfnID":"8c33c575","dfnText":"cross-origin prefetch IP anonymization policy","external":true,"refSections":[{"refs":[{"id":"ref-for-cross-origin-prefetch-ip-anonymization-policy"}],"title":"1.7. Processing model"}],"url":"prefetch.html#cross-origin-prefetch-ip-anonymization-policy"},
"902380f7": {"dfnID":"902380f7","dfnText":"credentials mode","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-credentials-mode"}],"title":"4.1. Cross-site request forgery"}],"url":"https://fetch.spec.whatwg.org/#concept-request-credentials-mode"},
"93ccea52": {"dfnID":"93ccea52","dfnText":"Sec-Speculation-Tags","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-speculation-tags-header"}],"title":"1.7. Processing model"}],"url":"prefetch.html#sec-speculation-tags-header"},
"97efccfd": {"dfnID":"97efccfd","dfnText":"start referrer-initiated prerendering","external":true,"refSections":[{"refs":[{"id":"ref-for-start-referrer-initiated-prerendering"},{"id":"ref-for-start-referrer-initiated-prerendering\u2460"},{"id":"ref-for-start-referrer-initiated-prerendering\u2461"}],"title":"1.7. Processing model"}],"url":"prerendering.html#start-referrer-initiated-prerendering"},
"984221ca": {"dfnID":"984221ca","dfnText":"struct","external":true,"refSections":[{"refs":[{"id":"ref-for-struct"},{"id":"ref-for-struct\u2460"},{"id":"ref-for-struct\u2461"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-struct\u2462"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#struct"},
"99117fcc": {"dfnID":"99117fcc","dfnText":"No-Vary-Search hint","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-no-vary-search-hint"},{"id":"ref-for-prefetch-record-no-vary-search-hint\u2460"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-no-vary-search-hint"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-list-remove\u2460"},{"id":"ref-for-list-remove\u2461"}],"title":"1.5. External speculation rule sets"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9b23f22f": {"dfnID":"9b23f22f","dfnText":"structured header","external":true,"refSections":[{"refs":[{"id":"ref-for-top"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"https://httpwg.org/specs/rfc8941.html#top"},
"9b5830c5": {"dfnID":"9b5830c5","dfnText":"default URL search variance","external":true,"refSections":[{"refs":[{"id":"ref-for-iref-default-url-search-variance"}],"title":"1.6. Parsing"}],"url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#iref-default-url-search-variance"},
"9c4c1e66": {"dfnID":"9c4c1e66","dfnText":"relevant settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-relevant-settings-object"}],"title":"1.5. External speculation rule sets"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"9c5d9c4d": {"dfnID":"9c5d9c4d","dfnText":"potentially trustworthy URL","external":true,"refSections":[{"refs":[{"id":"ref-for-potentially-trustworthy-url"}],"title":"4.5. Mixed content"}],"url":"https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url"},
"9c66063f": {"dfnID":"9c66063f","dfnText":"prerendering traversable (for prefetch record)","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-prerendering-traversable"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-prerendering-traversable"},
"9e0a18e8": {"dfnID":"9e0a18e8","dfnText":"type","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-script-type"}],"title":"2.1. Directives"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-type"},
"9e5e3305": {"dfnID":"9e5e3305","dfnText":"skipped contents","external":true,"refSections":[{"refs":[{"id":"ref-for-skips-its-contents"}],"title":"1.7. Processing model"}],"url":"https://drafts.csswg.org/css-contain-2/#skips-its-contents"},
"9ed8b710": {"dfnID":"9ed8b710","dfnText":"basic URL parser","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-basic-url-parser"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-concept-basic-url-parser\u2460"}],"title":"1.6. Parsing"}],"url":"https://url.spec.whatwg.org/#concept-basic-url-parser"},
"a001637b": {"dfnID":"a001637b","dfnText":"tags","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-tags"},{"id":"ref-for-prefetch-record-tags\u2460"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-tags"},
"a132d33a": {"dfnID":"a132d33a","dfnText":"prerendering traversable","external":true,"refSections":[{"refs":[{"id":"ref-for-prerendering-traversable"}],"title":"1.7. Processing model"}],"url":"prerendering.html#prerendering-traversable"},
"a1a807e5": {"dfnID":"a1a807e5","dfnText":"area","external":true,"refSections":[{"refs":[{"id":"ref-for-the-area-element"},{"id":"ref-for-the-area-element\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element"},
"a1d47575": {"dfnID":"a1d47575","dfnText":"status","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-status"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-response-status"},
"a27468c5": {"dfnID":"a27468c5","dfnText":"ok status","external":true,"refSections":[{"refs":[{"id":"ref-for-ok-status"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#ok-status"},
"a326add7": {"dfnID":"a326add7","dfnText":"contain (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"},{"id":"ref-for-map-exists\u2460"},{"id":"ref-for-map-exists\u2461"},{"id":"ref-for-map-exists\u2462"},{"id":"ref-for-map-exists\u2463"},{"id":"ref-for-map-exists\u2464"},{"id":"ref-for-map-exists\u2465"},{"id":"ref-for-map-exists\u2466"},{"id":"ref-for-map-exists\u2467"},{"id":"ref-for-map-exists\u2468"},{"id":"ref-for-map-exists\u2460\u24ea"},{"id":"ref-for-map-exists\u2460\u2460"},{"id":"ref-for-map-exists\u2460\u2461"},{"id":"ref-for-map-exists\u2460\u2462"},{"id":"ref-for-map-exists\u2460\u2463"},{"id":"ref-for-map-exists\u2460\u2464"},{"id":"ref-for-map-exists\u2460\u2465"},{"id":"ref-for-map-exists\u2460\u2466"},{"id":"ref-for-map-exists\u2460\u2467"},{"id":"ref-for-map-exists\u2460\u2468"},{"id":"ref-for-map-exists\u2461\u24ea"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"a33db89a": {"dfnID":"a33db89a","dfnText":"fetch","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-fetch"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-fetch"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append (for set)","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"},{"id":"ref-for-set-append\u2460"},{"id":"ref-for-set-append\u2461"},{"id":"ref-for-set-append\u2462"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"a48cb9c0": {"dfnID":"a48cb9c0","dfnText":"label","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-label"},{"id":"ref-for-prefetch-record-label\u2460"},{"id":"ref-for-prefetch-record-label\u2461"},{"id":"ref-for-prefetch-record-label\u2462"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-label"},
"a4f8c442": {"dfnID":"a4f8c442","dfnText":"Sec-Fetch-Dest","external":true,"refSections":[{"refs":[{"id":"ref-for-http-headerdef-sec-fetch-dest"}],"title":"4.1. Cross-site request forgery"}],"url":"https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-dest"},
"a6b85a00": {"dfnID":"a6b85a00","dfnText":"credentials","external":true,"refSections":[{"refs":[{"id":"ref-for-credentials"}],"title":"4.1. Cross-site request forgery"},{"refs":[{"id":"ref-for-credentials\u2460"}],"title":"5.4. Identity joining"}],"url":"https://fetch.spec.whatwg.org/#credentials"},
"a6d5d47b": {"dfnID":"a6d5d47b","dfnText":":any-link","external":true,"refSections":[{"refs":[{"id":"ref-for-any-link-pseudo"}],"title":"1.7. Processing model"}],"url":"https://drafts.csswg.org/selectors-4/#any-link-pseudo"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"a72583a7": {"dfnID":"a72583a7","dfnText":"rules for choosing a navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-the-rules-for-choosing-a-navigable"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable"},
"a72806b1": {"dfnID":"a72806b1","dfnText":"following a hyperlink","external":true,"refSections":[{"refs":[{"id":"ref-for-following-hyperlinks-2"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2"},
"a94363e9": {"dfnID":"a94363e9","dfnText":"referrerpolicy","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-hyperlink-referrerpolicy"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-referrerpolicy"},
"a973e0fe": {"dfnID":"a973e0fe","dfnText":"document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-concept-document\u2460"},{"id":"ref-for-concept-document\u2461"},{"id":"ref-for-concept-document\u2462"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-concept-document\u2463"},{"id":"ref-for-concept-document\u2464"},{"id":"ref-for-concept-document\u2465"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-concept-document\u2466"},{"id":"ref-for-concept-document\u2467"},{"id":"ref-for-concept-document\u2468"},{"id":"ref-for-concept-document\u2460\u24ea"}],"title":"1.7. Processing model"}],"url":"https://dom.spec.whatwg.org/#concept-document"},
"aa9871ba": {"dfnID":"aa9871ba","dfnText":"base64-value","external":true,"refSections":[{"refs":[{"id":"ref-for-grammardef-base64-value"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://w3c.github.io/webappsec-csp/#grammardef-base64-value"},
"ae8def21": {"dfnID":"ae8def21","dfnText":"contain (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"},{"id":"ref-for-list-contain\u2460"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-list-contain\u2461"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"at-least-as-eager": {"dfnID":"at-least-as-eager","dfnText":"at least as eager","external":false,"refSections":[{"refs":[{"id":"ref-for-at-least-as-eager"}],"title":"1.7. Processing model"}],"url":"#at-least-as-eager"},
"b0fcb8d7": {"dfnID":"b0fcb8d7","dfnText":"UTF-8 decode","external":true,"refSections":[{"refs":[{"id":"ref-for-utf-8-decode"}],"title":"1.5. External speculation rule sets"}],"url":"https://encoding.spec.whatwg.org/#utf-8-decode"},
"b1e9fc19": {"dfnID":"b1e9fc19","dfnText":"nonce","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-nonce"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://html.spec.whatwg.org/multipage/urls-and-fetching.html#attr-nonce"},
"b4c5b3f7": {"dfnID":"b4c5b3f7","dfnText":"RequestDestination","external":true,"refSections":[{"refs":[{"id":"ref-for-requestdestination"}],"title":"3.1. Destination"}],"url":"https://fetch.spec.whatwg.org/#requestdestination"},
"b6ae4501": {"dfnID":"b6ae4501","dfnText":"networking task source","external":true,"refSections":[{"refs":[{"id":"ref-for-networking-task-source"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"},
"ba920583": {"dfnID":"ba920583","dfnText":"style","external":true,"refSections":[{"refs":[{"id":"ref-for-the-style-element"}],"title":"2.6. Does element match source list for type and source?"}],"url":"https://html.spec.whatwg.org/multipage/semantics.html#the-style-element"},
"bb0c2ce5": {"dfnID":"bb0c2ce5","dfnText":"\"no-referrer\"","external":true,"refSections":[{"refs":[{"id":"ref-for-referrer-policy-no-referrer"}],"title":"1.7. Processing model"}],"url":"https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer"},
"bc1b7d17": {"dfnID":"bc1b7d17","dfnText":"prefetch IP anonymization policy","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-ip-anonymization-policy"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-ip-anonymization-policy"},
"c62cd7cf": {"dfnID":"c62cd7cf","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-origin"}],"title":"1.7. Processing model"}],"url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"c7c0dde1": {"dfnID":"c7c0dde1","dfnText":"url","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-hyperlink-url"},{"id":"ref-for-concept-hyperlink-url\u2460"},{"id":"ref-for-concept-hyperlink-url\u2461"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/links.html#concept-hyperlink-url"},
"c88f3887": {"dfnID":"c88f3887","dfnText":"item","external":true,"refSections":[{"refs":[{"id":"ref-for-struct-item"},{"id":"ref-for-struct-item\u2460"},{"id":"ref-for-struct-item\u2461"},{"id":"ref-for-struct-item\u2462"},{"id":"ref-for-struct-item\u2463"},{"id":"ref-for-struct-item\u2464"},{"id":"ref-for-struct-item\u2465"},{"id":"ref-for-struct-item\u2466"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-struct-item\u2467"},{"id":"ref-for-struct-item\u2468"},{"id":"ref-for-struct-item\u2460\u24ea"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#struct-item"},
"ca0c892d": {"dfnID":"ca0c892d","dfnText":"href (for a)","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-hyperlink-href"},{"id":"ref-for-attr-hyperlink-href\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href"},
"cb1e75b1": {"dfnID":"cb1e75b1","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string\u2462"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"https://httpwg.org/specs/rfc8941.html#string"},
"cb98f71f": {"dfnID":"cb98f71f","dfnText":"mode","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-mode"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-concept-request-mode\u2460"}],"title":"4.1. Cross-site request forgery"}],"url":"https://fetch.spec.whatwg.org/#concept-request-mode"},
"cdede25f": {"dfnID":"cdede25f","dfnText":"create and initialize a Document object","external":true,"refSections":[{"refs":[{"id":"ref-for-initialise-the-document-object"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"https://html.spec.whatwg.org/multipage/document-lifecycle.html#initialise-the-document-object"},
"ce7beab0": {"dfnID":"ce7beab0","dfnText":"synchronous section","external":true,"refSections":[{"refs":[{"id":"ref-for-synchronous-section"},{"id":"ref-for-synchronous-section\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#synchronous-section"},
"collect-tags-for-matching-speculative-load-candidates": {"dfnID":"collect-tags-for-matching-speculative-load-candidates","dfnText":"collect tags for matching speculative load candidates","external":false,"refSections":[{"refs":[{"id":"ref-for-collect-tags-for-matching-speculative-load-candidates"},{"id":"ref-for-collect-tags-for-matching-speculative-load-candidates\u2460"},{"id":"ref-for-collect-tags-for-matching-speculative-load-candidates\u2461"}],"title":"1.7. Processing model"}],"url":"#collect-tags-for-matching-speculative-load-candidates"},
"compute-a-speculative-action-referrer-policy": {"dfnID":"compute-a-speculative-action-referrer-policy","dfnText":"compute a speculative action referrer policy","external":false,"refSections":[{"refs":[{"id":"ref-for-compute-a-speculative-action-referrer-policy"},{"id":"ref-for-compute-a-speculative-action-referrer-policy\u2460"},{"id":"ref-for-compute-a-speculative-action-referrer-policy\u2461"},{"id":"ref-for-compute-a-speculative-action-referrer-policy\u2462"}],"title":"1.7. Processing model"}],"url":"#compute-a-speculative-action-referrer-policy"},
"consider-speculation": {"dfnID":"consider-speculation","dfnText":"consider speculation","external":false,"refSections":[{"refs":[{"id":"ref-for-consider-speculation"},{"id":"ref-for-consider-speculation\u2460"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-consider-speculation\u2461"}],"title":"1.3. Prepare the script element"},{"refs":[{"id":"ref-for-consider-speculation\u2462"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-consider-speculation\u2463"},{"id":"ref-for-consider-speculation\u2464"}],"title":"1.7. Processing model"}],"url":"#consider-speculation"},
"d14a6f26": {"dfnID":"d14a6f26","dfnText":"key","external":true,"refSections":[{"refs":[{"id":"ref-for-map-key"},{"id":"ref-for-map-key\u2460"},{"id":"ref-for-map-key\u2461"},{"id":"ref-for-map-key\u2462"},{"id":"ref-for-map-key\u2463"}],"title":"1.6. Parsing"}],"url":"https://infra.spec.whatwg.org/#map-key"},
"d8f8bd6e": {"dfnID":"d8f8bd6e","dfnText":"extend","external":true,"refSections":[{"refs":[{"id":"ref-for-list-extend"},{"id":"ref-for-list-extend\u2460"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#list-extend"},
"da66facb": {"dfnID":"da66facb","dfnText":"already started","external":true,"refSections":[{"refs":[{"id":"ref-for-already-started"}],"title":"1.2. The script element"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#already-started"},
"dafa539d": {"dfnID":"dafa539d","dfnText":"state","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-state"},{"id":"ref-for-prefetch-record-state\u2460"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-state"},
"dc1cd39b": {"dfnID":"dc1cd39b","dfnText":"URL (for request)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-url"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-request-url"},
"dcffbccd": {"dfnID":"dcffbccd","dfnText":"URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url"},{"id":"ref-for-concept-url\u2460"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-concept-url\u2461"},{"id":"ref-for-concept-url\u2462"},{"id":"ref-for-concept-url\u2463"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-concept-url\u2464"}],"title":"1.7. Processing model"}],"url":"https://url.spec.whatwg.org/#concept-url"},
"directive-inline-check": {"dfnID":"directive-inline-check","dfnText":"inline check","external":false,"refSections":[],"url":"#directive-inline-check"},
"document-list-of-pending-external-speculation-rule-resources": {"dfnID":"document-list-of-pending-external-speculation-rule-resources","dfnText":"list of pending external speculation rule resources","external":false,"refSections":[{"refs":[{"id":"ref-for-document-list-of-pending-external-speculation-rule-resources"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-document-list-of-pending-external-speculation-rule-resources\u2460"},{"id":"ref-for-document-list-of-pending-external-speculation-rule-resources\u2461"},{"id":"ref-for-document-list-of-pending-external-speculation-rule-resources\u2462"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-document-list-of-pending-external-speculation-rule-resources\u2463"}],"title":"1.7. Processing model"}],"url":"#document-list-of-pending-external-speculation-rule-resources"},
"document-list-of-speculation-rule-sets": {"dfnID":"document-list-of-speculation-rule-sets","dfnText":"list of speculation rule sets","external":false,"refSections":[{"refs":[{"id":"ref-for-document-list-of-speculation-rule-sets"},{"id":"ref-for-document-list-of-speculation-rule-sets\u2460"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-document-list-of-speculation-rule-sets\u2461"}],"title":"1.3. Prepare the script element"},{"refs":[{"id":"ref-for-document-list-of-speculation-rule-sets\u2462"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-document-list-of-speculation-rule-sets\u2463"}],"title":"1.7. Processing model"}],"url":"#document-list-of-speculation-rule-sets"},
"document-rule-conjunction": {"dfnID":"document-rule-conjunction","dfnText":"document rule conjunction","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-conjunction"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-document-rule-conjunction\u2460"},{"id":"ref-for-document-rule-conjunction\u2461"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-conjunction\u2462"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-conjunction"},
"document-rule-conjunction-clauses": {"dfnID":"document-rule-conjunction-clauses","dfnText":"clauses","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-conjunction-clauses"},{"id":"ref-for-document-rule-conjunction-clauses\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-conjunction-clauses\u2461"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-conjunction-clauses"},
"document-rule-css-selector-predicate": {"dfnID":"document-rule-css-selector-predicate","dfnText":"document rule CSS selector predicate","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-css-selector-predicate"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-document-rule-css-selector-predicate\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-css-selector-predicate\u2461"}],"title":"1.8. Document rule predicate matching"},{"refs":[{"id":"ref-for-document-rule-css-selector-predicate\u2462"}],"title":"4.1. Cross-site request forgery"},{"refs":[{"id":"ref-for-document-rule-css-selector-predicate\u2463"}],"title":"5.5. Visited links"}],"url":"#document-rule-css-selector-predicate"},
"document-rule-css-selector-predicate-selectors": {"dfnID":"document-rule-css-selector-predicate-selectors","dfnText":"selectors","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-css-selector-predicate-selectors"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-css-selector-predicate-selectors\u2460"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-css-selector-predicate-selectors"},
"document-rule-disjunction": {"dfnID":"document-rule-disjunction","dfnText":"document rule disjunction","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-disjunction"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-document-rule-disjunction\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-disjunction\u2461"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-disjunction"},
"document-rule-disjunction-clauses": {"dfnID":"document-rule-disjunction-clauses","dfnText":"clauses","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-disjunction-clauses"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-disjunction-clauses\u2460"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-disjunction-clauses"},
"document-rule-negation": {"dfnID":"document-rule-negation","dfnText":"document rule negation","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-negation"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-document-rule-negation\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-negation\u2461"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-negation"},
"document-rule-negation-clause": {"dfnID":"document-rule-negation-clause","dfnText":"clause","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-negation-clause"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-negation-clause\u2460"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-negation-clause"},
"document-rule-predicate": {"dfnID":"document-rule-predicate","dfnText":"document rule predicate","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-predicate"},{"id":"ref-for-document-rule-predicate\u2460"},{"id":"ref-for-document-rule-predicate\u2461"},{"id":"ref-for-document-rule-predicate\u2462"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-document-rule-predicate\u2463"}],"title":"1.7. Processing model"},{"refs":[{"id":"ref-for-document-rule-predicate\u2464"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-predicate"},
"document-rule-predicate-matches": {"dfnID":"document-rule-predicate-matches","dfnText":"matches","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-predicate-matches"}],"title":"1.7. Processing model"},{"refs":[{"id":"ref-for-document-rule-predicate-matches\u2460"},{"id":"ref-for-document-rule-predicate-matches\u2461"},{"id":"ref-for-document-rule-predicate-matches\u2462"}],"title":"1.8. Document rule predicate matching"},{"refs":[{"id":"ref-for-document-rule-predicate-matches\u2463"}],"title":"5.5. Visited links"}],"url":"#document-rule-predicate-matches"},
"document-rule-url-pattern-predicate": {"dfnID":"document-rule-url-pattern-predicate","dfnText":"document rule URL pattern predicate","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-url-pattern-predicate"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-document-rule-url-pattern-predicate\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-url-pattern-predicate\u2461"}],"title":"1.8. Document rule predicate matching"},{"refs":[{"id":"ref-for-document-rule-url-pattern-predicate\u2462"}],"title":"4.1. Cross-site request forgery"}],"url":"#document-rule-url-pattern-predicate"},
"document-rule-url-pattern-predicate-patterns": {"dfnID":"document-rule-url-pattern-predicate-patterns","dfnText":"patterns","external":false,"refSections":[{"refs":[{"id":"ref-for-document-rule-url-pattern-predicate-patterns"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-document-rule-url-pattern-predicate-patterns\u2460"}],"title":"1.8. Document rule predicate matching"}],"url":"#document-rule-url-pattern-predicate-patterns"},
"e10e7eb7": {"dfnID":"e10e7eb7","dfnText":"DOM manipulation task source","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-manipulation-task-source"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"},
"e29d133b": {"dfnID":"e29d133b","dfnText":"noreferrer","external":true,"refSections":[{"refs":[{"id":"ref-for-link-type-noreferrer"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/links.html#link-type-noreferrer"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"},{"id":"ref-for-concept-relevant-global\u2460"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"eb62573b": {"dfnID":"eb62573b","dfnText":"HTTP(S) scheme","external":true,"refSections":[{"refs":[{"id":"ref-for-http-scheme"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-http-scheme\u2460"}],"title":"1.7. Processing model"}],"url":"https://fetch.spec.whatwg.org/#http-scheme"},
"ec2d76e2": {"dfnID":"ec2d76e2","dfnText":"prefetch records","external":true,"refSections":[{"refs":[{"id":"ref-for-document-prefetch-records"}],"title":"1.7. Processing model"}],"url":"prefetch.html#document-prefetch-records"},
"ec4838d8": {"dfnID":"ec4838d8","dfnText":"HTMLScriptElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmlscriptelement"}],"title":"2.1. Directives"}],"url":"https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement"},
"ee7bba09": {"dfnID":"ee7bba09","dfnText":"response","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response"},{"id":"ref-for-concept-response\u2460"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-concept-response\u2461"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-response"},
"eec5e973": {"dfnID":"eec5e973","dfnText":"parse a selector","external":true,"refSections":[{"refs":[{"id":"ref-for-parse-a-selector"}],"title":"1.6. Parsing"}],"url":"https://drafts.csswg.org/selectors-4/#parse-a-selector"},
"eed8e0e4": {"dfnID":"eed8e0e4","dfnText":"Access-Control-Allow-Origin","external":true,"refSections":[{"refs":[{"id":"ref-for-http-access-control-allow-origin"}],"title":"4.1. Cross-site request forgery"}],"url":"https://fetch.spec.whatwg.org/#http-access-control-allow-origin"},
"f08e1f8e": {"dfnID":"f08e1f8e","dfnText":"URL search variance","external":true,"refSections":[{"refs":[{"id":"ref-for-name-data-model"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-name-data-model\u2460"}],"title":"1.7. Processing model"}],"url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-data-model"},
"f2116e87": {"dfnID":"f2116e87","dfnText":"blockable mixed content","external":true,"refSections":[{"refs":[{"id":"ref-for-blockable-mixed-content"}],"title":"4.5. Mixed content"}],"url":"https://w3c.github.io/webappsec-mixed-content/#blockable-mixed-content"},
"f7960529": {"dfnID":"f7960529","dfnText":"root","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-tree-root"}],"title":"1.8. Document rule predicate matching"}],"url":"https://dom.spec.whatwg.org/#concept-tree-root"},
"f7b00a8b": {"dfnID":"f7b00a8b","dfnText":"header list","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-header-list"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-concept-response-header-list\u2460"}],"title":"1.5. External speculation rule sets"}],"url":"https://fetch.spec.whatwg.org/#concept-response-header-list"},
"f8434dee": {"dfnID":"f8434dee","dfnText":"being rendered","external":true,"refSections":[{"refs":[{"id":"ref-for-being-rendered"}],"title":"1.7. Processing model"}],"url":"https://html.spec.whatwg.org/multipage/rendering.html#being-rendered"},
"f937b7b6": {"dfnID":"f937b7b6","dfnText":"continue","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-continue"},{"id":"ref-for-iteration-continue\u2460"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-iteration-continue\u2461"},{"id":"ref-for-iteration-continue\u2462"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-iteration-continue\u2463"},{"id":"ref-for-iteration-continue\u2464"},{"id":"ref-for-iteration-continue\u2465"},{"id":"ref-for-iteration-continue\u2466"},{"id":"ref-for-iteration-continue\u2467"},{"id":"ref-for-iteration-continue\u2468"},{"id":"ref-for-iteration-continue\u2460\u24ea"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-iteration-continue\u2460\u2460"},{"id":"ref-for-iteration-continue\u2460\u2461"},{"id":"ref-for-iteration-continue\u2460\u2462"},{"id":"ref-for-iteration-continue\u2460\u2463"},{"id":"ref-for-iteration-continue\u2460\u2464"},{"id":"ref-for-iteration-continue\u2460\u2465"}],"title":"1.7. Processing model"}],"url":"https://infra.spec.whatwg.org/#iteration-continue"},
"f9933a9c": {"dfnID":"f9933a9c","dfnText":"build a URL pattern from an Infra value","external":true,"refSections":[{"refs":[{"id":"ref-for-build-a-url-pattern-from-an-infra-value"}],"title":"1.6. Parsing"}],"url":"https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-infra-value"},
"fa4ea124": {"dfnID":"fa4ea124","dfnText":"initiator","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-initiator"}],"title":"2.7. Get the effective directive for request"}],"url":"https://fetch.spec.whatwg.org/#concept-request-initiator"},
"fba1e812": {"dfnID":"fba1e812","dfnText":"prefetch record","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record"},{"id":"ref-for-prefetch-record\u2460"},{"id":"ref-for-prefetch-record\u2461"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record"},
"fd32e3c9": {"dfnID":"fd32e3c9","dfnText":"shadow-including descendant","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-shadow-including-descendant"}],"title":"1.7. Processing model"}],"url":"https://dom.spec.whatwg.org/#concept-shadow-including-descendant"},
"fd3baafe": {"dfnID":"fd3baafe","dfnText":"matches a URL","external":true,"refSections":[{"refs":[{"id":"ref-for-prefetch-record-matches-a-url"}],"title":"1.7. Processing model"}],"url":"prefetch.html#prefetch-record-matches-a-url"},
"fefa5851": {"dfnID":"fefa5851","dfnText":"shadow-including tree order","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-shadow-including-tree-order"}],"title":"1.7. Processing model"}],"url":"https://dom.spec.whatwg.org/#concept-shadow-including-tree-order"},
"find-matching-links": {"dfnID":"find-matching-links","dfnText":"find matching links","external":false,"refSections":[{"refs":[{"id":"ref-for-find-matching-links"},{"id":"ref-for-find-matching-links\u2460"}],"title":"1.7. Processing model"}],"url":"#find-matching-links"},
"grammardef-inline-check": {"dfnID":"grammardef-inline-check","dfnText":"inline check","external":false,"refSections":[],"url":"#grammardef-inline-check"},
"grammardef-inline-speculation-rules": {"dfnID":"grammardef-inline-speculation-rules","dfnText":"'inline-speculation-rules'","external":false,"refSections":[{"refs":[{"id":"ref-for-grammardef-inline-speculation-rules"}],"title":"2.5. Does a source list allow all inline behavior for type?"}],"url":"#grammardef-inline-speculation-rules"},
"grammardef-keyword-source": {"dfnID":"grammardef-keyword-source","dfnText":"keyword-source","external":false,"refSections":[{"refs":[{"id":"ref-for-grammardef-keyword-source"},{"id":"ref-for-grammardef-keyword-source\u2460"},{"id":"ref-for-grammardef-keyword-source\u2461"}],"title":"2.5. Does a source list allow all inline behavior for type?"},{"refs":[{"id":"ref-for-grammardef-keyword-source\u2462"}],"title":"2.6. Does element match source list for type and source?"}],"url":"#grammardef-keyword-source"},
"grammardef-report-sample": {"dfnID":"grammardef-report-sample","dfnText":"'report-sample'","external":false,"refSections":[],"url":"#grammardef-report-sample"},
"grammardef-script": {"dfnID":"grammardef-script","dfnText":"script","external":false,"refSections":[],"url":"#grammardef-script"},
"grammardef-script-attribute": {"dfnID":"grammardef-script-attribute","dfnText":"script attribute","external":false,"refSections":[],"url":"#grammardef-script-attribute"},
"grammardef-script-speculationrules": {"dfnID":"grammardef-script-speculationrules","dfnText":"script speculationrules","external":false,"refSections":[],"url":"#grammardef-script-speculationrules"},
"grammardef-self": {"dfnID":"grammardef-self","dfnText":"'self'","external":false,"refSections":[],"url":"#grammardef-self"},
"grammardef-strict-dynamic": {"dfnID":"grammardef-strict-dynamic","dfnText":"'strict-dynamic'","external":false,"refSections":[{"refs":[{"id":"ref-for-grammardef-strict-dynamic"}],"title":"2.5. Does a source list allow all inline behavior for type?"}],"url":"#grammardef-strict-dynamic"},
"grammardef-unsafe-allow-redirects": {"dfnID":"grammardef-unsafe-allow-redirects","dfnText":"'unsafe-allow-redirects'","external":false,"refSections":[],"url":"#grammardef-unsafe-allow-redirects"},
"grammardef-unsafe-eval": {"dfnID":"grammardef-unsafe-eval","dfnText":"'unsafe-eval'","external":false,"refSections":[],"url":"#grammardef-unsafe-eval"},
"grammardef-unsafe-hashes": {"dfnID":"grammardef-unsafe-hashes","dfnText":"'unsafe-hashes'","external":false,"refSections":[{"refs":[{"id":"ref-for-grammardef-unsafe-hashes"}],"title":"2.6. Does element match source list for type and source?"}],"url":"#grammardef-unsafe-hashes"},
"grammardef-unsafe-inline": {"dfnID":"grammardef-unsafe-inline","dfnText":"'unsafe-inline'","external":false,"refSections":[{"refs":[{"id":"ref-for-grammardef-unsafe-inline"}],"title":"2.5. Does a source list allow all inline behavior for type?"}],"url":"#grammardef-unsafe-inline"},
"grammardef-wasm-unsafe-eval": {"dfnID":"grammardef-wasm-unsafe-eval","dfnText":"'wasm-unsafe-eval'","external":false,"refSections":[],"url":"#grammardef-wasm-unsafe-eval"},
"http-headerdef-speculation-rules": {"dfnID":"http-headerdef-speculation-rules","dfnText":"Speculation-Rules","external":false,"refSections":[{"refs":[{"id":"ref-for-http-headerdef-speculation-rules"},{"id":"ref-for-http-headerdef-speculation-rules\u2460"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-http-headerdef-speculation-rules\u2461"}],"title":"2.7. Get the effective directive for request"},{"refs":[{"id":"ref-for-http-headerdef-speculation-rules\u2462"}],"title":"4.1. Cross-site request forgery"},{"refs":[{"id":"ref-for-http-headerdef-speculation-rules\u2463"}],"title":"4.2. Cross-site scripting"},{"refs":[{"id":"ref-for-http-headerdef-speculation-rules\u2464"}],"title":"4.5. Mixed content"}],"url":"#http-headerdef-speculation-rules"},
"less-eager": {"dfnID":"less-eager","dfnText":"less eager","external":false,"refSections":[{"refs":[{"id":"ref-for-less-eager"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-less-eager\u2460"}],"title":"1.7. Processing model"}],"url":"#less-eager"},
"parse-a-document-rule-predicate": {"dfnID":"parse-a-document-rule-predicate","dfnText":"parse a document rule predicate","external":false,"refSections":[{"refs":[{"id":"ref-for-parse-a-document-rule-predicate"},{"id":"ref-for-parse-a-document-rule-predicate\u2460"},{"id":"ref-for-parse-a-document-rule-predicate\u2461"}],"title":"1.6. Parsing"}],"url":"#parse-a-document-rule-predicate"},
"parse-a-speculation-rule": {"dfnID":"parse-a-speculation-rule","dfnText":"parse a speculation rule","external":false,"refSections":[{"refs":[{"id":"ref-for-parse-a-speculation-rule"},{"id":"ref-for-parse-a-speculation-rule\u2460"}],"title":"1.6. Parsing"}],"url":"#parse-a-speculation-rule"},
"parse-speculation-rules": {"dfnID":"parse-speculation-rules","dfnText":"parse speculation rules","external":false,"refSections":[{"refs":[{"id":"ref-for-parse-speculation-rules"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-parse-speculation-rules\u2460"}],"title":"1.3. Prepare the script element"},{"refs":[{"id":"ref-for-parse-speculation-rules\u2461"}],"title":"1.5. External speculation rule sets"}],"url":"#parse-speculation-rules"},
"pending-external-speculation-rule-resource": {"dfnID":"pending-external-speculation-rule-resource","dfnText":"pending external speculation rule resource","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource\u2460"},{"id":"ref-for-pending-external-speculation-rule-resource\u2461"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource\u2462"}],"title":"1.7. Processing model"}],"url":"#pending-external-speculation-rule-resource"},
"pending-external-speculation-rule-resource-cancel-and-discard": {"dfnID":"pending-external-speculation-rule-resource-cancel-and-discard","dfnText":"cancel and discard","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource-cancel-and-discard"}],"title":"1.5. External speculation rule sets"}],"url":"#pending-external-speculation-rule-resource-cancel-and-discard"},
"pending-external-speculation-rule-resource-controller": {"dfnID":"pending-external-speculation-rule-resource-controller","dfnText":"controller","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource-controller"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource-controller\u2460"},{"id":"ref-for-pending-external-speculation-rule-resource-controller\u2461"},{"id":"ref-for-pending-external-speculation-rule-resource-controller\u2462"},{"id":"ref-for-pending-external-speculation-rule-resource-controller\u2463"}],"title":"1.5. External speculation rule sets"}],"url":"#pending-external-speculation-rule-resource-controller"},
"pending-external-speculation-rule-resource-fetch": {"dfnID":"pending-external-speculation-rule-resource-fetch","dfnText":"fetch","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource-fetch"}],"title":"1.5. External speculation rule sets"}],"url":"#pending-external-speculation-rule-resource-fetch"},
"pending-external-speculation-rule-resource-url": {"dfnID":"pending-external-speculation-rule-resource-url","dfnText":"URL","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource-url"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-pending-external-speculation-rule-resource-url\u2460"}],"title":"1.5. External speculation rule sets"}],"url":"#pending-external-speculation-rule-resource-url"},
"prefetch-candidate": {"dfnID":"prefetch-candidate","dfnText":"prefetch candidate","external":false,"refSections":[{"refs":[{"id":"ref-for-prefetch-candidate"},{"id":"ref-for-prefetch-candidate\u2460"},{"id":"ref-for-prefetch-candidate\u2461"}],"title":"1.7. Processing model"}],"url":"#prefetch-candidate"},
"prefetch-candidate-anonymization-policy": {"dfnID":"prefetch-candidate-anonymization-policy","dfnText":"anonymization policy","external":false,"refSections":[{"refs":[{"id":"ref-for-prefetch-candidate-anonymization-policy"},{"id":"ref-for-prefetch-candidate-anonymization-policy\u2460"},{"id":"ref-for-prefetch-candidate-anonymization-policy\u2461"},{"id":"ref-for-prefetch-candidate-anonymization-policy\u2462"}],"title":"1.7. Processing model"}],"url":"#prefetch-candidate-anonymization-policy"},
"prefetch-candidate-continues": {"dfnID":"prefetch-candidate-continues","dfnText":"continues","external":false,"refSections":[{"refs":[{"id":"ref-for-prefetch-candidate-continues"}],"title":"1.7. Processing model"}],"url":"#prefetch-candidate-continues"},
"prerender-candidate": {"dfnID":"prerender-candidate","dfnText":"prerender candidate","external":false,"refSections":[{"refs":[{"id":"ref-for-prerender-candidate"},{"id":"ref-for-prerender-candidate\u2460"}],"title":"1.7. Processing model"}],"url":"#prerender-candidate"},
"prerender-candidate-target-navigable-name-hint": {"dfnID":"prerender-candidate-target-navigable-name-hint","dfnText":"target navigable name hint","external":false,"refSections":[{"refs":[{"id":"ref-for-prerender-candidate-target-navigable-name-hint"},{"id":"ref-for-prerender-candidate-target-navigable-name-hint\u2460"},{"id":"ref-for-prerender-candidate-target-navigable-name-hint\u2461"},{"id":"ref-for-prerender-candidate-target-navigable-name-hint\u2462"}],"title":"1.7. Processing model"}],"url":"#prerender-candidate-target-navigable-name-hint"},
"process-pending-external-speculation-rule-resources": {"dfnID":"process-pending-external-speculation-rule-resources","dfnText":"process pending external speculation rule resources","external":false,"refSections":[{"refs":[{"id":"ref-for-process-pending-external-speculation-rule-resources"}],"title":"1.4. The `Speculation-Rules` header"},{"refs":[{"id":"ref-for-process-pending-external-speculation-rule-resources\u2460"}],"title":"1.5. External speculation rule sets"},{"refs":[{"id":"ref-for-process-pending-external-speculation-rule-resources\u2461"}],"title":"1.7. Processing model"}],"url":"#process-pending-external-speculation-rule-resources"},
"process-the-speculation-rules-header": {"dfnID":"process-the-speculation-rules-header","dfnText":"process the Speculation-Rules header","external":false,"refSections":[{"refs":[{"id":"ref-for-process-the-speculation-rules-header"}],"title":"1.4. The `Speculation-Rules` header"}],"url":"#process-the-speculation-rules-header"},
"speculation-rule": {"dfnID":"speculation-rule","dfnText":"speculation rule","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule"},{"id":"ref-for-speculation-rule\u2460"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-speculation-rule\u2461"},{"id":"ref-for-speculation-rule\u2462"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule\u2463"}],"title":"1.7. Processing model"}],"url":"#speculation-rule"},
"speculation-rule-eagerness": {"dfnID":"speculation-rule-eagerness","dfnText":"eagerness","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-eagerness"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-eagerness\u2460"},{"id":"ref-for-speculation-rule-eagerness\u2461"},{"id":"ref-for-speculation-rule-eagerness\u2462"},{"id":"ref-for-speculation-rule-eagerness\u2463"}],"title":"1.7. Processing model"},{"refs":[{"id":"ref-for-speculation-rule-eagerness\u2464"}],"title":"5.1. Heuristics"}],"url":"#speculation-rule-eagerness"},
"speculation-rule-no-vary-search-hint": {"dfnID":"speculation-rule-no-vary-search-hint","dfnText":"No-Vary-Search hint","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-no-vary-search-hint"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-no-vary-search-hint\u2460"},{"id":"ref-for-speculation-rule-no-vary-search-hint\u2461"},{"id":"ref-for-speculation-rule-no-vary-search-hint\u2462"},{"id":"ref-for-speculation-rule-no-vary-search-hint\u2463"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-no-vary-search-hint"},
"speculation-rule-predicate": {"dfnID":"speculation-rule-predicate","dfnText":"predicate","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-predicate"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-predicate\u2460"},{"id":"ref-for-speculation-rule-predicate\u2461"},{"id":"ref-for-speculation-rule-predicate\u2462"},{"id":"ref-for-speculation-rule-predicate\u2463"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-predicate"},
"speculation-rule-referrer-policy": {"dfnID":"speculation-rule-referrer-policy","dfnText":"referrer policy","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-referrer-policy"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-referrer-policy\u2460"},{"id":"ref-for-speculation-rule-referrer-policy\u2461"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-referrer-policy"},
"speculation-rule-requirements": {"dfnID":"speculation-rule-requirements","dfnText":"requirements","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-requirements"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-speculation-rule-requirements\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-requirements\u2461"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-requirements"},
"speculation-rule-set": {"dfnID":"speculation-rule-set","dfnText":"speculation rule set","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-set"},{"id":"ref-for-speculation-rule-set\u2460"},{"id":"ref-for-speculation-rule-set\u2461"}],"title":"1.2. The script element"},{"refs":[{"id":"ref-for-speculation-rule-set\u2462"},{"id":"ref-for-speculation-rule-set\u2463"}],"title":"1.6. Parsing"}],"url":"#speculation-rule-set"},
"speculation-rule-set-prefetch-rules": {"dfnID":"speculation-rule-set-prefetch-rules","dfnText":"prefetch rules","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-set-prefetch-rules"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-set-prefetch-rules\u2460"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-set-prefetch-rules"},
"speculation-rule-set-prerender-rules": {"dfnID":"speculation-rule-set-prerender-rules","dfnText":"prerender rules","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-set-prerender-rules"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-set-prerender-rules\u2460"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-set-prerender-rules"},
"speculation-rule-tags": {"dfnID":"speculation-rule-tags","dfnText":"tags","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-tags"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-tags\u2460"},{"id":"ref-for-speculation-rule-tags\u2461"},{"id":"ref-for-speculation-rule-tags\u2462"},{"id":"ref-for-speculation-rule-tags\u2463"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-tags"},
"speculation-rule-target-navigable-name-hint": {"dfnID":"speculation-rule-target-navigable-name-hint","dfnText":"target navigable name hint","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-target-navigable-name-hint"},{"id":"ref-for-speculation-rule-target-navigable-name-hint\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-target-navigable-name-hint\u2461"},{"id":"ref-for-speculation-rule-target-navigable-name-hint\u2462"},{"id":"ref-for-speculation-rule-target-navigable-name-hint\u2463"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-target-navigable-name-hint"},
"speculation-rule-urls": {"dfnID":"speculation-rule-urls","dfnText":"URLs","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rule-urls"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rule-urls\u2460"},{"id":"ref-for-speculation-rule-urls\u2461"}],"title":"1.7. Processing model"}],"url":"#speculation-rule-urls"},
"speculation-rules-tag": {"dfnID":"speculation-rules-tag","dfnText":"speculation rules tag","external":false,"refSections":[{"refs":[{"id":"ref-for-speculation-rules-tag"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-speculation-rules-tag\u2460"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-speculation-rules-tag\u2461"}],"title":"1.7. Processing model"}],"url":"#speculation-rules-tag"},
"speculative-load-candidate": {"dfnID":"speculative-load-candidate","dfnText":"speculative load candidate","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate"},{"id":"ref-for-speculative-load-candidate\u2460"},{"id":"ref-for-speculative-load-candidate\u2461"},{"id":"ref-for-speculative-load-candidate\u2462"},{"id":"ref-for-speculative-load-candidate\u2463"},{"id":"ref-for-speculative-load-candidate\u2464"},{"id":"ref-for-speculative-load-candidate\u2465"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate"},
"speculative-load-candidate-eagerness": {"dfnID":"speculative-load-candidate-eagerness","dfnText":"eagerness","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate-eagerness"},{"id":"ref-for-speculative-load-candidate-eagerness\u2460"},{"id":"ref-for-speculative-load-candidate-eagerness\u2461"},{"id":"ref-for-speculative-load-candidate-eagerness\u2462"},{"id":"ref-for-speculative-load-candidate-eagerness\u2463"},{"id":"ref-for-speculative-load-candidate-eagerness\u2464"},{"id":"ref-for-speculative-load-candidate-eagerness\u2465"},{"id":"ref-for-speculative-load-candidate-eagerness\u2466"},{"id":"ref-for-speculative-load-candidate-eagerness\u2467"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate-eagerness"},
"speculative-load-candidate-no-vary-search-hint": {"dfnID":"speculative-load-candidate-no-vary-search-hint","dfnText":"No-Vary-Search hint","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate-no-vary-search-hint"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2460"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2461"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2462"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2463"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2464"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2465"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2466"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2467"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2468"},{"id":"ref-for-speculative-load-candidate-no-vary-search-hint\u2460\u24ea"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate-no-vary-search-hint"},
"speculative-load-candidate-redundant-with": {"dfnID":"speculative-load-candidate-redundant-with","dfnText":"redundant with","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate-redundant-with"},{"id":"ref-for-speculative-load-candidate-redundant-with\u2460"},{"id":"ref-for-speculative-load-candidate-redundant-with\u2461"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate-redundant-with"},
"speculative-load-candidate-referrer-policy": {"dfnID":"speculative-load-candidate-referrer-policy","dfnText":"referrer policy","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate-referrer-policy"},{"id":"ref-for-speculative-load-candidate-referrer-policy\u2460"},{"id":"ref-for-speculative-load-candidate-referrer-policy\u2461"},{"id":"ref-for-speculative-load-candidate-referrer-policy\u2462"},{"id":"ref-for-speculative-load-candidate-referrer-policy\u2463"},{"id":"ref-for-speculative-load-candidate-referrer-policy\u2464"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate-referrer-policy"},
"speculative-load-candidate-tags": {"dfnID":"speculative-load-candidate-tags","dfnText":"tags","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate-tags"},{"id":"ref-for-speculative-load-candidate-tags\u2460"},{"id":"ref-for-speculative-load-candidate-tags\u2461"},{"id":"ref-for-speculative-load-candidate-tags\u2462"},{"id":"ref-for-speculative-load-candidate-tags\u2463"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate-tags"},
"speculative-load-candidate-url": {"dfnID":"speculative-load-candidate-url","dfnText":"URL","external":false,"refSections":[{"refs":[{"id":"ref-for-speculative-load-candidate-url"},{"id":"ref-for-speculative-load-candidate-url\u2460"},{"id":"ref-for-speculative-load-candidate-url\u2461"},{"id":"ref-for-speculative-load-candidate-url\u2462"},{"id":"ref-for-speculative-load-candidate-url\u2463"},{"id":"ref-for-speculative-load-candidate-url\u2464"},{"id":"ref-for-speculative-load-candidate-url\u2465"},{"id":"ref-for-speculative-load-candidate-url\u2466"},{"id":"ref-for-speculative-load-candidate-url\u2467"},{"id":"ref-for-speculative-load-candidate-url\u2468"}],"title":"1.7. Processing model"}],"url":"#speculative-load-candidate-url"},
"type": {"dfnID":"type","dfnText":"type","external":false,"refSections":[{"refs":[{"id":"ref-for-type"}],"title":"2.1. Directives"},{"refs":[{"id":"ref-for-type\u2460"}],"title":"2.3. Should element\u2019s inline type behavior be blocked by Content Security Policy?"},{"refs":[{"id":"ref-for-type\u2461"},{"id":"ref-for-type\u2462"}],"title":"2.5. Does a source list allow all inline behavior for type?"},{"refs":[{"id":"ref-for-type\u2463"},{"id":"ref-for-type\u2464"}],"title":"2.6. Does element match source list for type and source?"}],"url":"#type"},
"valid-eagerness-strings": {"dfnID":"valid-eagerness-strings","dfnText":"valid eagerness strings","external":false,"refSections":[{"refs":[{"id":"ref-for-valid-eagerness-strings"},{"id":"ref-for-valid-eagerness-strings\u2460"},{"id":"ref-for-valid-eagerness-strings\u2461"},{"id":"ref-for-valid-eagerness-strings\u2462"},{"id":"ref-for-valid-eagerness-strings\u2463"}],"title":"1.1. Definitions"},{"refs":[{"id":"ref-for-valid-eagerness-strings\u2464"}],"title":"1.6. Parsing"},{"refs":[{"id":"ref-for-valid-eagerness-strings\u2465"}],"title":"1.7. Processing model"}],"url":"#valid-eagerness-strings"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#at-least-as-eager": {"displayText":"at least as eager","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"at least as eager","type":"dfn","url":"#at-least-as-eager"},
"#collect-tags-for-matching-speculative-load-candidates": {"displayText":"collect tags for matching speculative load candidates","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"collect tags for matching speculative load candidates","type":"dfn","url":"#collect-tags-for-matching-speculative-load-candidates"},
"#compute-a-speculative-action-referrer-policy": {"displayText":"compute a speculative action referrer policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"compute a speculative action referrer policy","type":"dfn","url":"#compute-a-speculative-action-referrer-policy"},
"#consider-speculation": {"displayText":"consider speculation","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"consider speculation","type":"dfn","url":"#consider-speculation"},
"#document-list-of-pending-external-speculation-rule-resources": {"displayText":"list of pending external speculation rule resources","export":true,"for_":["document"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"list of pending external speculation rule resources","type":"dfn","url":"#document-list-of-pending-external-speculation-rule-resources"},
"#document-list-of-speculation-rule-sets": {"displayText":"list of speculation rule sets","export":true,"for_":["document"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"list of speculation rule sets","type":"dfn","url":"#document-list-of-speculation-rule-sets"},
"#document-rule-conjunction": {"displayText":"document rule conjunction","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"document rule conjunction","type":"dfn","url":"#document-rule-conjunction"},
"#document-rule-conjunction-clauses": {"displayText":"clauses","export":true,"for_":["document rule conjunction"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"clauses","type":"dfn","url":"#document-rule-conjunction-clauses"},
"#document-rule-css-selector-predicate": {"displayText":"document rule css selector predicate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"document rule css selector predicate","type":"dfn","url":"#document-rule-css-selector-predicate"},
"#document-rule-css-selector-predicate-selectors": {"displayText":"selectors","export":true,"for_":["document rule CSS selector predicate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"selectors","type":"dfn","url":"#document-rule-css-selector-predicate-selectors"},
"#document-rule-disjunction": {"displayText":"document rule disjunction","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"document rule disjunction","type":"dfn","url":"#document-rule-disjunction"},
"#document-rule-disjunction-clauses": {"displayText":"clauses","export":true,"for_":["document rule disjunction"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"clauses","type":"dfn","url":"#document-rule-disjunction-clauses"},
"#document-rule-negation": {"displayText":"document rule negation","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"document rule negation","type":"dfn","url":"#document-rule-negation"},
"#document-rule-negation-clause": {"displayText":"clause","export":true,"for_":["document rule negation"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"clause","type":"dfn","url":"#document-rule-negation-clause"},
"#document-rule-predicate": {"displayText":"document rule predicate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"document rule predicate","type":"dfn","url":"#document-rule-predicate"},
"#document-rule-predicate-matches": {"displayText":"matches","export":true,"for_":["document rule predicate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"matches","type":"dfn","url":"#document-rule-predicate-matches"},
"#document-rule-url-pattern-predicate": {"displayText":"document rule url pattern predicate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"document rule url pattern predicate","type":"dfn","url":"#document-rule-url-pattern-predicate"},
"#document-rule-url-pattern-predicate-patterns": {"displayText":"patterns","export":true,"for_":["document rule URL pattern predicate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"patterns","type":"dfn","url":"#document-rule-url-pattern-predicate-patterns"},
"#find-matching-links": {"displayText":"find matching links","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"find matching links","type":"dfn","url":"#find-matching-links"},
"#grammardef-inline-speculation-rules": {"displayText":"'inline-speculation-rules'","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"'inline-speculation-rules'","type":"grammar","url":"#grammardef-inline-speculation-rules"},
"#grammardef-keyword-source": {"displayText":"keyword-source","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"keyword-source","type":"grammar","url":"#grammardef-keyword-source"},
"#grammardef-strict-dynamic": {"displayText":"'strict-dynamic'","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"'strict-dynamic'","type":"grammar","url":"#grammardef-strict-dynamic"},
"#grammardef-unsafe-hashes": {"displayText":"'unsafe-hashes'","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"'unsafe-hashes'","type":"grammar","url":"#grammardef-unsafe-hashes"},
"#grammardef-unsafe-inline": {"displayText":"'unsafe-inline'","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"'unsafe-inline'","type":"grammar","url":"#grammardef-unsafe-inline"},
"#http-headerdef-speculation-rules": {"displayText":"speculation-rules","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"speculation-rules","type":"http-header","url":"#http-headerdef-speculation-rules"},
"#less-eager": {"displayText":"less eager","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"less eager","type":"dfn","url":"#less-eager"},
"#parse-a-document-rule-predicate": {"displayText":"parse a document rule predicate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"parse a document rule predicate","type":"dfn","url":"#parse-a-document-rule-predicate"},
"#parse-a-speculation-rule": {"displayText":"parse a speculation rule","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"parse a speculation rule","type":"dfn","url":"#parse-a-speculation-rule"},
"#parse-speculation-rules": {"displayText":"parse speculation rules","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"parse speculation rules","type":"dfn","url":"#parse-speculation-rules"},
"#pending-external-speculation-rule-resource": {"displayText":"pending external speculation rule resource","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"pending external speculation rule resource","type":"dfn","url":"#pending-external-speculation-rule-resource"},
"#pending-external-speculation-rule-resource-cancel-and-discard": {"displayText":"cancel and discard","export":true,"for_":["pending external speculation rule resource"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"cancel and discard","type":"dfn","url":"#pending-external-speculation-rule-resource-cancel-and-discard"},
"#pending-external-speculation-rule-resource-controller": {"displayText":"controller","export":true,"for_":["pending external speculation rule resource"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"controller","type":"dfn","url":"#pending-external-speculation-rule-resource-controller"},
"#pending-external-speculation-rule-resource-fetch": {"displayText":"fetch","export":true,"for_":["pending external speculation rule resource"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"fetch","type":"dfn","url":"#pending-external-speculation-rule-resource-fetch"},
"#pending-external-speculation-rule-resource-url": {"displayText":"url","export":true,"for_":["pending external speculation rule resource"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"url","type":"dfn","url":"#pending-external-speculation-rule-resource-url"},
"#prefetch-candidate": {"displayText":"prefetch candidate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"prefetch candidate","type":"dfn","url":"#prefetch-candidate"},
"#prefetch-candidate-anonymization-policy": {"displayText":"anonymization policy","export":true,"for_":["prefetch candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"anonymization policy","type":"dfn","url":"#prefetch-candidate-anonymization-policy"},
"#prefetch-candidate-continues": {"displayText":"continues","export":true,"for_":["prefetch candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"continues","type":"dfn","url":"#prefetch-candidate-continues"},
"#prerender-candidate": {"displayText":"prerender candidate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"prerender candidate","type":"dfn","url":"#prerender-candidate"},
"#prerender-candidate-target-navigable-name-hint": {"displayText":"target navigable name hint","export":true,"for_":["prerender candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"target navigable name hint","type":"dfn","url":"#prerender-candidate-target-navigable-name-hint"},
"#process-pending-external-speculation-rule-resources": {"displayText":"process pending external speculation rule resources","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"process pending external speculation rule resources","type":"dfn","url":"#process-pending-external-speculation-rule-resources"},
"#process-the-speculation-rules-header": {"displayText":"process the speculation-rules header","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"process the speculation-rules header","type":"dfn","url":"#process-the-speculation-rules-header"},
"#speculation-rule": {"displayText":"speculation rule","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"speculation rule","type":"dfn","url":"#speculation-rule"},
"#speculation-rule-eagerness": {"displayText":"eagerness","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"eagerness","type":"dfn","url":"#speculation-rule-eagerness"},
"#speculation-rule-no-vary-search-hint": {"displayText":"no-vary-search hint","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"no-vary-search hint","type":"dfn","url":"#speculation-rule-no-vary-search-hint"},
"#speculation-rule-predicate": {"displayText":"predicate","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"predicate","type":"dfn","url":"#speculation-rule-predicate"},
"#speculation-rule-referrer-policy": {"displayText":"referrer policy","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"referrer policy","type":"dfn","url":"#speculation-rule-referrer-policy"},
"#speculation-rule-requirements": {"displayText":"requirements","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"requirements","type":"dfn","url":"#speculation-rule-requirements"},
"#speculation-rule-set": {"displayText":"speculation rule set","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"speculation rule set","type":"dfn","url":"#speculation-rule-set"},
"#speculation-rule-set-prefetch-rules": {"displayText":"prefetch rules","export":true,"for_":["speculation rule set"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"prefetch rules","type":"dfn","url":"#speculation-rule-set-prefetch-rules"},
"#speculation-rule-set-prerender-rules": {"displayText":"prerender rules","export":true,"for_":["speculation rule set"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"prerender rules","type":"dfn","url":"#speculation-rule-set-prerender-rules"},
"#speculation-rule-tags": {"displayText":"tags","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"tags","type":"dfn","url":"#speculation-rule-tags"},
"#speculation-rule-target-navigable-name-hint": {"displayText":"target navigable name hint","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"target navigable name hint","type":"dfn","url":"#speculation-rule-target-navigable-name-hint"},
"#speculation-rule-urls": {"displayText":"urls","export":true,"for_":["speculation rule"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"urls","type":"dfn","url":"#speculation-rule-urls"},
"#speculation-rules-tag": {"displayText":"speculation rules tag","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"speculation rules tag","type":"dfn","url":"#speculation-rules-tag"},
"#speculative-load-candidate": {"displayText":"speculative load candidate","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"speculative load candidate","type":"dfn","url":"#speculative-load-candidate"},
"#speculative-load-candidate-eagerness": {"displayText":"eagerness","export":true,"for_":["speculative load candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"eagerness","type":"dfn","url":"#speculative-load-candidate-eagerness"},
"#speculative-load-candidate-no-vary-search-hint": {"displayText":"no-vary-search hint","export":true,"for_":["speculative load candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"no-vary-search hint","type":"dfn","url":"#speculative-load-candidate-no-vary-search-hint"},
"#speculative-load-candidate-redundant-with": {"displayText":"redundant with","export":true,"for_":["speculative load candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"redundant with","type":"dfn","url":"#speculative-load-candidate-redundant-with"},
"#speculative-load-candidate-referrer-policy": {"displayText":"referrer policy","export":true,"for_":["speculative load candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"referrer policy","type":"dfn","url":"#speculative-load-candidate-referrer-policy"},
"#speculative-load-candidate-tags": {"displayText":"tags","export":true,"for_":["speculative load candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"tags","type":"dfn","url":"#speculative-load-candidate-tags"},
"#speculative-load-candidate-url": {"displayText":"url","export":true,"for_":["speculative load candidate"],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"url","type":"dfn","url":"#speculative-load-candidate-url"},
"#type": {"displayText":"type","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"type","type":"dfn","url":"#type"},
"#valid-eagerness-strings": {"displayText":"valid eagerness strings","export":true,"for_":[],"level":"1","normative":true,"shortname":"speculation-rules","spec":"speculation-rules-1","status":"local","text":"valid eagerness strings","type":"dfn","url":"#valid-eagerness-strings"},
"https://dom.spec.whatwg.org/#concept-child-text-content": {"displayText":"child text content","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"child text content","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-child-text-content"},
"https://dom.spec.whatwg.org/#concept-document": {"displayText":"document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document"},
"https://dom.spec.whatwg.org/#concept-document-origin": {"displayText":"origin","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"origin","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"https://dom.spec.whatwg.org/#concept-node-children-changed-ext": {"displayText":"children changed steps","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"children changed steps","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-children-changed-ext"},
"https://dom.spec.whatwg.org/#concept-node-document": {"displayText":"node document","export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"node document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-document"},
"https://dom.spec.whatwg.org/#concept-shadow-including-descendant": {"displayText":"shadow-including descendant","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow-including descendant","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-shadow-including-descendant"},
"https://dom.spec.whatwg.org/#concept-shadow-including-tree-order": {"displayText":"shadow-including tree order","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"shadow-including tree order","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-shadow-including-tree-order"},
"https://dom.spec.whatwg.org/#concept-tree-root": {"displayText":"root","export":true,"for_":["tree"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"root","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-tree-root"},
"https://dom.spec.whatwg.org/#document": {"displayText":"Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#dom-parentnode-queryselector": {"displayText":"querySelector(selectors)","export":true,"for_":["ParentNode"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"querySelector(selectors)","type":"method","url":"https://dom.spec.whatwg.org/#dom-parentnode-queryselector"},
"https://dom.spec.whatwg.org/#element": {"displayText":"Element","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://drafts.csswg.org/css-contain-2/#skips-its-contents": {"displayText":"skipped contents","export":true,"for_":[],"level":"2","normative":true,"shortname":"css-contain","spec":"css-contain-2","status":"current","text":"skipped contents","type":"dfn","url":"https://drafts.csswg.org/css-contain-2/#skips-its-contents"},
"https://drafts.csswg.org/selectors-4/#any-link-pseudo": {"displayText":":any-link","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":":any-link","type":"selector","url":"https://drafts.csswg.org/selectors-4/#any-link-pseudo"},
"https://drafts.csswg.org/selectors-4/#match-a-selector-against-an-element": {"displayText":"match a selector against an element","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"match a selector against an element","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#match-a-selector-against-an-element"},
"https://drafts.csswg.org/selectors-4/#parse-a-selector": {"displayText":"parse a selector","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"parse a selector","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#parse-a-selector"},
"https://drafts.csswg.org/selectors-4/#pseudo-class": {"displayText":"pseudo-class","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"pseudo-class","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#pseudo-class"},
"https://drafts.csswg.org/selectors-4/#scoping-root": {"displayText":"scoping root","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"scoping root","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#scoping-root"},
"https://drafts.csswg.org/selectors-4/#selector": {"displayText":"selector","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":"selector","type":"dfn","url":"https://drafts.csswg.org/selectors-4/#selector"},
"https://drafts.csswg.org/selectors-4/#visited-pseudo": {"displayText":":visited","export":true,"for_":[],"level":"4","normative":true,"shortname":"selectors","spec":"selectors-4","status":"current","text":":visited","type":"selector","url":"https://drafts.csswg.org/selectors-4/#visited-pseudo"},
"https://encoding.spec.whatwg.org/#utf-8-decode": {"displayText":"UTF-8 decode","export":true,"for_":[],"level":"1","normative":true,"shortname":"encoding","spec":"encoding","status":"current","text":"utf-8 decode","type":"dfn","url":"https://encoding.spec.whatwg.org/#utf-8-decode"},
"https://fetch.spec.whatwg.org/#concept-fetch": {"displayText":"fetch","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"fetch","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-fetch"},
"https://fetch.spec.whatwg.org/#concept-header-extract-mime-type": {"displayText":"extracting a MIME type","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"extracting a mime type","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-extract-mime-type"},
"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header": {"displayText":"get a structured field value","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"get a structured field value","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header"},
"https://fetch.spec.whatwg.org/#concept-request": {"displayText":"request","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"request","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request"},
"https://fetch.spec.whatwg.org/#concept-request-client": {"displayText":"client","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"client","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-client"},
"https://fetch.spec.whatwg.org/#concept-request-credentials-mode": {"displayText":"credentials mode","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"credentials mode","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-credentials-mode"},
"https://fetch.spec.whatwg.org/#concept-request-destination": {"displayText":"destination","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"destination","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-destination"},
"https://fetch.spec.whatwg.org/#concept-request-initiator": {"displayText":"initiator","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"initiator","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-initiator"},
"https://fetch.spec.whatwg.org/#concept-request-mode": {"displayText":"mode","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"mode","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-mode"},
"https://fetch.spec.whatwg.org/#concept-request-url": {"displayText":"URL","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"url","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-url"},
"https://fetch.spec.whatwg.org/#concept-response": {"displayText":"response","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"response","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response"},
"https://fetch.spec.whatwg.org/#concept-response-header-list": {"displayText":"header list","export":true,"for_":["response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"header list","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-header-list"},
"https://fetch.spec.whatwg.org/#concept-response-status": {"displayText":"status","export":true,"for_":["response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"status","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-status"},
"https://fetch.spec.whatwg.org/#concept-response-url": {"displayText":"URL","export":true,"for_":["response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"url","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-url"},
"https://fetch.spec.whatwg.org/#credentials": {"displayText":"credentials","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"credentials","type":"dfn","url":"https://fetch.spec.whatwg.org/#credentials"},
"https://fetch.spec.whatwg.org/#fetch-controller": {"displayText":"fetch controller","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"fetch controller","type":"dfn","url":"https://fetch.spec.whatwg.org/#fetch-controller"},
"https://fetch.spec.whatwg.org/#fetch-controller-abort": {"displayText":"abort","export":true,"for_":["fetch controller"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"abort","type":"dfn","url":"https://fetch.spec.whatwg.org/#fetch-controller-abort"},
"https://fetch.spec.whatwg.org/#http-access-control-allow-origin": {"displayText":"Access-Control-Allow-Origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"access-control-allow-origin","type":"http-header","url":"https://fetch.spec.whatwg.org/#http-access-control-allow-origin"},
"https://fetch.spec.whatwg.org/#http-scheme": {"displayText":"HTTP(S) scheme","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"http(s) scheme","type":"dfn","url":"https://fetch.spec.whatwg.org/#http-scheme"},
"https://fetch.spec.whatwg.org/#ok-status": {"displayText":"ok status","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"ok status","type":"dfn","url":"https://fetch.spec.whatwg.org/#ok-status"},
"https://fetch.spec.whatwg.org/#process-response-end-of-body": {"displayText":"processResponseConsumeBody","export":true,"for_":["fetch"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"processresponseconsumebody","type":"dfn","url":"https://fetch.spec.whatwg.org/#process-response-end-of-body"},
"https://fetch.spec.whatwg.org/#requestdestination": {"displayText":"RequestDestination","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"RequestDestination","type":"enum","url":"https://fetch.spec.whatwg.org/#requestdestination"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin": {"displayText":"same origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"https://html.spec.whatwg.org/multipage/document-lifecycle.html#initialise-the-document-object": {"displayText":"create and initialize a Document object","export":false,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"create and initialize a document object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-lifecycle.html#initialise-the-document-object"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": {"displayText":"fully active","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable": {"displayText":"node navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"node navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable": {"displayText":"rules for choosing a navigable","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"rules for choosing a navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#the-rules-for-choosing-a-navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#valid-navigable-target-name-or-keyword": {"displayText":"valid navigable target name or keyword","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"valid navigable target name or keyword","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#valid-navigable-target-name-or-keyword"},
"https://html.spec.whatwg.org/multipage/dom.html#dom-document-links": {"displayText":"links","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"links","type":"attribute","url":"https://html.spec.whatwg.org/multipage/dom.html#dom-document-links"},
"https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element": {"displayText":"area","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"area","type":"element","url":"https://html.spec.whatwg.org/multipage/image-maps.html#the-area-element"},
"https://html.spec.whatwg.org/multipage/indices.html#event-error": {"displayText":"error","export":true,"for_":["Window","WorkerGlobalScope","HTMLElement","EventSource","Worker","SharedWorker","AbstractWorker"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"error","type":"event","url":"https://html.spec.whatwg.org/multipage/indices.html#event-error"},
"https://html.spec.whatwg.org/multipage/indices.html#event-load": {"displayText":"load","export":true,"for_":["Window","HTMLElement"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"load","type":"event","url":"https://html.spec.whatwg.org/multipage/indices.html#event-load"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#html-element-removing-steps": {"displayText":"HTML element removing steps","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"html element removing steps","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#html-element-removing-steps"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"displayText":"in parallel","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href": {"displayText":"href","export":true,"for_":["a","area"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"href","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href"},
"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-referrerpolicy": {"displayText":"referrerpolicy","export":true,"for_":["a","area"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"referrerpolicy","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-referrerpolicy"},
"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-rel": {"displayText":"rel","export":true,"for_":["a","area"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"rel","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-rel"},
"https://html.spec.whatwg.org/multipage/links.html#concept-hyperlink-url": {"displayText":"url","export":true,"for_":["HTMLHyperlinkElementUtils"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"url","type":"dfn","url":"https://html.spec.whatwg.org/multipage/links.html#concept-hyperlink-url"},
"https://html.spec.whatwg.org/multipage/links.html#dom-hyperlink-href": {"displayText":"href","export":true,"for_":["HTMLHyperlinkElementUtils"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"href","type":"attribute","url":"https://html.spec.whatwg.org/multipage/links.html#dom-hyperlink-href"},
"https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2": {"displayText":"following a hyperlink","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"following a hyperlink","type":"dfn","url":"https://html.spec.whatwg.org/multipage/links.html#following-hyperlinks-2"},
"https://html.spec.whatwg.org/multipage/links.html#htmlhyperlinkelementutils": {"displayText":"HTMLHyperlinkElementUtils","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLHyperlinkElementUtils","type":"interface","url":"https://html.spec.whatwg.org/multipage/links.html#htmlhyperlinkelementutils"},
"https://html.spec.whatwg.org/multipage/links.html#link-type-noreferrer": {"displayText":"noreferrer","export":true,"for_":["a/rel"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"noreferrer","type":"attr-value","url":"https://html.spec.whatwg.org/multipage/links.html#link-type-noreferrer"},
"https://html.spec.whatwg.org/multipage/rendering.html#being-rendered": {"displayText":"being rendered","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"being rendered","type":"dfn","url":"https://html.spec.whatwg.org/multipage/rendering.html#being-rendered"},
"https://html.spec.whatwg.org/multipage/scripting.html#already-started": {"displayText":"already started","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"already started","type":"dfn","url":"https://html.spec.whatwg.org/multipage/scripting.html#already-started"},
"https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result": {"displayText":"result","export":true,"for_":["HTMLScriptElement"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"result","type":"dfn","url":"https://html.spec.whatwg.org/multipage/scripting.html#concept-script-result"},
"https://html.spec.whatwg.org/multipage/scripting.html#concept-script-type": {"displayText":"type","export":true,"for_":["HTMLScriptElement"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"type","type":"dfn","url":"https://html.spec.whatwg.org/multipage/scripting.html#concept-script-type"},
"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-src": {"displayText":"src","export":true,"for_":["HTMLScriptElement"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"src","type":"attribute","url":"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-src"},
"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-supports": {"displayText":"supports(type)","export":true,"for_":["HTMLScriptElement"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"supports(type)","type":"method","url":"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-supports"},
"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-type": {"displayText":"type","export":true,"for_":["HTMLScriptElement"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"type","type":"attribute","url":"https://html.spec.whatwg.org/multipage/scripting.html#dom-script-type"},
"https://html.spec.whatwg.org/multipage/scripting.html#execute-the-script-element": {"displayText":"execute the script element","export":false,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"execute the script element","type":"dfn","url":"https://html.spec.whatwg.org/multipage/scripting.html#execute-the-script-element"},
"https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement": {"displayText":"HTMLScriptElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLScriptElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/scripting.html#htmlscriptelement"},
"https://html.spec.whatwg.org/multipage/scripting.html#mark-as-ready": {"displayText":"mark as ready","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"mark as ready","type":"dfn","url":"https://html.spec.whatwg.org/multipage/scripting.html#mark-as-ready"},
"https://html.spec.whatwg.org/multipage/scripting.html#prepare-the-script-element": {"displayText":"prepare the script element","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"prepare the script element","type":"dfn","url":"https://html.spec.whatwg.org/multipage/scripting.html#prepare-the-script-element"},
"https://html.spec.whatwg.org/multipage/scripting.html#script": {"displayText":"script","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"script","type":"element","url":"https://html.spec.whatwg.org/multipage/scripting.html#script"},
"https://html.spec.whatwg.org/multipage/semantics.html#get-an-element's-target": {"displayText":"get an element's target","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"get an element's target","type":"dfn","url":"https://html.spec.whatwg.org/multipage/semantics.html#get-an-element's-target"},
"https://html.spec.whatwg.org/multipage/semantics.html#the-style-element": {"displayText":"style","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"style","type":"element","url":"https://html.spec.whatwg.org/multipage/semantics.html#the-style-element"},
"https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element": {"displayText":"a","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"a","type":"element","url":"https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element"},
"https://html.spec.whatwg.org/multipage/urls-and-fetching.html#attr-nonce": {"displayText":"nonce","export":true,"for_":["htmlsvg-global"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"nonce","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/urls-and-fetching.html#attr-nonce"},
"https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url": {"displayText":"document base URL","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"document base url","type":"dfn","url":"https://html.spec.whatwg.org/multipage/urls-and-fetching.html#document-base-url"},
"https://html.spec.whatwg.org/multipage/webappapis.html#await-a-stable-state": {"displayText":"await a stable state","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"await a stable state","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#await-a-stable-state"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"displayText":"relevant global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source": {"displayText":"DOM manipulation task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"dom manipulation task source","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"},
"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source": {"displayText":"networking task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"networking task source","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task": {"displayText":"queue a global task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a global task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": {"displayText":"relevant settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#secure-context": {"displayText":"secure context","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"secure context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"},
"https://html.spec.whatwg.org/multipage/webappapis.html#synchronous-section": {"displayText":"synchronous section","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"synchronous section","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#synchronous-section"},
"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#iref-default-url-search-variance": {"displayText":"default URL search variance","export":true,"for_":[],"level":"","normative":true,"shortname":"no-vary-search","spec":"no-vary-search","status":"anchor-block","text":"default url search variance","type":"dfn","url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#iref-default-url-search-variance"},
"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-comparing": {"displayText":"equivalent modulo search variance","export":true,"for_":[],"level":"","normative":true,"shortname":"no-vary-search","spec":"no-vary-search","status":"anchor-block","text":"equivalent modulo search variance","type":"dfn","url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-comparing"},
"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-data-model": {"displayText":"URL search variance","export":true,"for_":[],"level":"","normative":true,"shortname":"no-vary-search","spec":"no-vary-search","status":"anchor-block","text":"url search variance","type":"dfn","url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-data-model"},
"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-obtain-a-url-search-varianc": {"displayText":"obtain a URL search variance","export":true,"for_":[],"level":"","normative":true,"shortname":"no-vary-search","spec":"no-vary-search","status":"anchor-block","text":"obtain a url search variance","type":"dfn","url":"https://httpwg.org/http-extensions/draft-ietf-httpbis-no-vary-search.html#name-obtain-a-url-search-varianc"},
"https://httpwg.org/specs/rfc8941.html#list": {"displayText":"list","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"list","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#list"},
"https://httpwg.org/specs/rfc8941.html#string": {"displayText":"string","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"string","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#string"},
"https://httpwg.org/specs/rfc8941.html#top": {"displayText":"structured header","export":true,"for_":[],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"structured header","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#top"},
"https://infra.spec.whatwg.org/#ascii-case-insensitive": {"displayText":"ASCII case-insensitive","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii case-insensitive","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-case-insensitive"},
"https://infra.spec.whatwg.org/#ascii-string": {"displayText":"ASCII string","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii string","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-string"},
"https://infra.spec.whatwg.org/#assert": {"displayText":"assert","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#byte-sequence": {"displayText":"byte sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"byte sequence","type":"dfn","url":"https://infra.spec.whatwg.org/#byte-sequence"},
"https://infra.spec.whatwg.org/#code-unit-less-than": {"displayText":"code unit less than","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"code unit less than","type":"dfn","url":"https://infra.spec.whatwg.org/#code-unit-less-than"},
"https://infra.spec.whatwg.org/#iteration-continue": {"displayText":"continue","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"continue","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-continue"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-contain": {"displayText":"contain","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-extend": {"displayText":"extend","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"extend","type":"dfn","url":"https://infra.spec.whatwg.org/#list-extend"},
"https://infra.spec.whatwg.org/#list-iterate": {"displayText":"for each","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-remove": {"displayText":"remove","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://infra.spec.whatwg.org/#list-replace": {"displayText":"replace","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"replace","type":"dfn","url":"https://infra.spec.whatwg.org/#list-replace"},
"https://infra.spec.whatwg.org/#list-size": {"displayText":"size","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"size","type":"dfn","url":"https://infra.spec.whatwg.org/#list-size"},
"https://infra.spec.whatwg.org/#list-sort-in-ascending-order": {"displayText":"sort in ascending order","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"sort in ascending order","type":"dfn","url":"https://infra.spec.whatwg.org/#list-sort-in-ascending-order"},
"https://infra.spec.whatwg.org/#map-exists": {"displayText":"exist","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"exist","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#map-key": {"displayText":"key","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"key","type":"dfn","url":"https://infra.spec.whatwg.org/#map-key"},
"https://infra.spec.whatwg.org/#ordered-map": {"displayText":"map","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"map","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-map"},
"https://infra.spec.whatwg.org/#ordered-set": {"displayText":"ordered set","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered set","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-set"},
"https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value": {"displayText":"parse a JSON string to an Infra value","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"parse a json string to an infra value","type":"dfn","url":"https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value"},
"https://infra.spec.whatwg.org/#set-append": {"displayText":"append","export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#string": {"displayText":"string","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://infra.spec.whatwg.org/#string-is": {"displayText":"is","export":true,"for_":["string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"is","type":"dfn","url":"https://infra.spec.whatwg.org/#string-is"},
"https://infra.spec.whatwg.org/#struct": {"displayText":"struct","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"struct","type":"dfn","url":"https://infra.spec.whatwg.org/#struct"},
"https://infra.spec.whatwg.org/#struct-item": {"displayText":"item","export":true,"for_":["struct","tuple"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#struct-item"},
"https://mimesniff.spec.whatwg.org/#mime-type-essence": {"displayText":"essence","export":true,"for_":["MIME type"],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"essence","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#mime-type-essence"},
"https://url.spec.whatwg.org/#concept-basic-url-parser": {"displayText":"basic URL parser","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"basic url parser","type":"dfn","url":"https://url.spec.whatwg.org/#concept-basic-url-parser"},
"https://url.spec.whatwg.org/#concept-url": {"displayText":"URL","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url"},
"https://url.spec.whatwg.org/#concept-url-scheme": {"displayText":"scheme","export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"scheme","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-scheme"},
"https://url.spec.whatwg.org/#valid-url-string": {"displayText":"valid URL string","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"valid url string","type":"dfn","url":"https://url.spec.whatwg.org/#valid-url-string"},
"https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-infra-value": {"displayText":"build a URL pattern from an Infra value","export":true,"for_":[],"level":"1","normative":true,"shortname":"urlpattern","spec":"urlpattern","status":"current","text":"build a url pattern from an infra value","type":"dfn","url":"https://urlpattern.spec.whatwg.org/#build-a-url-pattern-from-an-infra-value"},
"https://urlpattern.spec.whatwg.org/#url-pattern": {"displayText":"URL pattern","export":true,"for_":[],"level":"1","normative":true,"shortname":"urlpattern","spec":"urlpattern","status":"current","text":"url pattern","type":"dfn","url":"https://urlpattern.spec.whatwg.org/#url-pattern"},
"https://urlpattern.spec.whatwg.org/#url-pattern-match": {"displayText":"match","export":true,"for_":["URL pattern"],"level":"1","normative":true,"shortname":"urlpattern","spec":"urlpattern","status":"current","text":"match","type":"dfn","url":"https://urlpattern.spec.whatwg.org/#url-pattern-match"},
"https://w3c.github.io/webappsec-csp/#grammardef-base64-value": {"displayText":"base64-value","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"base64-value","type":"grammar","url":"https://w3c.github.io/webappsec-csp/#grammardef-base64-value"},
"https://w3c.github.io/webappsec-csp/#grammardef-hash-source": {"displayText":"hash-source","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"hash-source","type":"grammar","url":"https://w3c.github.io/webappsec-csp/#grammardef-hash-source"},
"https://w3c.github.io/webappsec-csp/#grammardef-nonce-source": {"displayText":"nonce-source","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"nonce-source","type":"grammar","url":"https://w3c.github.io/webappsec-csp/#grammardef-nonce-source"},
"https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-dest": {"displayText":"Sec-Fetch-Dest","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch-metadata","spec":"fetch-metadata","status":"current","text":"sec-fetch-dest","type":"http-header","url":"https://w3c.github.io/webappsec-fetch-metadata/#http-headerdef-sec-fetch-dest"},
"https://w3c.github.io/webappsec-mixed-content/#blockable-mixed-content": {"displayText":"blockable mixed content","export":true,"for_":[],"level":"1","normative":true,"shortname":"mixed-content","spec":"mixed-content","status":"current","text":"blockable mixed content","type":"dfn","url":"https://w3c.github.io/webappsec-mixed-content/#blockable-mixed-content"},
"https://w3c.github.io/webappsec-mixed-content/#should-block-fetch": {"displayText":"Should fetching request be blocked as mixed content?","export":true,"for_":[],"level":"1","normative":true,"shortname":"mixed-content","spec":"mixed-content","status":"current","text":"should fetching request be blocked as mixed content?","type":"dfn","url":"https://w3c.github.io/webappsec-mixed-content/#should-block-fetch"},
"https://w3c.github.io/webappsec-referrer-policy/#referrer-policy": {"displayText":"referrer policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"referrer-policy","spec":"referrer-policy","status":"current","text":"referrer policy","type":"dfn","url":"https://w3c.github.io/webappsec-referrer-policy/#referrer-policy"},
"https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer": {"displayText":"\"no-referrer\"","export":true,"for_":[],"level":"1","normative":true,"shortname":"referrer-policy","spec":"referrer-policy","status":"current","text":"\"no-referrer\"","type":"dfn","url":"https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-no-referrer"},
"https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url": {"displayText":"potentially trustworthy URL","export":true,"for_":[],"level":"1","normative":true,"shortname":"secure-contexts","spec":"secure-contexts","status":"current","text":"potentially trustworthy url","type":"dfn","url":"https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url"},
"prefetch.html#cross-origin-prefetch-ip-anonymization-policy": {"displayText":"cross-origin prefetch IP anonymization policy","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"cross-origin prefetch ip anonymization policy","type":"dfn","url":"prefetch.html#cross-origin-prefetch-ip-anonymization-policy"},
"prefetch.html#cross-origin-prefetch-ip-anonymization-policy-origin": {"displayText":"origin","export":true,"for_":["cross-origin prefetch IP anonymization policy"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"origin","type":"dfn","url":"prefetch.html#cross-origin-prefetch-ip-anonymization-policy-origin"},
"prefetch.html#document-prefetch-records": {"displayText":"prefetch records","export":true,"for_":["Document"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"prefetch records","type":"dfn","url":"prefetch.html#document-prefetch-records"},
"prefetch.html#has-a-matching-prefetch-record": {"displayText":"has a matching prefetch record","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"has a matching prefetch record","type":"dfn","url":"prefetch.html#has-a-matching-prefetch-record"},
"prefetch.html#prefetch": {"displayText":"prefetch","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"prefetch","type":"dfn","url":"prefetch.html#prefetch"},
"prefetch.html#prefetch-ip-anonymization-policy": {"displayText":"prefetch IP anonymization policy","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"prefetch ip anonymization policy","type":"dfn","url":"prefetch.html#prefetch-ip-anonymization-policy"},
"prefetch.html#prefetch-record": {"displayText":"prefetch record","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"prefetch record","type":"dfn","url":"prefetch.html#prefetch-record"},
"prefetch.html#prefetch-record-anonymization-policy": {"displayText":"anonymization policy","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"anonymization policy","type":"dfn","url":"prefetch.html#prefetch-record-anonymization-policy"},
"prefetch.html#prefetch-record-cancel-and-discard": {"displayText":"cancel and discard","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"cancel and discard","type":"dfn","url":"prefetch.html#prefetch-record-cancel-and-discard"},
"prefetch.html#prefetch-record-label": {"displayText":"label","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"label","type":"dfn","url":"prefetch.html#prefetch-record-label"},
"prefetch.html#prefetch-record-matches-a-url": {"displayText":"matches a URL","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"matches a url","type":"dfn","url":"prefetch.html#prefetch-record-matches-a-url"},
"prefetch.html#prefetch-record-no-vary-search-hint": {"displayText":"No-Vary-Search hint","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"no-vary-search hint","type":"dfn","url":"prefetch.html#prefetch-record-no-vary-search-hint"},
"prefetch.html#prefetch-record-prerendering-traversable": {"displayText":"prerendering traversable","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"prerendering traversable","type":"dfn","url":"prefetch.html#prefetch-record-prerendering-traversable"},
"prefetch.html#prefetch-record-referrer-policy": {"displayText":"referrer policy","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"referrer policy","type":"dfn","url":"prefetch.html#prefetch-record-referrer-policy"},
"prefetch.html#prefetch-record-state": {"displayText":"state","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"state","type":"dfn","url":"prefetch.html#prefetch-record-state"},
"prefetch.html#prefetch-record-tags": {"displayText":"tags","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"tags","type":"dfn","url":"prefetch.html#prefetch-record-tags"},
"prefetch.html#prefetch-record-url": {"displayText":"URL","export":true,"for_":["prefetch record"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"url","type":"dfn","url":"prefetch.html#prefetch-record-url"},
"prefetch.html#sec-speculation-tags-header": {"displayText":"Sec-Speculation-Tags","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"sec-speculation-tags","type":"http-header","url":"prefetch.html#sec-speculation-tags-header"},
"prerendering.html#prerendering-traversable": {"displayText":"prerendering traversable","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"prerendering traversable","type":"dfn","url":"prerendering.html#prerendering-traversable"},
"prerendering.html#prerendering-traversable-activate": {"displayText":"activate","export":true,"for_":["prerendering traversable"],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"activate","type":"dfn","url":"prerendering.html#prerendering-traversable-activate"},
"prerendering.html#start-referrer-initiated-prerendering": {"displayText":"start referrer-initiated prerendering","export":true,"for_":[],"level":"","normative":true,"shortname":"nav-speculation","spec":"nav-speculation","status":"anchor-block","text":"start referrer-initiated prerendering","type":"dfn","url":"prerendering.html#start-referrer-initiated-prerendering"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>