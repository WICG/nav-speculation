<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Prerendering Revamped</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 44af0bf3e, updated Fri Jul 29 17:05:16 2022 -0700" name="generator">
  <link href="https://wicg.github.io/nav-speculation/prerendering.html" rel="canonical">
<style>
/* domintro and XXX from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}

.XXX {
  color: #D50606;
  background: white;
  border: solid #D50606;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Prerendering Revamped</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2022-09-23">23 September 2022</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/nav-speculation/prerendering.html">https://wicg.github.io/nav-speculation/prerendering.html</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/WICG/nav-speculation/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:d@domenic.me">Domenic Denicola</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:domfarolino@gmail.com">Dominic Farolino</a> (<a class="p-org org" href="https://www.google.com/">Google</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2022 the Contributors to the Prerendering Revamped Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document contains a collection of specification patches for well-specified prerendering.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#prerendering-bcs"><span class="secno">1</span> <span class="content">Prerendering browsing context infrastructure</span></a>
     <ol class="toc">
      <li><a href="#document-prerendering"><span class="secno">1.1</span> <span class="content">Extensions to the <code class="idl"><span>Document</span></code> interface</span></a>
      <li><a href="#prerendering-bcs-subsection"><span class="secno">1.2</span> <span class="content">Prerendering browsing contexts</span></a>
      <li><a href="#creating-bcs-patch"><span class="secno">1.3</span> <span class="content">Modifications to creating browsing contexts</span></a>
     </ol>
    <li>
     <a href="#navigation"><span class="secno">2</span> <span class="content">Navigation and session history</span></a>
     <ol class="toc">
      <li><a href="#navigate-activation"><span class="secno">2.1</span> <span class="content">Allowing activation in place of navigation</span></a>
      <li><a href="#navigate-fetch-patch"><span class="secno">2.2</span> <span class="content">Navigation fetch changes</span></a>
      <li><a href="#delay-crossorigin"><span class="secno">2.3</span> <span class="content">Delaying cross-origin nested browsing context navigations</span></a>
      <li><a href="#always-replacement"><span class="secno">2.4</span> <span class="content">Maintaining a trivial session history</span></a>
      <li><a href="#interaction-with-workers"><span class="secno">2.5</span> <span class="content">Interaction with Worker Lifetime</span></a>
      <li><a href="#cleanup-upon-discarding"><span class="secno">2.6</span> <span class="content">Cleanup upon discarding a <code class="idl"><span>Document</span></code></span></a>
     </ol>
    <li>
     <a href="#interaction-with-other-specs"><span class="secno">3</span> <span class="content">Interaction with other specifications and concepts</span></a>
     <ol class="toc">
      <li><a href="#interaction-with-visibility-state"><span class="secno">3.1</span> <span class="content">Interaction with Page Visibility</span></a>
      <li><a href="#interaction-with-system-focus"><span class="secno">3.2</span> <span class="content">Interaction with system focus</span></a>
      <li><a href="#performance-navigation-timing-extension"><span class="secno">3.3</span> <span class="content">Extensions to the <code class="idl"><span>PerformanceNavigationTiming</span></code> interface</span></a>
      <li><a href="#client-hint-cache"><span class="secno">3.4</span> <span class="content">Interaction with Client Hint Cache</span></a>
     </ol>
    <li><a href="#supports-loading-mode"><span class="secno">4</span> <span class="content">The `<span><code>Supports-Loading-Mode</code></span>` HTTP response header</span></a>
    <li>
     <a href="#nonsense-behaviors"><span class="secno">5</span> <span class="content">Preventing nonsensical behaviors</span></a>
     <ol class="toc">
      <li><a href="#patch-window-apis"><span class="secno">5.1</span> <span class="content">APIs for creating and navigating browsing contexts by name</span></a>
     </ol>
    <li>
     <a href="#intrusive-behaviors"><span class="secno">6</span> <span class="content">Preventing intrusive behaviors</span></a>
     <ol class="toc">
      <li><a href="#patch-downloading"><span class="secno">6.1</span> <span class="content">Downloading resources</span></a>
      <li><a href="#patch-modals"><span class="secno">6.2</span> <span class="content">User prompts</span></a>
      <li>
       <a href="#delay-async-apis"><span class="secno">6.3</span> <span class="content">Delaying async API results</span></a>
       <ol class="toc">
        <li><a href="#delay-while-prerendering"><span class="secno">6.3.1</span> <span class="content">The <code class="idl"><span>[DelayWhilePrerendering]</span></code> extended attribute</span></a>
        <li><a href="#patch-service-workers"><span class="secno">6.3.2</span> <span class="content">Service Workers</span></a>
        <li><a href="#patch-broadcast-channel"><span class="secno">6.3.3</span> <span class="content">BroadcastChannel</span></a>
        <li><a href="#patch-geolocation"><span class="secno">6.3.4</span> <span class="content">Geolocation API</span></a>
        <li><a href="#patch-serial"><span class="secno">6.3.5</span> <span class="content">Web Serial API</span></a>
        <li><a href="#patch-notifications"><span class="secno">6.3.6</span> <span class="content">Notifications API</span></a>
        <li><a href="#patch-midi"><span class="secno">6.3.7</span> <span class="content">Web MIDI API</span></a>
        <li><a href="#patch-idle-detection"><span class="secno">6.3.8</span> <span class="content">Idle Detection API</span></a>
        <li><a href="#patch-generic-sensor"><span class="secno">6.3.9</span> <span class="content">Generic Sensor API</span></a>
        <li><a href="#patch-web-nfc"><span class="secno">6.3.10</span> <span class="content">Web NFC</span></a>
        <li><a href="#patch-battery"><span class="secno">6.3.11</span> <span class="content">Battery Status API</span></a>
        <li><a href="#patch-orientation-lock"><span class="secno">6.3.12</span> <span class="content">Screen Orientation API</span></a>
        <li><a href="#patch-gamepads"><span class="secno">6.3.13</span> <span class="content">Gamepad</span></a>
        <li><a href="#eme-patch"><span class="secno">6.3.14</span> <span class="content">Encrypted Media Extensions</span></a>
        <li><a href="#autoplay-patch"><span class="secno">6.3.15</span> <span class="content">Media Autoplay</span></a>
        <li><a href="#media-capture-patch"><span class="secno">6.3.16</span> <span class="content">Media Capture and Streams</span></a>
        <li><a href="#audio-output-patch"><span class="secno">6.3.17</span> <span class="content">Audio Output Devices API</span></a>
        <li><a href="#push-patch"><span class="secno">6.3.18</span> <span class="content">Push API</span></a>
        <li><a href="#background-fetch-patch"><span class="secno">6.3.19</span> <span class="content">Background Fetch</span></a>
        <li><a href="#persist-patch"><span class="secno">6.3.20</span> <span class="content">Storage API</span></a>
        <li><a href="#screen-capture-patch"><span class="secno">6.3.21</span> <span class="content">Screen Capture</span></a>
        <li><a href="#webusb-patch"><span class="secno">6.3.22</span> <span class="content">WebUSB API</span></a>
        <li><a href="#web-bluetooth-patch"><span class="secno">6.3.23</span> <span class="content">Web Bluetooth</span></a>
        <li><a href="#webhid-patch"><span class="secno">6.3.24</span> <span class="content">WebHID API</span></a>
        <li><a href="#webxr-patch"><span class="secno">6.3.25</span> <span class="content">WebXR Device API</span></a>
        <li><a href="#credential-manamgenet-patch"><span class="secno">6.3.26</span> <span class="content">Credential Management</span></a>
        <li><a href="#web-speech-patch"><span class="secno">6.3.27</span> <span class="content">Web Speech API</span></a>
        <li><a href="#web-locks-patch"><span class="secno">6.3.28</span> <span class="content">Web Locks API</span></a>
       </ol>
      <li><a href="#implicitly-restricted"><span class="secno">6.4</span> <span class="content">Implicitly restricted APIs</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="prerendering-bcs"><span class="secno">1. </span><span class="content">Prerendering browsing context infrastructure</span><a class="self-link" href="#prerendering-bcs"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="document-prerendering"><span class="secno">1.1. </span><span class="content">Extensions to the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> interface</span><a class="self-link" href="#document-prerendering"></a></h3>
   <p>We’d modify <a data-link-type="biblio" href="#biblio-html">[HTML]</a>'s centralized definition of <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> as follows:</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②"><c- g>Document</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-prerendering" id="ref-for-dom-document-prerendering"><c- g>prerendering</c-></a>;

    // Under "special event handler IDL attributes that only apply to Document objects"
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-document-onprerenderingchange" id="ref-for-dom-document-onprerenderingchange"><c- g>onprerenderingchange</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-onprerenderingchange"><code>onprerenderingchange</code></dfn> attribute is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attribute</a> corresponding to the <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="event" data-export id="eventdef-document-prerenderingchange"><code>prerenderingchange</code></dfn> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event type</a>. (We would update the corresponding table in <a data-link-type="biblio" href="#biblio-html">[HTML]</a>, which currently only contains <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#handler-onreadystatechange" id="ref-for-handler-onreadystatechange">onreadystatechange</a></code>.)</p>
   <p>As is customary for <a data-link-type="biblio" href="#biblio-html">[HTML]</a>, the definition of <code class="idl"><a data-link-type="idl" href="#dom-document-prerendering" id="ref-for-dom-document-prerendering①">prerendering</a></code> would be located in another section of the spec; we’d place it in the new section introduced below:</p>
   <h3 class="heading settled" data-level="1.2" id="prerendering-bcs-subsection"><span class="secno">1.2. </span><span class="content">Prerendering browsing contexts</span><a class="self-link" href="#prerendering-bcs-subsection"></a></h3>
   <p><em>The following section would be added as a new sub-section of <a data-link-type="biblio" href="#biblio-html">[HTML]</a>'s <a href="https://html.spec.whatwg.org/multipage/browsers.html#windows">Browsing contexts</a> section.</em></p>
   <p>Every <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context">browsing context</a> has a <dfn class="dfn-paneled" data-dfn-for="browsing context" data-dfn-type="dfn" data-noexport id="browsing-context-loading-mode">loading mode</dfn>, which is one of the following:</p>
   <dl>
    <dt data-md>"<code>default</code>"
    <dd data-md>
     <p>No special considerations are applied to content loaded in this browsing context</p>
    <dt data-md>"<code>prerender</code>"
    <dd data-md>
     <p>This browsing context is displaying prerendered content</p>
   </dl>
   <p>By default, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①">browsing context</a>'s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode">loading mode</a> is "<code>default</code>". A browsing context whose <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode①">loading mode</a> is "<code>prerender</code>" is known as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="prerendering-browsing-context">prerendering browsing context</dfn>.</p>
   <p class="note" role="note">Although there are only two values for the <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode②">loading mode</a>, we use a flexible structure in anticipation of other future loading modes, such as those provided by fenced frames, portals, and uncredentialed (cross-site) prerendering. It’s not yet clear whether that anticipation is correct; if, as those features gain full specifications, it turns out not to be, we will instead convert this into a boolean. </p>
   <dl class="domintro">
    <dt><code>document . <code class="idl"><a data-link-type="idl" href="#dom-document-prerendering" id="ref-for-dom-document-prerendering②">prerendering</a></code></code>
    <dd>Returns true if the page is being presented in a non-interactive "prerendering-like" context. In the future, this would include a visible document in a <code>&lt;portal></code> element, both when loaded into it or via predecessor adoption. 
   </dl>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-prerendering"><code>prerendering</code></dfn> getter steps are to return true if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a> has a non-null <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc">browsing context</a> that is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context">prerendering browsing context</a>; otherwise, false.</p>
   <hr>
   <p>A <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①">prerendering browsing context</a> is <dfn class="dfn-paneled" data-dfn-for="prerendering browsing context" data-dfn-type="dfn" data-noexport id="prerendering-browsing-context-empty">empty</dfn> if the only entry in its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history">session history</a> is the initial <code>about:blank</code> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code>.</p>
   <p>Every <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-noexport id="document-prerendering-browsing-contexts-map">prerendering browsing contexts map</dfn>, which is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">ordered map</a> of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URLs</a> to <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②">prerendering browsing contexts</a>. This is used to fulfill <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate">navigations</a> to a given URL by instead <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate">activating</a> the corresponding prerendering browsing context.</p>
   <p>Every <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-noexport id="document-post-prerendering-activation-steps-list">post-prerendering activation steps list</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> where each <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item">item</a> is a series of algorithm steps. For convenience, we define the <dfn class="dfn-paneled" data-dfn-for="platform object" data-dfn-type="dfn" data-noexport id="platform-object-post-prerendering-activation-steps-list">post-prerendering activation steps list</dfn> for any platform object <var>platformObject</var> as:</p>
   <dl class="switch">
    <dt data-md>If <var>platformObject</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node" id="ref-for-concept-node">node</a>
    <dd data-md>
     <ol>
      <li data-md>
       <p>Return <var>platformObject</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>'s <a data-link-type="dfn" href="#document-post-prerendering-activation-steps-list" id="ref-for-document-post-prerendering-activation-steps-list">post-prerendering activation steps list</a>.</p>
     </ol>
    <dt data-md>Otherwise
    <dd data-md>
     <ol>
      <li data-md>
       <p class="assertion">Assert: <var>platformObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window">Window</a></code> object.</p>
     </ol>
    <dd data-md>
     <ol>
      <li data-md>
       <p>Return <var>platformObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window">associated Document</a>'s <a data-link-type="dfn" href="#document-post-prerendering-activation-steps-list" id="ref-for-document-post-prerendering-activation-steps-list①">post-prerendering activation steps list</a>.</p>
     </ol>
   </dl>
   <p>Every <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code> has an <dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-noexport id="document-activation-start-time">activation start time</dfn>, which is initially a <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp">DOMHighResTimeStamp</a></code> with a time value of zero.</p>
   <p class="note" role="note">This is used to keep the time immediately after <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document" id="ref-for-prompt-to-unload-a-document">prompting to unload</a> the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document">active document</a> of the previous <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context②">browsing context</a>. </p>
   <div class="algorithm" data-algorithm="User-agent initiated prerendering">
     <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent">User agents</a> may choose to initiate prerendering without a predecessor document, for example as a result of the address bar or other browser user interactions. 
    <p>To <dfn data-dfn-type="dfn" data-export id="start-user-agent-initiated-prerendering">start user-agent initiated prerendering<a class="self-link" href="#start-user-agent-initiated-prerendering"></a></dfn> given a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a> <var>url</var>:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>startingURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme">scheme</a> is an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-scheme" id="ref-for-http-scheme">HTTP(S) scheme</a>.</p>
     <li data-md>
      <p>Let <var>bc</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-top-level-browsing-context" id="ref-for-creating-a-new-top-level-browsing-context">creating a new top-level browsing context</a>.</p>
     <li data-md>
      <p>Set <var>bc</var>’s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode③">loading mode</a> to "<code>prerender</code>".</p>
     <li data-md>
      <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a> whose <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url">URL</a> is <var>startingURL</var> and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy" id="ref-for-concept-request-referrer-policy">referrer policy</a> is "<code>no-referrer</code>".</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①">Navigate</a> <var>bc</var> to <var>request</var>.</p>
     <li data-md>
      <p>When the user indicates they wish to commit the navigation:</p>
      <ol>
       <li data-md>
        <p>Let <var>unsafe time</var> be the <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-3/#dfn-unsafe-shared-current-time" id="ref-for-dfn-unsafe-shared-current-time">unsafe shared current time</a>.</p>
       <li data-md>
        <p>Update the user agent’s user interface to present <var>bc</var>, e.g., by updating the tab/window contents and the browser chrome.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#prerendering-browsing-context-finalize-activation" id="ref-for-prerendering-browsing-context-finalize-activation">Finalize activation</a> for <var>bc</var> given <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origin</a> and <var>unsafe time</var>.</p>
      </ol>
      <p class="note" role="note">An example of indicating commitment is pressing the Enter key in the URL bar</p>
      <p class="note" role="note">The user might never indicate such a commitment, or might take long enough to do
so that the user agent needs to reclaim the resources used by the prerender for some more
immediate task. In that case the user agent can <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded" id="ref-for-a-browsing-context-is-discarded">discard</a> <var>bc</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="create a prerendering browsing context">
     To <dfn data-dfn-type="dfn" data-export id="create-a-prerendering-browsing-context">create a prerendering browsing context<a class="self-link" href="#create-a-prerendering-browsing-context"></a></dfn> given a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②">URL</a> <var>startingURL</var> and a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code> <var>referrerDoc</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>startingURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme①">scheme</a> is an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-scheme" id="ref-for-http-scheme①">HTTP(S) scheme</a>.</p>
     <li data-md>
      <p>If <var>referrerDoc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc①">browsing context</a> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a>, then return.</p>
      <p class="note" role="note">Currently, prerendering from inside a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context">nested browsing context</a> is not specified or implemented. Doing so would involve tricky considerations around how the prerendered browsing context appears in the browsing context tree. </p>
     <li data-md>
      <p>If <var>referrerDoc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc②">browsing context</a> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#auxiliary-browsing-context" id="ref-for-auxiliary-browsing-context">auxiliary browsing context</a>, then return.</p>
      <p class="note" role="note">This avoids having to deal with any potential opener relationship between the prerendering browsing context and <var>referrerDoc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc③">browsing context</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#opener-browsing-context" id="ref-for-opener-browsing-context">opener browsing context</a>. </p>
     <li data-md>
      <p>If <var>referrerDoc</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-site" id="ref-for-same-site">same site</a> with <var>startingURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①">origin</a>, then return.</p>
      <p class="note" role="note">Currently, cross-site prerendering is not specified or implemented, although we have various ideas about how it could work in this repository’s explainers. </p>
     <li data-md>
      <p>If <var>referrerDoc</var>’s <a data-link-type="dfn" href="#document-prerendering-browsing-contexts-map" id="ref-for-document-prerendering-browsing-contexts-map">prerendering browsing contexts map</a>[<var>startingURL</var>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exists</a>, then return.</p>
     <li data-md>
      <p>Let <var>bc</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-top-level-browsing-context" id="ref-for-creating-a-new-top-level-browsing-context①">creating a new top-level browsing context</a>.</p>
     <li data-md>
      <p>Set <var>bc</var>’s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode④">loading mode</a> to "<code>prerender</code>".</p>
     <li data-md>
      <p>Set <var>referrerDoc</var>’s <a data-link-type="dfn" href="#document-prerendering-browsing-contexts-map" id="ref-for-document-prerendering-browsing-contexts-map①">prerendering browsing contexts map</a>[<var>startingURL</var>] to <var>bc</var>.</p>
     <li data-md>
      <p>Set <var>bc</var>’s <a data-link-type="dfn" href="#prerendering-browsing-context-remove-from-initiator" id="ref-for-prerendering-browsing-context-remove-from-initiator">remove from initiator</a> to be an algorithm which <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-remove" id="ref-for-map-remove">removes</a> <var>referrerDoc</var>[<var>startingURL</var>].</p>
      <p class="note" role="note">As with regular <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context③">browsing contexts</a>, the <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③">prerendering browsing context</a> can be <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded" id="ref-for-a-browsing-context-is-discarded①">discarded</a> for any reason, for example if it becomes unresponsive, performs a restricted operation, or if the user agent believes prerendering takes too much resources. </p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate②">Navigate</a> <var>bc</var> to <var>startingURL</var> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context" id="ref-for-source-browsing-context">source browsing context</a> set to <var>referrerDoc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc④">browsing context</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="activate" data-algorithm-for="prerendering browsing context">
     To <dfn class="dfn-paneled" data-dfn-for="prerendering browsing context" data-dfn-type="dfn" data-noexport id="prerendering-browsing-context-activate">activate</dfn> a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④">prerendering browsing context</a> <var>successorBC</var> in place of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing context</a> <var>predecessorBC</var> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior" id="ref-for-history-handling-behavior">history handling behavior</a> <var>historyHandling</var>: 
    <ol>
     <li data-md>
      <p class="assertion">Assert: <var>historyHandling</var> is either "<code>default</code>" or "<code>replace</code>".</p>
     <li data-md>
      <p class="assertion">Assert: <var>successorBC</var> is not <a data-link-type="dfn" href="#prerendering-browsing-context-empty" id="ref-for-prerendering-browsing-context-empty">empty</a>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>predecessorBC</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②">top-level browsing context</a>.</p>
     <li data-md>
      <p>Cancel any preexisting but not yet <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#concept-navigate-mature" id="ref-for-concept-navigate-mature">mature</a> attempts to navigate <var>predecessorBC</var>, including canceling any instances of the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch">fetch</a> algorithm started by those attempts. If one of those attempts has already <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#initialise-the-document-object" id="ref-for-initialise-the-document-object">created and initialized a new <code>Document</code> object</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#abort-a-document" id="ref-for-abort-a-document">abort</a> that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code> also.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document" id="ref-for-prompt-to-unload-a-document①">Prompt to unload</a> the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document①">active document</a> of <var>predecessorBC</var>. If the user <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#refused-to-allow-the-document-to-be-unloaded" id="ref-for-refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be unloaded</a>, then return.</p>
     <li data-md>
      <p>Let <var>unsafe time</var> be the <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-3/#dfn-unsafe-shared-current-time" id="ref-for-dfn-unsafe-shared-current-time①">unsafe shared current time</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#abort-a-document" id="ref-for-abort-a-document①">Abort</a> the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document②">active document</a> of <var>predecessorBC</var>.</p>
     <li data-md>
      <p class="XXX">Appropriately merge the session histories of <var>predecessorBC</var> and <var>successorBC</var>, respecting <var>historyHandling</var>.</p>
      <p>This step cannot be specified precisely given the current sorry state of <a data-link-type="biblio" href="#biblio-html">[HTML]</a>'s session history specification. Once the <a href="https://github.com/whatwg/html/pull/6315">navigation and session history rewrite</a> pull request is merged, we can make this precise (although we will also have to do several updates to other parts of this prerendering specification).</p>
      <p>In the meantime, let’s be clear about the intent of the eventual precise-spec, in order to ensure interoperability:</p>
      <ul>
       <li data-md>
        <p><var>successorBC</var> and <var>predecessorBC</var> will still be separate browsing contexts. Before activation, they are each in separate <a href="https://whatpr.org/html/6315/history.html#traversable-navigable">traversable navigables</a> (a new concept introduced in the rewrite). Call those <var>successorTraversable</var> and <var>predecessorTraversable</var>. Both of these traversable navigables have their own session history list; <var>successorTraversable</var>’s will necessarily consist of a single session history entry.</p>
       <li data-md>
        <p>During activation, we will:</p>
        <ul>
         <li data-md>
          <p>Move <var>successorBC</var> from <var>successorTraversable</var> into <var>predecessorTraversable</var>.</p>
         <li data-md>
          <p>Move the session history entry <var>successorEntry</var> from <var>successorTraversable</var> into <var>predecessorTraversable</var>, as follows:</p>
          <ul>
           <li data-md>
            <p>If <var>historyHandling</var> is "<code>replace</code>", replace the currently-active session history entry of <var>predecessorTraversable</var> with <var>successorEntry</var>.</p>
           <li data-md>
            <p>If <var>historyHandling</var> is "<code>default</code>", clear the forward session history of <var>predecessorTraversable</var>, then append <var>successorEntry</var> to <var>predecessorTraversable</var>’s session history list and make it the active session history entry.</p>
          </ul>
          <p>(Note that as a side effect, this makes <var>successorBC</var> the active browsing context of <var>predecessorTraversable</var>).</p>
         <li data-md>
          <p><var>successorTraversable</var> will now be empty and can be unobservably destroyed.</p>
        </ul>
       <li data-md>
        <p>This setup means that traversing across the associated history entries will cause a browsing context group switch, similar to what currently happens for `<a data-link-type="http-header" href="https://html.spec.whatwg.org/multipage/origin.html#cross-origin-opener-policy-2" id="ref-for-cross-origin-opener-policy-2"><code>Cross-Origin-Opener-Policy</code></a>`. Importantly, this will sever any opener relationships, in the same way as COOP. Such traversal includes both the actual activation process above, where we make <var>successorEntry</var> active and thus switch from <var>predecessorBC</var> to <var>successorBC</var>, but also e.g. the user pressing the back button (or the page using <code>history.back()</code>) after activation, which will switch from <var>successorBC</var> to <var>predecessorBC</var>.</p>
      </ul>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">In parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Update the user agent’s user interface to replace <var>predecessorBC</var> with <var>successorBC</var>, e.g., by updating the tab/window contents and the browser chrome.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#prerendering-browsing-context-finalize-activation" id="ref-for-prerendering-browsing-context-finalize-activation①">Finalize activation</a> for <var>successorBC</var> given <var>predecessorBC</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document③">active document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin①">origin</a> and <var>unsafe time</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="finalize activation" data-algorithm-for="prerendering browsing context">
     To <dfn class="dfn-paneled" data-dfn-for="prerendering browsing context" data-dfn-type="dfn" data-noexport id="prerendering-browsing-context-finalize-activation">finalize activation</dfn> of a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑤">prerendering browsing context</a> <var>bc</var> given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin">origin</a> <var>origin</var> and a <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp①">DOMHighResTimeStamp</a></code> <var>unsafe time</var>: 
    <ol>
     <li data-md>
      <p>Let <var>inclusiveDescendants</var> be « <var>bc</var> » <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-extend" id="ref-for-list-extend">extended</a> with <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document④">active document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts" id="ref-for-list-of-the-descendant-browsing-contexts">list of the descendant browsing contexts</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>bc</var> of <var>inclusiveDescendants</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source" id="ref-for-networking-task-source">networking task source</a>, given <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-window" id="ref-for-active-window">active window</a>, to perform the following steps:</p>
      <ol>
       <li data-md>
        <p>Set <var>bc</var>’s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode⑤">loading mode</a> to "<code>default</code>".</p>
       <li data-md>
        <p>Let <var>doc</var> be <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document⑤">active document</a>.</p>
       <li data-md>
        <p>If <var>doc</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin②">origin</a> is the same as <var>origin</var>, then set <var>doc</var>’s <a data-link-type="dfn" href="#document-activation-start-time" id="ref-for-document-activation-start-time">activation start time</a> to the <a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-3/#dfn-relative-high-resolution-time" id="ref-for-dfn-relative-high-resolution-time">relative high resolution time</a> for <var>unsafe time</var> and <var>doc</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>origin</var> → <var>hintSet</var> in <var>bc</var>’s <a data-link-type="dfn" href="#prerendering-browsing-context-prerender-scoped-accept-ch-cache" id="ref-for-prerendering-browsing-context-prerender-scoped-accept-ch-cache">prerender-scoped Accept-CH cache</a>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#add-a-new-accept-ch-cache-entry" id="ref-for-add-a-new-accept-ch-cache-entry">Add a new Accept-CH cache entry</a> to the <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#accept-ch-cache" id="ref-for-accept-ch-cache">Accept-CH cache</a> with the <var>origin</var> and <var>hintSet</var>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">Fire an event</a> named <code class="idl"><a data-link-type="idl" href="#eventdef-document-prerenderingchange" id="ref-for-eventdef-document-prerenderingchange">prerenderingchange</a></code> at <var>doc</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>steps</var> in <var>doc</var>’s <a data-link-type="dfn" href="#document-post-prerendering-activation-steps-list" id="ref-for-document-post-prerendering-activation-steps-list②">post-prerendering activation steps list</a>:</p>
        <ol>
         <li data-md>
          <p>Run <var>steps</var>.</p>
          <p class="note" role="note">These steps might return something, like a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise">Promise</a></code>. That is just an artifact of how the spec is modified; such return values can always be ignored. </p>
         <li data-md>
          <p class="assertion">Assert: running <var>steps</var> did not throw an exception.</p>
        </ol>
        <p class="note" role="note">The order here is observable for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context④">browsing contexts</a> that share an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a>, but not for those in separate event loops. </p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remove from initiator" data-algorithm-for="prerendering browsing context">
     A <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑥">prerendering browsing context</a> has an associated <dfn class="dfn-paneled" data-dfn-for="prerendering browsing context" data-dfn-type="dfn" data-noexport id="prerendering-browsing-context-remove-from-initiator">remove from initiator</dfn>, which is null or an algorithm with no arguments, initially set to null. 
    <p>To ensure that the references for a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑦">prerendering browsing context</a> are cleared once it is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded" id="ref-for-a-browsing-context-is-discarded②">discarded</a>, modify <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#bcg-remove" id="ref-for-bcg-remove">remove</a> by appending the following step:</p>
    <ol>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑧">prerendering browsing context</a> and <var>browsingContext</var>’s <a data-link-type="dfn" href="#prerendering-browsing-context-remove-from-initiator" id="ref-for-prerendering-browsing-context-remove-from-initiator①">remove from initiator</a> is not null, then call <var>browsingContext</var>’s <a data-link-type="dfn" href="#prerendering-browsing-context-remove-from-initiator" id="ref-for-prerendering-browsing-context-remove-from-initiator②">remove from initiator</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="1.3" id="creating-bcs-patch"><span class="secno">1.3. </span><span class="content">Modifications to creating browsing contexts</span><a class="self-link" href="#creating-bcs-patch"></a></h3>
   <div class="algorithm" data-algorithm="create a new nested browsing context patch">
     To ensure that any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context①">nested browsing contexts</a> inherit their parent’s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode⑥">loading mode</a>, modify <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-nested-browsing-context" id="ref-for-creating-a-new-nested-browsing-context">create a new nested browsing context</a> by appending the following step: 
    <ol>
     <li data-md>
      <p>Set <var>browsingContext</var>’s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode⑦">loading mode</a> to <var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc⑤">browsing context</a>'s <a data-link-type="dfn" href="#browsing-context-loading-mode" id="ref-for-browsing-context-loading-mode⑧">loading mode</a>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="2" id="navigation"><span class="secno">2. </span><span class="content">Navigation and session history</span><a class="self-link" href="#navigation"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="navigate-activation"><span class="secno">2.1. </span><span class="content">Allowing activation in place of navigation</span><a class="self-link" href="#navigate-activation"></a></h3>
   <div class="algorithm" data-algorithm="can activate a prerender">
     We <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="can-activate-a-prerender">can activate a prerender</dfn> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑤">browsing context</a> <var>browsingContext</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior" id="ref-for-history-handling-behavior①">history handling behavior</a> <var>historyHandling</var>, a string <var>navigationType</var>, and a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request①">request</a> <var>request</var>, if the following steps return true: 
    <ol>
     <li data-md>
      <p>Return true if all of the following are true:</p>
      <ul>
       <li data-md>
        <p><var>browsingContext</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context③">top-level browsing context</a></p>
       <li data-md>
        <p><var>browsingContext</var> is not a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑨">prerendering browsing context</a></p>
       <li data-md>
        <p><var>browsingContext</var> is not for a <a href="https://github.com/shivanigithub/fenced-frame">Fenced Frame</a></p>
        <p class="issue" id="issue-441858a6"><a class="self-link" href="#issue-441858a6"></a>The concept of a fenced frame browsing context is not yet defined but we need to link to it once it exists.</p>
       <li data-md>
        <p><var>historyHandling</var> is "<code>default</code>" or "<code>replace</code>"</p>
       <li data-md>
        <p><var>navigationType</var> is "<code>other</code>"</p>
       <li data-md>
        <p><var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-method" id="ref-for-concept-request-method">method</a> is `<code>GET</code>`</p>
       <li data-md>
        <p><var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document⑥">active document</a>'s <a data-link-type="dfn" href="#document-prerendering-browsing-contexts-map" id="ref-for-document-prerendering-browsing-contexts-map②">prerendering browsing contexts map</a>[<var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url①">URL</a>] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a> and is not <a data-link-type="dfn" href="#prerendering-browsing-context-empty" id="ref-for-prerendering-browsing-context-empty①">empty</a></p>
       <li data-md>
        <p>The result of calling <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#should-block-navigation-request" id="ref-for-should-block-navigation-request">should navigation request of type be blocked by content security policy?</a> given <var>request</var> and <var>navigationType</var> is "<code>Allowed</code>".</p>
        <p class="note" role="note">
         There is no need for an additional CSP check for the response, see 
         <tt>navigate-to</tt>
          (before it was <a href="https://github.com/w3c/webappsec-csp/pull/564">removed</a>. 
        </p>
      </ul>
     <li data-md>
      <p>Otherwise, return false.</p>
    </ol>
   </div>
   <p>Patch the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate③">navigate</a> algorithm to allow the <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate①">activation</a> of a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①⓪">prerendering browsing context</a> in place of a normal navigation as follows:</p>
   <div class="algorithm" data-algorithm="navigate activate patch">
     In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate④">navigate</a>, append the following steps after the fragment navigation handling (currently step 8): 
    <ol>
     <li data-md>
      <p>If <var>resource</var> is a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request②">request</a> and we <a data-link-type="dfn" href="#can-activate-a-prerender" id="ref-for-can-activate-a-prerender">can activate a prerender</a> given <var>browsingContext</var>, <var>historyHandling</var>, <var>navigationType</var>, and <var>resource</var>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>successorBC</var> be <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document⑦">active document</a>'s <a data-link-type="dfn" href="#document-prerendering-browsing-contexts-map" id="ref-for-document-prerendering-browsing-contexts-map③">prerendering browsing contexts map</a>[<var>resource</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url②">URL</a>].</p>
       <li data-md>
        <p>Wait until all navigation attempts of <var>successorBC</var> have been <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#concept-navigate-mature" id="ref-for-concept-navigate-mature①">matured</a>.</p>
       <li data-md>
        <p>If <var>successorBC</var> has not been <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded" id="ref-for-a-browsing-context-is-discarded③">discarded</a>, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate②">Activate</a> <var>successorBC</var> in place of <var>browsingContext</var> given <var>historyHandling</var>.</p>
         <li data-md>
          <p>Return.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <p>Navigation redirects can also <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate③">activate</a> <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①①">prerendering browsing contexts</a>. This is defined in the <a href="#navigate-fetch-patch">§ 2.2 Navigation fetch changes</a> section.</p>
   <h3 class="heading settled" data-level="2.2" id="navigate-fetch-patch"><span class="secno">2.2. </span><span class="content">Navigation fetch changes</span><a class="self-link" href="#navigate-fetch-patch"></a></h3>
   <div class="algorithm" data-algorithm="process a navigate fetch patch">
     In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-fetch" id="ref-for-process-a-navigate-fetch">process a navigate fetch</a>, append the following steps after the first sub-step under "While true:": 
    <ol>
     <li data-md>
      <p>If we <a data-link-type="dfn" href="#can-activate-a-prerender" id="ref-for-can-activate-a-prerender①">can activate a prerender</a> given <var>browsingContext</var>, <var>historyHandling</var>, <var>navigationType</var>, and <var>request</var>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate④">Activate</a> <var>browsingContext</var> in place of <var>sourceBrowsingContext</var> given <var>historyHandling</var>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①②">prerendering browsing context</a> and <var>currentURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-site" id="ref-for-same-site①">same site</a> with <var>incumbentNavigationOrigin</var>, then:</p>
      <ol>
       <li data-md>
        <p>Run the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-discarding-steps" id="ref-for-environment-discarding-steps">environment discarding steps</a> for <var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-reserved-environment" id="ref-for-navigation-params-reserved-environment">reserved environment</a>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
    </ol>
    <p>Additionally, append the following steps toward the end of the algorithm, after the steps which check <var>locationURL</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>browsingContext</var> is a prerendering browsing context, and <var>responseOrigin</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin">same origin</a> with <var>incumbentNavigationOrigin</var>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>loadingModes</var> be the result of <a data-link-type="dfn" href="#get-the-supported-loading-modes" id="ref-for-get-the-supported-loading-modes">getting the supported loading modes</a> for <var>response</var>.</p>
       <li data-md>
        <p>If <var>loadingModes</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contain</a> `<code><a data-link-type="dfn" href="#supports-loading-mode-credentialed-prerender" id="ref-for-supports-loading-mode-credentialed-prerender">credentialed-prerender</a></code>`, then set <var>response</var> to a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error" id="ref-for-concept-network-error">network error</a>.</p>
        <p class="note" role="note">This will cause the prerender to fail in the following steps of the algorithm. </p>
        <p class="note" role="note">In the future we could possibly also allow the <code>uncredentialed-prerender</code> token to work here. However, since that is primarily intended for the cross site case, which isn’t specified or implemented yet, we don’t want to encourage its use in the wild, so for now we specify that prerendering fails if only the <code>uncredentialed-prerender</code> token is found. </p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="process a navigate response patch">
     In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-response" id="ref-for-process-a-navigate-response">process a navigate response</a>, append the following after the step which establishes the value of <var>failure</var>, but before the step which uses it to display an error page: 
    <ol>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①③">prerendering browsing context</a>, and any of the following hold:</p>
      <ul>
       <li data-md>
        <p><var>failure</var> is true;</p>
       <li data-md>
        <p><var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-request" id="ref-for-navigation-params-request">request</a> is null;</p>
       <li data-md>
        <p><var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-request" id="ref-for-navigation-params-request①">request</a>'s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-current-url" id="ref-for-concept-request-current-url">current URL</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme②">scheme</a> is not a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-scheme" id="ref-for-http-scheme②">HTTP(S) scheme</a>;</p>
       <li data-md>
        <p><var>response</var> does not <a data-link-type="dfn" href="prefetch.html#supports-prefetch" id="ref-for-supports-prefetch">support prefetch</a>;</p>
        <div class="note" role="note">Responses which are ineligible for prefetch, e.g. because they have an error status, are not eligible for prerender either. A future version of this specification might allow responses to more clearly delineate the two.</div>
       <li data-md>
        <p><var>response</var> has a `<code>Content-Disposition</code>` header specifying the <code>attachment</code> disposition type; or</p>
       <li data-md>
        <p><var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status">status</a> is 204 or 205,</p>
      </ul>
      <p>then:</p>
      <ol>
       <li data-md>
        <p>Run the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-discarding-steps" id="ref-for-environment-discarding-steps①">environment discarding steps</a> for <var>navigationParams</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-reserved-environment" id="ref-for-navigation-params-reserved-environment①">reserved environment</a>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="process a navigate URL scheme patch">
     In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-url-scheme" id="ref-for-process-a-navigate-url-scheme">process a navigate URL scheme</a>, insert the following step before the step which displays inline content: 
    <ol>
     <li data-md>
      <p>Otherwise, if <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①④">prerendering browsing context</a>, then return.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.3" id="delay-crossorigin"><span class="secno">2.3. </span><span class="content">Delaying cross-origin nested browsing context navigations</span><a class="self-link" href="#delay-crossorigin"></a></h3>
   <p>Patch the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-fetch" id="ref-for-process-a-navigate-fetch①">process a navigate fetch</a> algorithm to allow delaying or discarding of cross-origin navigations inside browsing contexts that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context②">nested</a> inside a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①⑤">prerendering browsing context</a> as follows:</p>
   <div class="algorithm" data-algorithm="navigate delay cross-origin patch">
     In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-fetch" id="ref-for-process-a-navigate-fetch②">process a navigate fetch</a>, append the following steps after the cross-origin redirect check (currently step 13.1): 
    <ol>
     <li data-md>
      <p>Let <var>crossOrigin</var> be <var>hasCrossOriginRedirects</var>.</p>
     <li data-md>
      <p>If <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#bc-container" id="ref-for-bc-container">container</a> is not null, and <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#bc-container" id="ref-for-bc-container①">container</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin③">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin①">same origin</a> with <var>currentURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin③">origin</a>, then set <var>crossOrigin</var> to true.</p>
     <li data-md>
      <p>If <var>crossOrigin</var> is true and <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context④">top-level browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①⑥">prerendering browsing context</a>, then the user agent must either wait to continue this algorithm until <var>bc</var> is <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate⑤">activated</a>, or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded" id="ref-for-a-browsing-context-is-discarded④">discard</a> <var>bc</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑤">top-level browsing context</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.4" id="always-replacement"><span class="secno">2.4. </span><span class="content">Maintaining a trivial session history</span><a class="self-link" href="#always-replacement"></a></h3>
   <div class="algorithm" data-algorithm="navigate historyHandling patch">
     Patch the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate⑤">navigate</a> algorithm to ensure the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history①">session history</a> of a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①⑦">prerendering browsing context</a> stays trivial by prepending the following step before all others: 
    <ol>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①⑧">prerendering browsing context</a>, then:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>historyHandling</var> is not "<code>entry update</code>", since prerendering browsing contexts have trivial session histories and thus will never end up <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history" id="ref-for-traverse-the-history">traversing</a> back to an entry with null <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#she-document" id="ref-for-she-document">document</a>.</p>
       <li data-md>
        <p>If <var>historyHandling</var> is "<code>default</code>", then set <var>historyHandling</var> to "<code>replace</code>".</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="URL and history update steps patch">
     Patch the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps" id="ref-for-url-and-history-update-steps">URL and history update steps</a> by adding the following step after step 1: 
    <ol>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context①⑨">prerendering browsing context</a>, then set <var>isPush</var> to false.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.5" id="interaction-with-workers"><span class="secno">2.5. </span><span class="content">Interaction with Worker Lifetime</span><a class="self-link" href="#interaction-with-workers"></a></h3>
   <div class="algorithm" data-algorithm="The worker’s lifetime patch">
     In <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#the-worker&apos;s-lifetime" id="ref-for-the-worker&apos;s-lifetime">The worker’s lifetime</a>, modify the definition of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#active-needed-worker" id="ref-for-active-needed-worker">active needed worker</a>, to count workers with a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②⓪">prerendering browsing context</a> owner as not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#active-needed-worker" id="ref-for-active-needed-worker①">active</a>: 
    <p>A worker is said to be an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#active-needed-worker" id="ref-for-active-needed-worker②">active needed worker</a> if any of its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set" id="ref-for-concept-WorkerGlobalScope-owner-set">owners</a> are either <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑨">Document</a></code> objects that are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active" id="ref-for-fully-active">fully active</a> and their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc⑥">browsing context</a> is not a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②①">prerendering browsing context</a>, or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#active-needed-worker" id="ref-for-active-needed-worker③">active needed workers</a>.</p>
    <p class="note" role="note">This means that the worker’s script would load, but the execution would be suspended until the document is activated. </p>
   </div>
   <h3 class="heading settled" data-level="2.6" id="cleanup-upon-discarding"><span class="secno">2.6. </span><span class="content">Cleanup upon discarding a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code></span><a class="self-link" href="#cleanup-upon-discarding"></a></h3>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#discard-a-document" id="ref-for-discard-a-document">discard</a> algorithm for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①①">Document</a></code>s by appending the following step:</p>
   <div class="algorithm" data-algorithm="discard a Document patch">
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">Empty</a> <var>document</var>’s <a data-link-type="dfn" href="#document-post-prerendering-activation-steps-list" id="ref-for-document-post-prerendering-activation-steps-list③">post-prerendering activation steps list</a>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="interaction-with-other-specs"><span class="secno">3. </span><span class="content">Interaction with other specifications and concepts</span><a class="self-link" href="#interaction-with-other-specs"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="interaction-with-visibility-state"><span class="secno">3.1. </span><span class="content">Interaction with Page Visibility</span><a class="self-link" href="#interaction-with-visibility-state"></a></h3>
   <p>Documents in <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②②">prerendering browsing contexts</a> always have a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state" id="ref-for-visibility-state">visibility state</a> of "<code>hidden</code>".</p>
   <p class="issue" id="issue-1c569c2c"><a class="self-link" href="#issue-1c569c2c"></a>What about portals? Portals might not be hidden, and portals are envisioned to be a type of prerendering browsing context.</p>
   <h3 class="heading settled" data-level="3.2" id="interaction-with-system-focus"><span class="secno">3.2. </span><span class="content">Interaction with system focus</span><a class="self-link" href="#interaction-with-system-focus"></a></h3>
   <p><a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②③">Prerendering browsing contexts</a> never have <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#tlbc-system-focus" id="ref-for-tlbc-system-focus">system focus</a>.</p>
   <h3 class="heading settled" data-level="3.3" id="performance-navigation-timing-extension"><span class="secno">3.3. </span><span class="content">Extensions to the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming" id="ref-for-dom-performancenavigationtiming">PerformanceNavigationTiming</a></code> interface</span><a class="self-link" href="#performance-navigation-timing-extension"></a></h3>
   <p>Extend the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming" id="ref-for-dom-performancenavigationtiming①">PerformanceNavigationTiming</a></code> interface as follows:</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming" id="ref-for-dom-performancenavigationtiming②"><c- g>PerformanceNavigationTiming</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp②"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancenavigationtiming-activationstart" id="ref-for-dom-performancenavigationtiming-activationstart"><c- g>activationStart</c-></a>;
};
</pre>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="PerformanceNavigationTiming" data-dfn-type="attribute" data-export id="dom-performancenavigationtiming-activationstart"><code>activationStart</code></dfn> getter steps are:</p>
   <ol>
    <li data-md>
     <p>Return a <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp③">DOMHighResTimeStamp</a></code> with a time value equal to the <a data-link-type="dfn" href="https://w3c.github.io/navigation-timing/#dfn-current-document" id="ref-for-dfn-current-document">current document</a>'s <a data-link-type="dfn" href="#document-activation-start-time" id="ref-for-document-activation-start-time①">activation start time</a>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.4" id="client-hint-cache"><span class="secno">3.4. </span><span class="content">Interaction with Client Hint Cache</span><a class="self-link" href="#client-hint-cache"></a></h3>
   <p>We need to ensure that the <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#accept-ch-cache" id="ref-for-accept-ch-cache①">Accept-CH cache</a>, which is owned by user agent as a global storage, is not modified while prerendering, but is properly updated after activation. The following modifications ensure this.</p>
   <p>Each <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②④">prerendering browsing context</a> has a <dfn class="dfn-paneled" data-dfn-for="prerendering browsing context" data-dfn-type="dfn" data-noexport id="prerendering-browsing-context-prerender-scoped-accept-ch-cache">prerender-scoped Accept-CH cache</dfn>, which is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">ordered map</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin①">origin</a> to <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#client-hints-set" id="ref-for-client-hints-set">client hints sets</a>.</p>
   <p>This stores which client hints each origin has opted into receiving, until it can be copied to the global <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#accept-ch-cache" id="ref-for-accept-ch-cache②">Accept-CH cache</a> when <a data-link-type="dfn" href="#prerendering-browsing-context-finalize-activation" id="ref-for-prerendering-browsing-context-finalize-activation②">activation is finalized</a>.</p>
   <div class="algorithm" data-algorithm="add a new prerender Accept-CH cache entry">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="add-a-new-prerender-accept-ch-cache-entry">add a new prerender Accept-CH cache entry</dfn> given a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②⑤">prerendering browsing context</a> <var>bc</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin" id="ref-for-concept-origin②">origin</a> <var>origin</var>, and a <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#client-hints-set" id="ref-for-client-hints-set①">client hints set</a> <var>hintSet</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>cache</var> be <var>bc</var>’s <a data-link-type="dfn" href="#prerendering-browsing-context-prerender-scoped-accept-ch-cache" id="ref-for-prerendering-browsing-context-prerender-scoped-accept-ch-cache①">prerender-scoped Accept-CH cache</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set">set</a> <var>cache</var>[<var>origin</var>] to <var>hintSet</var>.</p>
    </ol>
    <p class="note" role="note">This is similar to <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#add-a-new-accept-ch-cache-entry" id="ref-for-add-a-new-accept-ch-cache-entry①">add a new Accept-CH cache entry</a>.</p>
   </div>
   <div class="algorithm" data-algorithm="append client hints to request patch">
     Modify the <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#abstract-opdef-append-client-hints-to-request" id="ref-for-abstract-opdef-append-client-hints-to-request">append client hints to request</a> algorithm, by prepending the following steps before iterating over the <var>hintSet</var>: 
    <ol>
     <li data-md>
      <p>Let <var>browsingContext</var> be <var>settingsObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc">browsing context</a>.
If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②⑥">prerendering browsing context</a>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>origin</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url③">url</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin④">origin</a>.</p>
       <li data-md>
        <p>Set <var>hintSet</var> to the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-union" id="ref-for-set-union">union</a> of <var>hintSet</var> and <var>browsingContext</var>’s <a data-link-type="dfn" href="#prerendering-browsing-context-prerender-scoped-accept-ch-cache" id="ref-for-prerendering-browsing-context-prerender-scoped-accept-ch-cache②">prerender-scoped Accept-CH cache</a>[<var>origin</var>].</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="update the Client Hints set patch">
     Modify the <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#abstract-opdef-update-the-client-hints-set" id="ref-for-abstract-opdef-update-the-client-hints-set">update the Client Hints set</a> algorithm, by updating the last step. 
    <ol>
     <li data-md>
      <p>Let <var>origin</var> be <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-url" id="ref-for-concept-response-url">url</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑤">origin</a>.</p>
     <li data-md>
      <p>Let <var>hintSet</var> be <var>settingsObject</var>’s <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#environment-settings-object-client-hints-set" id="ref-for-environment-settings-object-client-hints-set">client hints set</a>.</p>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②⑦">prerendering browsing context</a>, <a data-link-type="dfn" href="#add-a-new-prerender-accept-ch-cache-entry" id="ref-for-add-a-new-prerender-accept-ch-cache-entry">add a new prerender Accept-CH cache entry</a> with <var>browsingContext</var>, <var>origin</var> and <var>hintSet</var>.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://wicg.github.io/client-hints-infrastructure#add-a-new-accept-ch-cache-entry" id="ref-for-add-a-new-accept-ch-cache-entry②">add a new Accept-CH cache entry</a> with <var>origin</var> and <var>hintSet</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="4" id="supports-loading-mode"><span class="secno">4. </span><span class="content">The `<dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="http-headerdef-supports-loading-mode"><code>Supports-Loading-Mode</code></dfn>` HTTP response header</span><a class="self-link" href="#supports-loading-mode"></a></h2>
   <p><em>The following section would be added as a sub-section of <a data-link-type="biblio" href="#biblio-html">[HTML]</a>'s <a href="https://html.spec.whatwg.org/multipage/browsers.html#browsers">Loading web pages</a> section.</em></p>
   <p>In some cases, cross-origin web pages might not be prepared to be loaded in a novel context. To allow them to opt in to being loaded in such ways, the `<a data-link-type="http-header" href="#http-headerdef-supports-loading-mode" id="ref-for-http-headerdef-supports-loading-mode"><code>Supports-Loading-Mode</code></a>` HTTP response header can be used. This header is a <a data-link-type="dfn" href="https://www.rfc-editor.org/rfc/rfc8941.html#section-1" id="ref-for-section-1">structured header</a>; if present its value must be the single <a data-link-type="dfn" href="https://www.rfc-editor.org/rfc/rfc8941.html#name-tokens" id="ref-for-name-tokens">token</a> `<code><a data-link-type="dfn" href="#supports-loading-mode-credentialed-prerender" id="ref-for-supports-loading-mode-credentialed-prerender①">credentialed-prerender</a></code>`.</p>
   <p class="note" role="note">The parsing is actually done as a <a data-link-type="dfn" href="https://www.rfc-editor.org/rfc/rfc8941.html#name-lists" id="ref-for-name-lists">list</a> of <a data-link-type="dfn" href="https://www.rfc-editor.org/rfc/rfc8941.html#name-tokens" id="ref-for-name-tokens①">tokens</a>, and unknown tokens will be ignored. However, authors are best off avoiding any form except the single-token one, for future compatibility. </p>
   <p>The `<code><dfn class="dfn-paneled" data-dfn-for="Supports-Loading-Mode" data-dfn-type="dfn" data-noexport id="supports-loading-mode-credentialed-prerender">credentialed-prerender</dfn></code>` token indicates that the response can be used to create a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②⑧">prerendering browsing context</a>, despite the prerendering being initiated by a cross-origin same-site referrer. Without this opt-in, such prerenders will fail, as outlined in <a href="#navigate-fetch-patch">§ 2.2 Navigation fetch changes</a>.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-supported-loading-modes">get the supported loading modes</dfn> for a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a> <var>response</var>:</p>
   <ol>
    <li data-md>
     <p>If <var>response</var> is a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error" id="ref-for-concept-network-error①">network error</a>, then return an empty list.</p>
    <li data-md>
     <p>Let <var>slmHeader</var> be the result of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header">getting a structured field value</a> given `<a data-link-type="http-header" href="#http-headerdef-supports-loading-mode" id="ref-for-http-headerdef-supports-loading-mode①"><code>Supports-Loading-Mode</code></a>` and "<code>list</code>" from <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list">header list</a>.</p>
    <li data-md>
     <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> containing all elements of <var>slmHeader</var> that are <a data-link-type="dfn" href="https://www.rfc-editor.org/rfc/rfc8941.html#name-tokens" id="ref-for-name-tokens②">tokens</a>.</p>
   </ol>
   <h2 class="heading settled" data-level="5" id="nonsense-behaviors"><span class="secno">5. </span><span class="content">Preventing nonsensical behaviors</span><a class="self-link" href="#nonsense-behaviors"></a></h2>
   <p>Some behaviors might make sense in most <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑥">top-level browsing contexts</a>, but do not make sense in <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context②⑨">prerendering browsing contexts</a>. This section enumerates specification patches to enforce such restrictions.</p>
   <h3 class="heading settled" data-level="5.1" id="patch-window-apis"><span class="secno">5.1. </span><span class="content">APIs for creating and navigating browsing contexts by name</span><a class="self-link" href="#patch-window-apis"></a></h3>
   <p>Modify the definition of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#script-closable" id="ref-for-script-closable">script-closable</a> to prevent window closing while in a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③⓪">prerendering browsing context</a>:</p>
   <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context⑥">browsing context</a> is <dfn data-dfn-type="dfn" data-noexport id="script-closable">script-closable<a class="self-link" href="#script-closable"></a></dfn> if either of the following is true:</p>
   <ul>
    <li data-md>
     <p>it is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#auxiliary-browsing-context" id="ref-for-auxiliary-browsing-context①">auxiliary browsing context</a> that was created by script (as opposed to by an action of the user); or</p>
    <li data-md>
     <p>
      it is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑦">top-level browsing context</a> 
      <ins>that is not a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③①">prerendering browsing context</a></ins>
       and whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history②">session history</a> contains only one <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①②">Document</a></code>.
     </p>
   </ul>
   <h2 class="heading settled" data-level="6" id="intrusive-behaviors"><span class="secno">6. </span><span class="content">Preventing intrusive behaviors</span><a class="self-link" href="#intrusive-behaviors"></a></h2>
   <p>Various behaviors are disallowed in <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③②">prerendering browsing contexts</a> because they would be intrusive to the user, since the prerendered content is not being actively interacted with.</p>
   <h3 class="heading settled" data-level="6.1" id="patch-downloading"><span class="secno">6.1. </span><span class="content">Downloading resources</span><a class="self-link" href="#patch-downloading"></a></h3>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/links.html#downloading-hyperlinks" id="ref-for-downloading-hyperlinks">download the hyperlink</a> algorithm to ensure that downloads inside <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③③">prerendering browsing contexts</a> are delayed until <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate⑥">activation</a>, by inserting the following before the step which goes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
   <div class="algorithm" data-algorithm="download the hyperlink patch">
    <ol>
     <li data-md>
      <p>If <var>subject</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document③">node document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc⑦">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③④">prerendering browsing context</a>, then append the following step to <var>subject</var>’s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list">post-prerendering activation steps list</a> and return.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.2" id="patch-modals"><span class="secno">6.2. </span><span class="content">User prompts</span><a class="self-link" href="#patch-modals"></a></h3>
   <div class="algorithm" data-algorithm="cannot show simple dialogs patch">
     Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#cannot-show-simple-dialogs" id="ref-for-cannot-show-simple-dialogs">cannot show simple dialogs</a> algorithm, given a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window①">Window</a></code> <var>window</var>, by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③⑤">prerendering browsing context</a>, then return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="window print() patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-print" id="ref-for-dom-print">print()</a></code> method steps by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc②">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③⑥">prerendering browsing context</a>, then return.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.3" id="delay-async-apis"><span class="secno">6.3. </span><span class="content">Delaying async API results</span><a class="self-link" href="#delay-async-apis"></a></h3>
   <p>Many specifications need to be patched so that, if a given algorithm invoked in a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③⑦">prerendering browsing context</a>, most of its work is deferred until the browsing context is <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate⑦">activated</a>. This is tricky to do uniformly, as many of these specifications do not have great hygeine around <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-for-spec-authors">using the event loop</a>. Nevertheless, the following sections give our best attempt.</p>
   <h4 class="heading settled" data-level="6.3.1" id="delay-while-prerendering"><span class="secno">6.3.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering">[DelayWhilePrerendering]</a></code> extended attribute</span><a class="self-link" href="#delay-while-prerendering"></a></h4>
   <p>To abstract away some of the boilerplate involved in delaying the action of asynchronous methods until <a data-link-type="dfn" href="#prerendering-browsing-context-activate" id="ref-for-prerendering-browsing-context-activate⑧">activation</a>, we introduce the <dfn class="dfn-paneled idl-code" data-dfn-type="extended-attribute" data-export id="extendedattrdef-delaywhileprerendering"><code>[DelayWhilePrerendering]</code></dfn> Web IDL extended attribute. It indicates that when a given method is called in a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③⑧">prerendering browsing context</a>, it will immediately return a pending promise and do nothing else. Only upon activation will the usual method steps take place, with their result being used to resolve or reject the previously-returned promise.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①">[DelayWhilePrerendering]</a></code> extended attribute must take no arguments, and must only appear on a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-regular-operation" id="ref-for-dfn-regular-operation">regular</a> or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-static-operation" id="ref-for-dfn-static-operation">static operation</a> whose <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-return-type" id="ref-for-dfn-return-type">return type</a> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-promise-type" id="ref-for-dfn-promise-type">promise type</a> or <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined">undefined</a></code>, and whose <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-exposure-set" id="ref-for-dfn-exposure-set">exposure set</a> contains only <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window②">Window</a></code>.</p>
   <div class="algorithm" data-algorithm="DelayWhilePrerendering method steps">
     The method steps for any operation annotated with the <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②">[DelayWhilePrerendering]</a></code> extended attribute are replaced with the following: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm">current Realm</a>.</p>
     <li data-md>
      <p>If the operation in question is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-regular-operation" id="ref-for-dfn-regular-operation①">regular operation</a>, then set <var>realm</var> to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant Realm</a> of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>.</p>
     <li data-md>
      <p>If <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global">global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc③">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context③⑨">prerendering browsing context</a>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>, created in <var>realm</var>.</p>
       <li data-md>
        <p>Append the following steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list①">post-prerendering activation steps list</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be the result of running the originally-specified steps for this operation, with the same <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a> and arguments.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">Resolve</a> <var>promise</var> with <var>result</var>.</p>
        </ol>
       <li data-md>
        <p>If this operation’s <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-return-type" id="ref-for-dfn-return-type①">return type</a> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-promise-type" id="ref-for-dfn-promise-type①">promise type</a>, then return <var>promise</var>.</p>
      </ol>
     <li data-md>
      <p>Otherwise, return the result of running the originally-specified steps for this operation, with the same <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a> and arguments.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.2" id="patch-service-workers"><span class="secno">6.3.2. </span><span class="content">Service Workers</span><a class="self-link" href="#patch-service-workers"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering③">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-update" id="ref-for-dom-serviceworkerregistration-update">update()</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-unregister" id="ref-for-dom-serviceworkerregistration-unregister">unregister()</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-serviceworkercontainer-register" id="ref-for-dom-serviceworkercontainer-register">register(scriptURL, options)</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-serviceworker-postmessage" id="ref-for-dom-serviceworker-postmessage">postMessage(message, transfer)</a></code>, and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-serviceworker-postmessage-message-options" id="ref-for-dom-serviceworker-postmessage-message-options"> postMessage(message, options)</a></code>.</p>
   <p class="note" role="note">This allows prerendered page to take advantage of existing service workers, but not have any effect on the state of service worker registrations.</p>
   <h4 class="heading settled" data-level="6.3.3" id="patch-broadcast-channel"><span class="secno">6.3.3. </span><span class="content">BroadcastChannel</span><a class="self-link" href="#patch-broadcast-channel"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering④">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/web-messaging.html#dom-broadcastchannel-postmessage" id="ref-for-dom-broadcastchannel-postmessage">postMessage()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.4" id="patch-geolocation"><span class="secno">6.3.4. </span><span class="content">Geolocation API</span><a class="self-link" href="#patch-geolocation"></a></h4>
   <div class="algorithm" data-algorithm="Geolocation getCurrentPosition patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/geolocation-api/#getcurrentposition-method" id="ref-for-getcurrentposition-method">getCurrentPosition()</a></code> method steps by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc④">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④⓪">prerendering browsing context</a>, then append the following steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list②">post-prerendering activation steps list</a> and return.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Geolocation watchPosition patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/geolocation-api/#watchposition-method" id="ref-for-watchposition-method">watchPosition()</a></code> method steps by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc⑤">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④①">prerendering browsing context</a>, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>watchProcessId</var> be a new unique <a data-link-type="dfn" href="https://w3c.github.io/geolocation-api/#dfn-watch-process" id="ref-for-dfn-watch-process">watch process</a> ID, and note it as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="post-prerendering-activation-geolocation-watch-process-id">post-prerendering activation geolocation watch process ID</dfn>.</p>
       <li data-md>
        <p>Append the following steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list③">post-prerendering activation steps list</a>, with the modification that the <a data-link-type="dfn" href="https://w3c.github.io/geolocation-api/#dfn-watch-process" id="ref-for-dfn-watch-process①">watch process</a> generated must use <var>watchProcessId</var> as its ID, and return <var>watchProcessId</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Geolocation clearWatch patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/geolocation-api/#clearwatch-method" id="ref-for-clearwatch-method">clearWatch(watchId)</a></code> method steps by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc⑥">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④②">prerendering browsing context</a>, then:</p>
      <ol>
       <li data-md>
        <p>If <var>watchId</var> is a <a data-link-type="dfn" href="#post-prerendering-activation-geolocation-watch-process-id" id="ref-for-post-prerendering-activation-geolocation-watch-process-id">post-prerendering activation geolocation watch process ID</a>, then remove its corresponding steps from <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list④">post-prerendering activation steps list</a>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.5" id="patch-serial"><span class="secno">6.3.5. </span><span class="content">Web Serial API</span><a class="self-link" href="#patch-serial"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering⑤">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/serial/#dom-serial-requestPort" id="ref-for-dom-serial-requestPort">requestPort()</a></code>.</p>
   <p>TODO: the below could probably be done by generalizing <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering⑥">[DelayWhilePrerendering]</a></code> to use owner document while in dedicated workers.</p>
   <div class="algorithm" data-algorithm="Serial getPorts patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/serial/#dom-serial-getports" id="ref-for-dom-serial-getports">getPorts()</a></code> method steps by inserting the following steps after the initial creation of <var>promise</var>: 
    <ol>
     <li data-md>
      <p>Let <var>document</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window" id="ref-for-concept-document-window①">associated Document</a>, if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window③">Window</a></code>, or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a>'s owner document, if <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑧">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope" id="ref-for-dedicatedworkerglobalscope">DedicatedWorkerGlobalScope</a></code>.</p>
     <li data-md>
      <p>If <var>document</var> is null, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>.</p>
     <li data-md>
      <p>If <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc" id="ref-for-concept-document-bc⑧">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④③">prerendering browsing context</a>, then append the following steps to <var>document</var>’s <a data-link-type="dfn" href="#document-post-prerendering-activation-steps-list" id="ref-for-document-post-prerendering-activation-steps-list④">post-prerendering activation steps list</a> and return <var>promise</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.6" id="patch-notifications"><span class="secno">6.3.6. </span><span class="content">Notifications API</span><a class="self-link" href="#patch-notifications"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering⑦">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://notifications.spec.whatwg.org/#dom-notification-requestpermission" id="ref-for-dom-notification-requestpermission">requestPermission()</a></code>.</p>
   <div class="algorithm" data-algorithm="Notification constructor patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://notifications.spec.whatwg.org/#dom-notification-notification" id="ref-for-dom-notification-notification">Notification()</a></code> constructor steps by replacing the step which goes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a> with the following: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑨">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc⑦">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④④">prerendering browsing context</a>, then append these steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list⑤">post-prerendering activation steps list</a>. Otherwise, run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel③">in parallel</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Notification permission patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://notifications.spec.whatwg.org/#dom-notification-permission" id="ref-for-dom-notification-permission">permission</a></code> static getter steps by replacing them with the following: 
    <ol>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object" id="ref-for-current-global-object">current global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc⑧">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④⑤">prerendering browsing context</a>, then return "<code>default</code>".</p>
      <p class="note" role="note">This allows implementations to avoid looking up the actual permission state, which might not be synchronously accessible especially in the case of <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④⑥">prerendering browsing contexts</a>. Web developers can then call <code class="idl"><a data-link-type="idl" href="https://notifications.spec.whatwg.org/#dom-notification-requestpermission" id="ref-for-dom-notification-requestpermission①">Notification.requestPermission()</a></code>, which per the above modifications will only actually do anything after activation. At that time we might discover that the permission is "<code>granted</code>" or "<code>denied</code>", so the browser might not actually ask the user like would normally be the case with "<code>default</code>". But that’s OK: it’s not observable to web developer code.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://notifications.spec.whatwg.org/#get-the-notifications-permission-state" id="ref-for-get-the-notifications-permission-state">get the notifications permission state</a> and return it.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.7" id="patch-midi"><span class="secno">6.3.7. </span><span class="content">Web MIDI API</span><a class="self-link" href="#patch-midi"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering⑧">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://webaudio.github.io/web-midi-api/#dom-navigator-requestmidiaccess" id="ref-for-dom-navigator-requestmidiaccess">requestMIDIAccess()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.8" id="patch-idle-detection"><span class="secno">6.3.8. </span><span class="content">Idle Detection API</span><a class="self-link" href="#patch-idle-detection"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering⑨">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/idle-detection/#api-idledetector-start" id="ref-for-api-idledetector-start">start()</a></code>.</p>
   <p class="note" role="note">The other interesting method, <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/idle-detection/#api-idledetector-requestpermission" id="ref-for-api-idledetector-requestpermission">IdleDetector.requestPermission()</a></code>, is gated on <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation">transient activation</a>. However, even if permission was previously granted for the origin in question, we delay starting any idle detectors while prerendering. </p>
   <h4 class="heading settled" data-level="6.3.9" id="patch-generic-sensor"><span class="secno">6.3.9. </span><span class="content">Generic Sensor API</span><a class="self-link" href="#patch-generic-sensor"></a></h4>
   <div class="algorithm" data-algorithm="Sensor start patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/sensors/#dom-sensor-start" id="ref-for-dom-sensor-start">start()</a></code> method steps by inserting the following steps after the state is set to "<code>activating</code>": 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⓪">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc⑨">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④⑦">prerendering browsing context</a>, then append the following steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list⑥">post-prerendering activation steps list</a> and return.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/sensors/#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot">[[state]]</a></code> is "<code>idle</code>", then return.</p>
      <p class="note" role="note">This ensures that if this portion of the algorithm was delayed due to prerendering, and in the meantime <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/sensors/#dom-sensor-stop" id="ref-for-dom-sensor-stop">stop()</a></code> was called, we do nothing upon activating the prerender. </p>
     <li data-md>
      <p class="assertion">Assert: <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/sensors/#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot①">[[state]]</a></code> is "<code>activating</code>".</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.10" id="patch-web-nfc"><span class="secno">6.3.10. </span><span class="content">Web NFC</span><a class="self-link" href="#patch-web-nfc"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①⓪">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-nfc/#dom-ndefreader-write" id="ref-for-dom-ndefreader-write">write()</a></code> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-nfc/#dom-ndefreader-scan" id="ref-for-dom-ndefreader-scan">scan()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.11" id="patch-battery"><span class="secno">6.3.11. </span><span class="content">Battery Status API</span><a class="self-link" href="#patch-battery"></a></h4>
   <div class="algorithm" data-algorithm="Navigator getBattery patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/battery/#dom-navigator-getbattery" id="ref-for-dom-navigator-getbattery">getBattery()</a></code> method steps by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①⓪">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④⑧">prerendering browsing context</a>, then append the following steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list⑦">post-prerendering activation steps list</a> and return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②④">this</a>'s <a data-link-type="dfn" href="https://w3c.github.io/battery/#dfn-battery-promise" id="ref-for-dfn-battery-promise">battery promise</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.12" id="patch-orientation-lock"><span class="secno">6.3.12. </span><span class="content">Screen Orientation API</span><a class="self-link" href="#patch-orientation-lock"></a></h4>
   <div class="algorithm" data-algorithm="apply an orientation lock patch">
     Modify the <a data-link-type="dfn" href="https://w3c.github.io/screen-orientation/#dfn-apply-an-orientation-lock" id="ref-for-dfn-apply-an-orientation-lock">apply an orientation lock</a> algorithm steps by overwriting the first few steps, before it goes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel④">in parallel</a>, as follows: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new promise.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑤">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①①">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context④⑨">prerendering browsing context</a>, then append the following steps to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a>'s <a data-link-type="dfn" href="#platform-object-post-prerendering-activation-steps-list" id="ref-for-platform-object-post-prerendering-activation-steps-list⑧">post-prerendering activation steps list</a> and return <var>promise</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①">user agent</a> does not support locking the screen orientation, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>promise</var> with a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror">NotSupportedError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code> and return <var>promise</var>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#active-sandboxing-flag-set" id="ref-for-active-sandboxing-flag-set">active sandboxing flag set</a> has the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#sandboxed-orientation-lock-browsing-context-flag" id="ref-for-sandboxed-orientation-lock-browsing-context-flag">sandboxed orientation lock browsing context flag</a> set, or the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent②">user agent</a> doesn’t meet the <a data-link-type="dfn" href="https://w3c.github.io/screen-orientation/#dfn-pre-lock-conditions" id="ref-for-dfn-pre-lock-conditions">pre-lock conditions</a> to perform an orientation change, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>promise</var> with a "<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror①">SecurityError</a></code>" <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code> and return <var>promise</var>.</p>
     <li data-md>
      <p>Set the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">document</a>'s [[orientationPendingPromise]] to <var>promise</var>.</p>
    </ol>
   </div>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①①">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/screen-orientation/#dom-screenorientation-unlock" id="ref-for-dom-screenorientation-unlock">unlock()</a></code>.</p>
   <p class="note" role="note">This latter modification is necessary to ensure that code that calls <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/screen-orientation/#dom-screenorientation-lock" id="ref-for-dom-screenorientation-lock">screen.orientation.lock()</a></code> followed by <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/screen-orientation/#dom-screenorientation-unlock" id="ref-for-dom-screenorientation-unlock①">screen.orientation.unlock()</a></code> produces the expected results. </p>
   <h4 class="heading settled" data-level="6.3.13" id="patch-gamepads"><span class="secno">6.3.13. </span><span class="content">Gamepad</span><a class="self-link" href="#patch-gamepads"></a></h4>
   <div class="algorithm" data-algorithm="getGamepads patch">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dom-navigator-getgamepads" id="ref-for-dom-navigator-getgamepads">getGamepads()</a></code> method steps by prepending the following step: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①②">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑤⓪">prerendering browsing context</a>, then return an empty sequence.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="gamepad events patch"> Modify the discussion of the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dfn-gamepadconnected" id="ref-for-dfn-gamepadconnected">gamepadconnected</a></code> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dfn-gamepaddisconnected" id="ref-for-dfn-gamepaddisconnected">gamepaddisconnected</a></code> events to specify that the user agent must not dispatch these events if the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window④">Window</a></code> object’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①③">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑤①">prerendering browsing context</a>. </div>
   <div class="algorithm" data-algorithm="gamepadconnected post-prerendering">
     Modify the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dfn-gamepadconnected" id="ref-for-dfn-gamepadconnected①">gamepadconnected</a></code> section to indicate that every <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①③">Document</a></code> <var>document</var>’s <a data-link-type="dfn" href="#document-post-prerendering-activation-steps-list" id="ref-for-document-post-prerendering-activation-steps-list⑤">post-prerendering activation steps list</a> should gain the following steps: 
    <ol>
     <li data-md>
      <p>If <var>document</var> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use">allowed to use</a> the "<code>gamepad</code>" feature, and <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context" id="ref-for-secure-context">secure context</a>, and any gamepads are connected, then for each connected gamepad, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire①">fire an event</a> named <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dfn-gamepadconnected" id="ref-for-dfn-gamepadconnected②">gamepadconnected</a></code> at <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①④">relevant global object</a> using <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dom-gamepadevent" id="ref-for-dom-gamepadevent">GamepadEvent</a></code>, with its <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dom-gamepadevent-gamepad" id="ref-for-dom-gamepadevent-gamepad">gamepad</a></code> attribute initialized to a new <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dom-gamepad" id="ref-for-dom-gamepad">Gamepad</a></code> object representing the connected gamepad.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.14" id="eme-patch"><span class="secno">6.3.14. </span><span class="content">Encrypted Media Extensions</span><a class="self-link" href="#eme-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①②">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/encrypted-media/#requestMediaKeySystemAccess" id="ref-for-requestMediaKeySystemAccess">requestMediaKeySystemAccess()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.15" id="autoplay-patch"><span class="secno">6.3.15. </span><span class="content">Media Autoplay</span><a class="self-link" href="#autoplay-patch"></a></h4>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#playing-the-media-resource" id="ref-for-playing-the-media-resource">playing the media resource</a> section to indicate that the the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#current-playback-position" id="ref-for-current-playback-position">current playback position</a> of a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement" id="ref-for-htmlmediaelement">HTMLMediaElement</a></code> must increase monotonically only when the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①④">Document</a></code> is not <code class="idl"><a data-link-type="idl" href="#dom-document-prerendering" id="ref-for-dom-document-prerendering③">prerendering</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.16" id="media-capture-patch"><span class="secno">6.3.16. </span><span class="content">Media Capture and Streams</span><a class="self-link" href="#media-capture-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①③">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/mediacapture-streams/#dom-navigator-getusermedia" id="ref-for-dom-navigator-getusermedia">getUserMedia()</a></code>, <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-getusermedia" id="ref-for-dom-mediadevices-getusermedia">getUserMedia()</a></code> and <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices" id="ref-for-dom-mediadevices-enumeratedevices">enumerateDevices()</a></code>.</p>
   <div class="algorithm" data-algorithm="mediacapture device-change path">
     Modify the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices" id="ref-for-dom-mediadevices">MediaDevices</a></code> section by prepending the following step to the <a data-link-type="dfn" href="https://w3c.github.io/mediacapture-main/#dfn-device-change-notification-steps" id="ref-for-dfn-device-change-notification-steps">device change notification steps</a>: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc" id="ref-for-window-bc①④">browsing context</a> is a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑤②">prerendering browsing context</a>, then return.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.17" id="audio-output-patch"><span class="secno">6.3.17. </span><span class="content">Audio Output Devices API</span><a class="self-link" href="#audio-output-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①④">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-output/#dom-mediadevices-selectaudiooutput" id="ref-for-dom-mediadevices-selectaudiooutput">selectAudioOutput()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.18" id="push-patch"><span class="secno">6.3.18. </span><span class="content">Push API</span><a class="self-link" href="#push-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①⑤">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/push-api/#dom-pushmanager-subscribe" id="ref-for-dom-pushmanager-subscribe">subscribe()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.19" id="background-fetch-patch"><span class="secno">6.3.19. </span><span class="content">Background Fetch</span><a class="self-link" href="#background-fetch-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①⑥">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/background-fetch/#dom-backgroundfetchmanager-fetch" id="ref-for-dom-backgroundfetchmanager-fetch">fetch()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.20" id="persist-patch"><span class="secno">6.3.20. </span><span class="content">Storage API</span><a class="self-link" href="#persist-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①⑦">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://storage.spec.whatwg.org/#dom-storagemanager-persist" id="ref-for-dom-storagemanager-persist">persist()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.21" id="screen-capture-patch"><span class="secno">6.3.21. </span><span class="content">Screen Capture</span><a class="self-link" href="#screen-capture-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①⑧">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-screen-share#dom-mediadevices-getdisplaymedia" id="ref-for-dom-mediadevices-getdisplaymedia">getDisplayMedia()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.22" id="webusb-patch"><span class="secno">6.3.22. </span><span class="content">WebUSB API</span><a class="self-link" href="#webusb-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering①⑨">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/webusb/#dom-usb-getdevices" id="ref-for-dom-usb-getdevices">getDevices()</a></code> and <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/webusb/#dom-usb-requestdevice" id="ref-for-dom-usb-requestdevice">requestDevice()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.23" id="web-bluetooth-patch"><span class="secno">6.3.23. </span><span class="content">Web Bluetooth</span><a class="self-link" href="#web-bluetooth-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②⓪">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetooth-getdevices" id="ref-for-dom-bluetooth-getdevices">getDevices()</a></code> and <code class="idl"><a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice">requestDevice()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.24" id="webhid-patch"><span class="secno">6.3.24. </span><span class="content">WebHID API</span><a class="self-link" href="#webhid-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②①">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/webhid/#dom-hid-getdevices" id="ref-for-dom-hid-getdevices">getDevices()</a></code> and <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/webhid/#dom-hid-requestdevice" id="ref-for-dom-hid-requestdevice">requestDevice()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.25" id="webxr-patch"><span class="secno">6.3.25. </span><span class="content">WebXR Device API</span><a class="self-link" href="#webxr-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②②">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://immersive-web.github.io/webxr/#dom-xrsystem-requestsession" id="ref-for-dom-xrsystem-requestsession">requestSession()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.26" id="credential-manamgenet-patch"><span class="secno">6.3.26. </span><span class="content">Credential Management</span><a class="self-link" href="#credential-manamgenet-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②③">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get">get()</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store">store()</a></code>, and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-create" id="ref-for-dom-credentialscontainer-create">create()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.27" id="web-speech-patch"><span class="secno">6.3.27. </span><span class="content">Web Speech API</span><a class="self-link" href="#web-speech-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②④">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechsynthesis-speak" id="ref-for-dom-speechsynthesis-speak">speak(utterance)</a></code>, <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechsynthesis-cancel" id="ref-for-dom-speechsynthesis-cancel">cancel()</a></code>, <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechsynthesis-pause" id="ref-for-dom-speechsynthesis-pause">pause()</a></code>, and <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechsynthesis-resume" id="ref-for-dom-speechsynthesis-resume">resume()</a></code>.</p>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②⑤">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechrecognition-start" id="ref-for-dom-speechrecognition-start">start()</a></code>, <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechrecognition-stop" id="ref-for-dom-speechrecognition-stop">stop()</a></code>, and <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/speech-api/#dom-speechrecognition-abort" id="ref-for-dom-speechrecognition-abort">abort()</a></code>.</p>
   <h4 class="heading settled" data-level="6.3.28" id="web-locks-patch"><span class="secno">6.3.28. </span><span class="content">Web Locks API</span><a class="self-link" href="#web-locks-patch"></a></h4>
   <p>Add <code class="idl"><a data-link-type="idl" href="#extendedattrdef-delaywhileprerendering" id="ref-for-extendedattrdef-delaywhileprerendering②⑥">[DelayWhilePrerendering]</a></code> to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dom-lockmanager-request" id="ref-for-dom-lockmanager-request">request()</a></code> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dom-lockmanager-query" id="ref-for-dom-lockmanager-query">query()</a></code>.</p>
   <h3 class="heading settled" data-level="6.4" id="implicitly-restricted"><span class="secno">6.4. </span><span class="content">Implicitly restricted APIs</span><a class="self-link" href="#implicitly-restricted"></a></h3>
   <p>Some APIs do not need modifications because they will automatically fail or no-op without a property that a <a data-link-type="dfn" href="#prerendering-browsing-context" id="ref-for-prerendering-browsing-context⑤③">prerendering browsing context</a>, its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-window" id="ref-for-active-window①">active window</a>, or its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document⑧">active document</a> will never have. These properties include:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation①">transient activation</a> or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation" id="ref-for-sticky-activation">sticky activation</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#tlbc-system-focus" id="ref-for-tlbc-system-focus①">system focus</a></p>
    <li data-md>
     <p>the "<code>visible</code>" <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state" id="ref-for-visibility-state①">visibility state</a></p>
   </ul>
   <p>We list known APIs here for completeness, to show which API surfaces we’ve audited.</p>
   <p>APIs that require <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation②">transient activation</a> or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation" id="ref-for-sticky-activation①">sticky activation</a>:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-open" id="ref-for-dom-open">window.open()</a></code> <a data-link-type="biblio" href="#biblio-html">[HTML]</a></p>
    <li data-md>
     <p>The prompt generated by the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload" id="ref-for-event-beforeunload">beforeunload</a></code> event <a data-link-type="biblio" href="#biblio-html">[HTML]</a></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen">element.requestFullscreen()</a></code> <a data-link-type="biblio" href="#biblio-fullscreen">[FULLSCREEN]</a></p>
     <ul>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="https://wicg.github.io/keyboard-lock/#dom-keyboard-lock" id="ref-for-dom-keyboard-lock">navigator.keyboard.lock()</a></code> <a data-link-type="biblio" href="#biblio-keyboard-lock">[KEYBOARD-LOCK]</a>, which requires fullscreen</p>
       <div class="note" role="note"><a data-link-type="biblio" href="#biblio-keyboard-lock">[KEYBOARD-LOCK]</a> allows browsing contexts to enable keyboard lock easily but it has no effect except in fullscreen, which requires a user gesture. If that changes then this needs to be revisited.</div>
     </ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show">paymentRequest.show()</a></code> <a data-link-type="biblio" href="#biblio-payment-request">[PAYMENT-REQUEST]</a></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/presentation-api/#dom-presentationrequest-start" id="ref-for-dom-presentationrequest-start">presentationRequest.start()</a></code> <a data-link-type="biblio" href="#biblio-presentation-api">[PRESENTATION-API]</a></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://wicg.github.io/file-system-access/#dom-window-showopenfilepicker" id="ref-for-dom-window-showopenfilepicker">showOpenFilePicker()</a></code>, <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/file-system-access/#dom-window-showsavefilepicker" id="ref-for-dom-window-showsavefilepicker">showSaveFilePicker()</a></code>, and <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/file-system-access/#dom-window-showdirectorypicker" id="ref-for-dom-window-showdirectorypicker">showDirectoryPicker()</a></code> <a data-link-type="biblio" href="#biblio-file-system-access">[FILE-SYSTEM-ACCESS]</a></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://wicg.github.io/idle-detection/#api-idledetector-requestpermission" id="ref-for-api-idledetector-requestpermission①">IdleDetector.requestPermission()</a></code> <a data-link-type="biblio" href="#biblio-idle-detection">[IDLE-DETECTION]</a></p>
    <li data-md>
     <p>Firing of clipboard events. <a data-link-type="biblio" href="#biblio-clipboard-apis">[CLIPBOARD-APIS]</a></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/web-share/#dom-navigator-share" id="ref-for-dom-navigator-share">navigator.share()</a></code> <a data-link-type="biblio" href="#biblio-web-share">[WEB-SHARE]</a></p>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/pointerlock/#dfn-requestpointerlock-pointerlockoptions-options" id="ref-for-dfn-requestpointerlock-pointerlockoptions-options">element.requestPointerLock()</a></code> <a data-link-type="biblio" href="#biblio-pointerlock">[POINTERLOCK]</a></p>
   </ul>
   <p>APIs that require <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#tlbc-system-focus" id="ref-for-tlbc-system-focus②">system focus</a>:</p>
   <ul>
    <li data-md>
     <p>The Asynchronous Clipboard API: <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/clipboard-apis/#dom-clipboard-read" id="ref-for-dom-clipboard-read">navigator.clipboard.read()</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/clipboard-apis/#dom-clipboard-readtext" id="ref-for-dom-clipboard-readtext">navigator.clipboard.readText()</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/clipboard-apis/#dom-clipboard-write" id="ref-for-dom-clipboard-write">navigator.clipboard.write()</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/clipboard-apis/#dom-clipboard-writetext" id="ref-for-dom-clipboard-writetext">navigator.clipboard.writeText()</a></code>. <a data-link-type="biblio" href="#biblio-clipboard-apis">[CLIPBOARD-APIS]</a></p>
   </ul>
   <p>APIs that require the "<code>visible</code>" <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state" id="ref-for-visibility-state②">visibility state</a>:</p>
   <ul>
    <li data-md>
     <p><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/screen-wake-lock/#the-request-method" id="ref-for-the-request-method">navigator.wakeLock.request()</a></code> <a data-link-type="biblio" href="#biblio-screen-wake-lock">[SCREEN-WAKE-LOCK]</a></p>
   </ul>
   <p>More complicated cases:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://w3c.github.io/picture-in-picture/#request-picture-in-picture-algorithm" id="ref-for-request-picture-in-picture-algorithm">Request Picture-in-Picture</a> as invoked due to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/picture-in-picture/#dom-htmlvideoelement-autopictureinpicture" id="ref-for-dom-htmlvideoelement-autopictureinpicture">video.requestPictureInPicture()</a></code> or <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/picture-in-picture/#dom-htmlvideoelement-requestpictureinpicture" id="ref-for-dom-htmlvideoelement-requestpictureinpicture">autoPictureInPicture</a></code> requires either <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" id="ref-for-transient-activation③">transient activation</a>, or the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state" id="ref-for-visibility-state③">visibility state</a> to have been "<code>visible</code>". <a data-link-type="biblio" href="#biblio-picture-in-picture">[PICTURE-IN-PICTURE]</a></p>
   </ul>
  </main>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#prerendering-browsing-context-activate">activate</a><span>, in § 1.2</span>
   <li><a href="#dom-performancenavigationtiming-activationstart">activationStart</a><span>, in § 3.3</span>
   <li><a href="#document-activation-start-time">activation start time</a><span>, in § 1.2</span>
   <li><a href="#add-a-new-prerender-accept-ch-cache-entry">add a new prerender Accept-CH cache entry</a><span>, in § 3.4</span>
   <li><a href="#can-activate-a-prerender">can activate a prerender</a><span>, in § 2.1</span>
   <li><a href="#create-a-prerendering-browsing-context">create a prerendering browsing context</a><span>, in § 1.2</span>
   <li><a href="#supports-loading-mode-credentialed-prerender">credentialed-prerender</a><span>, in § 4</span>
   <li><a href="#extendedattrdef-delaywhileprerendering">[DelayWhilePrerendering]</a><span>, in § 6.3.1</span>
   <li><a href="#prerendering-browsing-context-empty">empty</a><span>, in § 1.2</span>
   <li><a href="#prerendering-browsing-context-finalize-activation">finalize activation</a><span>, in § 1.2</span>
   <li><a href="#get-the-supported-loading-modes">get the supported loading modes</a><span>, in § 4</span>
   <li><a href="#browsing-context-loading-mode">loading mode</a><span>, in § 1.2</span>
   <li><a href="#dom-document-onprerenderingchange">onprerenderingchange</a><span>, in § 1.1</span>
   <li><a href="#post-prerendering-activation-geolocation-watch-process-id">post-prerendering activation geolocation watch process ID</a><span>, in § 6.3.4</span>
   <li>
    post-prerendering activation steps list
    <ul>
     <li><a href="#document-post-prerendering-activation-steps-list">dfn for Document</a><span>, in § 1.2</span>
     <li><a href="#platform-object-post-prerendering-activation-steps-list">dfn for platform object</a><span>, in § 1.2</span>
    </ul>
   <li><a href="#dom-document-prerendering">prerendering</a><span>, in § 1.2</span>
   <li><a href="#prerendering-browsing-context">prerendering browsing context</a><span>, in § 1.2</span>
   <li><a href="#document-prerendering-browsing-contexts-map">prerendering browsing contexts map</a><span>, in § 1.2</span>
   <li><a href="#eventdef-document-prerenderingchange">prerenderingchange</a><span>, in § 1.1</span>
   <li><a href="#prerendering-browsing-context-prerender-scoped-accept-ch-cache">prerender-scoped Accept-CH cache</a><span>, in § 3.4</span>
   <li><a href="#prerendering-browsing-context-remove-from-initiator">remove from initiator</a><span>, in § 1.2</span>
   <li><a href="#script-closable">script-closable</a><span>, in § 5.1</span>
   <li><a href="#start-user-agent-initiated-prerendering">start user-agent initiated prerendering</a><span>, in § 1.2</span>
   <li><a href="#http-headerdef-supports-loading-mode">Supports-Loading-Mode</a><span>, in § 4</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-dom-mediadevices-selectaudiooutput">
   <a href="https://w3c.github.io/mediacapture-output/#dom-mediadevices-selectaudiooutput">https://w3c.github.io/mediacapture-output/#dom-mediadevices-selectaudiooutput</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-mediadevices-selectaudiooutput">6.3.17. Audio Output Devices API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-backgroundfetchmanager-fetch">
   <a href="https://wicg.github.io/background-fetch/#dom-backgroundfetchmanager-fetch">https://wicg.github.io/background-fetch/#dom-backgroundfetchmanager-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-backgroundfetchmanager-fetch">6.3.19. Background Fetch</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-battery-promise">
   <a href="https://w3c.github.io/battery/#dfn-battery-promise">https://w3c.github.io/battery/#dfn-battery-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-battery-promise">6.3.11. Battery Status API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-navigator-getbattery">
   <a href="https://w3c.github.io/battery/#dom-navigator-getbattery">https://w3c.github.io/battery/#dom-navigator-getbattery</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-getbattery">6.3.11. Battery Status API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-accept-ch-cache">
   <a href="https://wicg.github.io/client-hints-infrastructure#accept-ch-cache">https://wicg.github.io/client-hints-infrastructure#accept-ch-cache</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-accept-ch-cache">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-accept-ch-cache①">3.4. Interaction with Client Hint Cache</a> <a href="#ref-for-accept-ch-cache②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-add-a-new-accept-ch-cache-entry">
   <a href="https://wicg.github.io/client-hints-infrastructure#add-a-new-accept-ch-cache-entry">https://wicg.github.io/client-hints-infrastructure#add-a-new-accept-ch-cache-entry</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-add-a-new-accept-ch-cache-entry">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-add-a-new-accept-ch-cache-entry①">3.4. Interaction with Client Hint Cache</a> <a href="#ref-for-add-a-new-accept-ch-cache-entry②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abstract-opdef-append-client-hints-to-request">
   <a href="https://wicg.github.io/client-hints-infrastructure#abstract-opdef-append-client-hints-to-request">https://wicg.github.io/client-hints-infrastructure#abstract-opdef-append-client-hints-to-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abstract-opdef-append-client-hints-to-request">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-environment-settings-object-client-hints-set">
   <a href="https://wicg.github.io/client-hints-infrastructure#environment-settings-object-client-hints-set">https://wicg.github.io/client-hints-infrastructure#environment-settings-object-client-hints-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment-settings-object-client-hints-set">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abstract-opdef-update-the-client-hints-set">
   <a href="https://wicg.github.io/client-hints-infrastructure#abstract-opdef-update-the-client-hints-set">https://wicg.github.io/client-hints-infrastructure#abstract-opdef-update-the-client-hints-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abstract-opdef-update-the-client-hints-set">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-clipboard-read">
   <a href="https://w3c.github.io/clipboard-apis/#dom-clipboard-read">https://w3c.github.io/clipboard-apis/#dom-clipboard-read</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-clipboard-read">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-clipboard-readtext">
   <a href="https://w3c.github.io/clipboard-apis/#dom-clipboard-readtext">https://w3c.github.io/clipboard-apis/#dom-clipboard-readtext</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-clipboard-readtext">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-clipboard-write">
   <a href="https://w3c.github.io/clipboard-apis/#dom-clipboard-write">https://w3c.github.io/clipboard-apis/#dom-clipboard-write</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-clipboard-write">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-clipboard-writetext">
   <a href="https://w3c.github.io/clipboard-apis/#dom-clipboard-writetext">https://w3c.github.io/clipboard-apis/#dom-clipboard-writetext</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-clipboard-writetext">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-credentialscontainer-create">
   <a href="https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-create">https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-create</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-create">6.3.26. Credential Management</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-credentialscontainer-get">
   <a href="https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-get">https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-get</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-get">6.3.26. Credential Management</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-credentialscontainer-store">
   <a href="https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-store">https://w3c.github.io/webappsec-credential-management/#dom-credentialscontainer-store</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-store">6.3.26. Credential Management</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-should-block-navigation-request">
   <a href="https://w3c.github.io/webappsec-csp/#should-block-navigation-request">https://w3c.github.io/webappsec-csp/#should-block-navigation-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-should-block-navigation-request">2.1. Allowing activation in place of navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-document">
   <a href="https://dom.spec.whatwg.org/#document">https://dom.spec.whatwg.org/#document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-document">1.1. Extensions to the Document interface</a> <a href="#ref-for-document①">(2)</a> <a href="#ref-for-document②">(3)</a>
    <li><a href="#ref-for-document③">1.2. Prerendering browsing contexts</a> <a href="#ref-for-document④">(2)</a> <a href="#ref-for-document⑤">(3)</a> <a href="#ref-for-document⑥">(4)</a> <a href="#ref-for-document⑦">(5)</a> <a href="#ref-for-document⑧">(6)</a>
    <li><a href="#ref-for-document⑨">2.5. Interaction with Worker Lifetime</a>
    <li><a href="#ref-for-document①⓪">2.6. Cleanup upon discarding a Document</a> <a href="#ref-for-document①①">(2)</a>
    <li><a href="#ref-for-document①②">5.1. APIs for creating and navigating browsing contexts by name</a>
    <li><a href="#ref-for-document①③">6.3.13. Gamepad</a>
    <li><a href="#ref-for-document①④">6.3.15. Media Autoplay</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document">
   <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document">6.3.12. Screen Orientation API</a> <a href="#ref-for-concept-document①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-event-fire">
   <a href="https://dom.spec.whatwg.org/#concept-event-fire">https://dom.spec.whatwg.org/#concept-event-fire</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-event-fire">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-concept-event-fire①">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-node-document">
   <a href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-node-document">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-concept-node-document①">1.3. Modifications to creating browsing contexts</a>
    <li><a href="#ref-for-concept-node-document②">2.3. Delaying cross-origin nested browsing context navigations</a>
    <li><a href="#ref-for-concept-node-document③">6.1. Downloading resources</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-node">
   <a href="https://dom.spec.whatwg.org/#concept-node">https://dom.spec.whatwg.org/#concept-node</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-node">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-origin">
   <a href="https://dom.spec.whatwg.org/#concept-document-origin">https://dom.spec.whatwg.org/#concept-document-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-origin">1.2. Prerendering browsing contexts</a> <a href="#ref-for-concept-document-origin①">(2)</a> <a href="#ref-for-concept-document-origin②">(3)</a>
    <li><a href="#ref-for-concept-document-origin③">2.3. Delaying cross-origin nested browsing context navigations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-current-realm">
   <a href="https://tc39.es/ecma262/#current-realm">https://tc39.es/ecma262/#current-realm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-realm">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-requestMediaKeySystemAccess">
   <a href="https://w3c.github.io/encrypted-media/#requestMediaKeySystemAccess">https://w3c.github.io/encrypted-media/#requestMediaKeySystemAccess</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-requestMediaKeySystemAccess">6.3.14. Encrypted Media Extensions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request-current-url">
   <a href="https://fetch.spec.whatwg.org/#concept-request-current-url">https://fetch.spec.whatwg.org/#concept-request-current-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request-current-url">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-fetch">
   <a href="https://fetch.spec.whatwg.org/#concept-fetch">https://fetch.spec.whatwg.org/#concept-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-fetch">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-header-list-get-structured-header">
   <a href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header">https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-header-list-get-structured-header">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response-header-list">
   <a href="https://fetch.spec.whatwg.org/#concept-response-header-list">https://fetch.spec.whatwg.org/#concept-response-header-list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response-header-list">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-http-scheme">
   <a href="https://fetch.spec.whatwg.org/#http-scheme">https://fetch.spec.whatwg.org/#http-scheme</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-http-scheme">1.2. Prerendering browsing contexts</a> <a href="#ref-for-http-scheme①">(2)</a>
    <li><a href="#ref-for-http-scheme②">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request-method">
   <a href="https://fetch.spec.whatwg.org/#concept-request-method">https://fetch.spec.whatwg.org/#concept-request-method</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request-method">2.1. Allowing activation in place of navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-network-error">
   <a href="https://fetch.spec.whatwg.org/#concept-network-error">https://fetch.spec.whatwg.org/#concept-network-error</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-network-error">2.2. Navigation fetch changes</a>
    <li><a href="#ref-for-concept-network-error①">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request-referrer-policy">
   <a href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">https://fetch.spec.whatwg.org/#concept-request-referrer-policy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request-referrer-policy">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-request">
   <a href="https://fetch.spec.whatwg.org/#concept-request">https://fetch.spec.whatwg.org/#concept-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-request">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-concept-request①">2.1. Allowing activation in place of navigation</a> <a href="#ref-for-concept-request②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response">
   <a href="https://fetch.spec.whatwg.org/#concept-response">https://fetch.spec.whatwg.org/#concept-response</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response-status">
   <a href="https://fetch.spec.whatwg.org/#concept-response-status">https://fetch.spec.whatwg.org/#concept-response-status</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response-status">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-response-url">
   <a href="https://fetch.spec.whatwg.org/#concept-response-url">https://fetch.spec.whatwg.org/#concept-response-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-response-url">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-window-showdirectorypicker">
   <a href="https://wicg.github.io/file-system-access/#dom-window-showdirectorypicker">https://wicg.github.io/file-system-access/#dom-window-showdirectorypicker</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-showdirectorypicker">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-window-showopenfilepicker">
   <a href="https://wicg.github.io/file-system-access/#dom-window-showopenfilepicker">https://wicg.github.io/file-system-access/#dom-window-showopenfilepicker</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-showopenfilepicker">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-window-showsavefilepicker">
   <a href="https://wicg.github.io/file-system-access/#dom-window-showsavefilepicker">https://wicg.github.io/file-system-access/#dom-window-showsavefilepicker</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-showsavefilepicker">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-element-requestfullscreen">
   <a href="https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen">https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-element-requestfullscreen">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-gamepad">
   <a href="https://w3c.github.io/gamepad/#dom-gamepad">https://w3c.github.io/gamepad/#dom-gamepad</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-gamepad">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-gamepadevent">
   <a href="https://w3c.github.io/gamepad/#dom-gamepadevent">https://w3c.github.io/gamepad/#dom-gamepadevent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-gamepadevent">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-gamepadevent-gamepad">
   <a href="https://w3c.github.io/gamepad/#dom-gamepadevent-gamepad">https://w3c.github.io/gamepad/#dom-gamepadevent-gamepad</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-gamepadevent-gamepad">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-gamepadconnected">
   <a href="https://w3c.github.io/gamepad/#dfn-gamepadconnected">https://w3c.github.io/gamepad/#dfn-gamepadconnected</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-gamepadconnected">6.3.13. Gamepad</a> <a href="#ref-for-dfn-gamepadconnected①">(2)</a> <a href="#ref-for-dfn-gamepadconnected②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-gamepaddisconnected">
   <a href="https://w3c.github.io/gamepad/#dfn-gamepaddisconnected">https://w3c.github.io/gamepad/#dfn-gamepaddisconnected</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-gamepaddisconnected">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-navigator-getgamepads">
   <a href="https://w3c.github.io/gamepad/#dom-navigator-getgamepads">https://w3c.github.io/gamepad/#dom-navigator-getgamepads</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-getgamepads">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-sensor-state-slot">
   <a href="https://w3c.github.io/sensors/#dom-sensor-state-slot">https://w3c.github.io/sensors/#dom-sensor-state-slot</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-state-slot">6.3.9. Generic Sensor API</a> <a href="#ref-for-dom-sensor-state-slot①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-sensor-start">
   <a href="https://w3c.github.io/sensors/#dom-sensor-start">https://w3c.github.io/sensors/#dom-sensor-start</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-start">6.3.9. Generic Sensor API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-sensor-stop">
   <a href="https://w3c.github.io/sensors/#dom-sensor-stop">https://w3c.github.io/sensors/#dom-sensor-stop</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-stop">6.3.9. Generic Sensor API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-clearwatch-method">
   <a href="https://w3c.github.io/geolocation-api/#clearwatch-method">https://w3c.github.io/geolocation-api/#clearwatch-method</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-clearwatch-method">6.3.4. Geolocation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-getcurrentposition-method">
   <a href="https://w3c.github.io/geolocation-api/#getcurrentposition-method">https://w3c.github.io/geolocation-api/#getcurrentposition-method</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-getcurrentposition-method">6.3.4. Geolocation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-watch-process">
   <a href="https://w3c.github.io/geolocation-api/#dfn-watch-process">https://w3c.github.io/geolocation-api/#dfn-watch-process</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-watch-process">6.3.4. Geolocation API</a> <a href="#ref-for-dfn-watch-process①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-watchposition-method">
   <a href="https://w3c.github.io/geolocation-api/#watchposition-method">https://w3c.github.io/geolocation-api/#watchposition-method</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-watchposition-method">6.3.4. Geolocation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-hid-getdevices">
   <a href="https://wicg.github.io/webhid/#dom-hid-getdevices">https://wicg.github.io/webhid/#dom-hid-getdevices</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-hid-getdevices">6.3.24. WebHID API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-hid-requestdevice">
   <a href="https://wicg.github.io/webhid/#dom-hid-requestdevice">https://wicg.github.io/webhid/#dom-hid-requestdevice</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-hid-requestdevice">6.3.24. WebHID API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domhighrestimestamp">
   <a href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domhighrestimestamp">1.2. Prerendering browsing contexts</a> <a href="#ref-for-dom-domhighrestimestamp①">(2)</a>
    <li><a href="#ref-for-dom-domhighrestimestamp②">3.3. Extensions to the PerformanceNavigationTiming interface</a> <a href="#ref-for-dom-domhighrestimestamp③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-relative-high-resolution-time">
   <a href="https://www.w3.org/TR/hr-time-3/#dfn-relative-high-resolution-time">https://www.w3.org/TR/hr-time-3/#dfn-relative-high-resolution-time</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-relative-high-resolution-time">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-unsafe-shared-current-time">
   <a href="https://www.w3.org/TR/hr-time-3/#dfn-unsafe-shared-current-time">https://www.w3.org/TR/hr-time-3/#dfn-unsafe-shared-current-time</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-unsafe-shared-current-time">1.2. Prerendering browsing contexts</a> <a href="#ref-for-dfn-unsafe-shared-current-time①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dedicatedworkerglobalscope">
   <a href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope">https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dedicatedworkerglobalscope">6.3.5. Web Serial API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventhandler">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventhandler">1.1. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlmediaelement">
   <a href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement">https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlmediaelement">6.3.15. Media Autoplay</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#window">https://html.spec.whatwg.org/multipage/window-object.html#window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-window①">6.2. User prompts</a>
    <li><a href="#ref-for-window②">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
    <li><a href="#ref-for-window③">6.3.5. Web Serial API</a>
    <li><a href="#ref-for-window④">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abort-a-document">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#abort-a-document">https://html.spec.whatwg.org/multipage/browsing-the-web.html#abort-a-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abort-a-document">1.2. Prerendering browsing contexts</a> <a href="#ref-for-abort-a-document①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-document">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">https://html.spec.whatwg.org/multipage/browsers.html#active-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-document">1.2. Prerendering browsing contexts</a> <a href="#ref-for-active-document①">(2)</a> <a href="#ref-for-active-document②">(3)</a> <a href="#ref-for-active-document③">(4)</a> <a href="#ref-for-active-document④">(5)</a> <a href="#ref-for-active-document⑤">(6)</a>
    <li><a href="#ref-for-active-document⑥">2.1. Allowing activation in place of navigation</a> <a href="#ref-for-active-document⑦">(2)</a>
    <li><a href="#ref-for-active-document⑧">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-needed-worker">
   <a href="https://html.spec.whatwg.org/multipage/workers.html#active-needed-worker">https://html.spec.whatwg.org/multipage/workers.html#active-needed-worker</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-needed-worker">2.5. Interaction with Worker Lifetime</a> <a href="#ref-for-active-needed-worker①">(2)</a> <a href="#ref-for-active-needed-worker②">(3)</a> <a href="#ref-for-active-needed-worker③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-sandboxing-flag-set">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#active-sandboxing-flag-set">https://html.spec.whatwg.org/multipage/origin.html#active-sandboxing-flag-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-sandboxing-flag-set">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-active-window">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#active-window">https://html.spec.whatwg.org/multipage/browsers.html#active-window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-active-window">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-active-window①">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-allowed-to-use">
   <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-allowed-to-use">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-document-window">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window">https://html.spec.whatwg.org/multipage/window-object.html#concept-document-window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-document-window">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-concept-document-window①">6.3.5. Web Serial API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-auxiliary-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#auxiliary-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#auxiliary-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-auxiliary-browsing-context">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-auxiliary-browsing-context①">5.1. APIs for creating and navigating browsing contexts by name</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-beforeunload">
   <a href="https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload">https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-beforeunload">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window-bc">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#window-bc">https://html.spec.whatwg.org/multipage/window-object.html#window-bc</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-window-bc">3.4. Interaction with Client Hint Cache</a>
    <li><a href="#ref-for-window-bc①">6.2. User prompts</a> <a href="#ref-for-window-bc②">(2)</a>
    <li><a href="#ref-for-window-bc③">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
    <li><a href="#ref-for-window-bc④">6.3.4. Geolocation API</a> <a href="#ref-for-window-bc⑤">(2)</a> <a href="#ref-for-window-bc⑥">(3)</a>
    <li><a href="#ref-for-window-bc⑦">6.3.6. Notifications API</a> <a href="#ref-for-window-bc⑧">(2)</a>
    <li><a href="#ref-for-window-bc⑨">6.3.9. Generic Sensor API</a>
    <li><a href="#ref-for-window-bc①⓪">6.3.11. Battery Status API</a>
    <li><a href="#ref-for-window-bc①①">6.3.12. Screen Orientation API</a>
    <li><a href="#ref-for-window-bc①②">6.3.13. Gamepad</a> <a href="#ref-for-window-bc①③">(2)</a>
    <li><a href="#ref-for-window-bc①④">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cannot-show-simple-dialogs">
   <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#cannot-show-simple-dialogs">https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#cannot-show-simple-dialogs</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cannot-show-simple-dialogs">6.2. User prompts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-bc-container">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#bc-container">https://html.spec.whatwg.org/multipage/browsers.html#bc-container</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bc-container">2.3. Delaying cross-origin nested browsing context navigations</a> <a href="#ref-for-bc-container①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-creating-a-new-nested-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-nested-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-nested-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-creating-a-new-nested-browsing-context">1.3. Modifications to creating browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-initialise-the-document-object">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#initialise-the-document-object">https://html.spec.whatwg.org/multipage/browsing-the-web.html#initialise-the-document-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-initialise-the-document-object">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-creating-a-new-top-level-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-top-level-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-top-level-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-creating-a-new-top-level-browsing-context">1.2. Prerendering browsing contexts</a> <a href="#ref-for-creating-a-new-top-level-browsing-context①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-cross-origin-opener-policy-2">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#cross-origin-opener-policy-2">https://html.spec.whatwg.org/multipage/origin.html#cross-origin-opener-policy-2</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cross-origin-opener-policy-2">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-current-global-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object">https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-global-object">6.3.6. Notifications API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-current-playback-position">
   <a href="https://html.spec.whatwg.org/multipage/media.html#current-playback-position">https://html.spec.whatwg.org/multipage/media.html#current-playback-position</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-playback-position">6.3.15. Media Autoplay</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-browsing-context-is-discarded">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded">https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-browsing-context-is-discarded">1.2. Prerendering browsing contexts</a> <a href="#ref-for-a-browsing-context-is-discarded①">(2)</a> <a href="#ref-for-a-browsing-context-is-discarded②">(3)</a>
    <li><a href="#ref-for-a-browsing-context-is-discarded③">2.1. Allowing activation in place of navigation</a>
    <li><a href="#ref-for-a-browsing-context-is-discarded④">2.3. Delaying cross-origin nested browsing context navigations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-discard-a-document">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#discard-a-document">https://html.spec.whatwg.org/multipage/window-object.html#discard-a-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-discard-a-document">2.6. Cleanup upon discarding a Document</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-she-document">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#she-document">https://html.spec.whatwg.org/multipage/browsing-the-web.html#she-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-she-document">2.4. Maintaining a trivial session history</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-downloading-hyperlinks">
   <a href="https://html.spec.whatwg.org/multipage/links.html#downloading-hyperlinks">https://html.spec.whatwg.org/multipage/links.html#downloading-hyperlinks</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-downloading-hyperlinks">6.1. Downloading resources</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-environment-discarding-steps">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-discarding-steps">https://html.spec.whatwg.org/multipage/webappapis.html#environment-discarding-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-environment-discarding-steps">2.2. Navigation fetch changes</a> <a href="#ref-for-environment-discarding-steps①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-handler-event-type">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-handler-event-type">1.1. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-handler-idl-attributes">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-handler-idl-attributes">1.1. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-loop">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">https://html.spec.whatwg.org/multipage/webappapis.html#event-loop</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-loop">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-fully-active">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">https://html.spec.whatwg.org/multipage/browsers.html#fully-active</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-fully-active">2.5. Interaction with Worker Lifetime</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-settings-object-global">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-global">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-history-handling-behavior">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior">https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-history-handling-behavior">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-history-handling-behavior①">2.1. Allowing activation in place of navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-in-parallel">
   <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-parallel">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-in-parallel①">6.1. Downloading resources</a>
    <li><a href="#ref-for-in-parallel②">6.3.6. Notifications API</a> <a href="#ref-for-in-parallel③">(2)</a>
    <li><a href="#ref-for-in-parallel④">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-of-the-descendant-browsing-contexts">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts">https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-of-the-descendant-browsing-contexts">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-navigate-mature">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#concept-navigate-mature">https://html.spec.whatwg.org/multipage/browsing-the-web.html#concept-navigate-mature</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-navigate-mature">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-concept-navigate-mature①">2.1. Allowing activation in place of navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigate">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigate">1.2. Prerendering browsing contexts</a> <a href="#ref-for-navigate①">(2)</a> <a href="#ref-for-navigate②">(3)</a>
    <li><a href="#ref-for-navigate③">2.1. Allowing activation in place of navigation</a> <a href="#ref-for-navigate④">(2)</a>
    <li><a href="#ref-for-navigate⑤">2.4. Maintaining a trivial session history</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nested-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nested-browsing-context">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-nested-browsing-context①">1.3. Modifications to creating browsing contexts</a>
    <li><a href="#ref-for-nested-browsing-context②">2.3. Delaying cross-origin nested browsing context navigations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-networking-task-source">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source">https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-networking-task-source">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-handler-onreadystatechange">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#handler-onreadystatechange">https://html.spec.whatwg.org/multipage/webappapis.html#handler-onreadystatechange</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handler-onreadystatechange">1.1. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-open">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#dom-open">https://html.spec.whatwg.org/multipage/window-object.html#dom-open</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-open">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-opener-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#opener-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#opener-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-opener-browsing-context">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-origin">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin">https://html.spec.whatwg.org/multipage/origin.html#concept-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-origin">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-concept-origin①">3.4. Interaction with Client Hint Cache</a> <a href="#ref-for-concept-origin②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-WorkerGlobalScope-owner-set">
   <a href="https://html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set">https://html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-WorkerGlobalScope-owner-set">2.5. Interaction with Worker Lifetime</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-playing-the-media-resource">
   <a href="https://html.spec.whatwg.org/multipage/media.html#playing-the-media-resource">https://html.spec.whatwg.org/multipage/media.html#playing-the-media-resource</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-playing-the-media-resource">6.3.15. Media Autoplay</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-broadcastchannel-postmessage">
   <a href="https://html.spec.whatwg.org/multipage/web-messaging.html#dom-broadcastchannel-postmessage">https://html.spec.whatwg.org/multipage/web-messaging.html#dom-broadcastchannel-postmessage</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-broadcastchannel-postmessage">6.3.3. BroadcastChannel</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-print">
   <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-print">https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-print</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-print">6.2. User prompts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-process-a-navigate-fetch">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-fetch">https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-fetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-navigate-fetch">2.2. Navigation fetch changes</a>
    <li><a href="#ref-for-process-a-navigate-fetch①">2.3. Delaying cross-origin nested browsing context navigations</a> <a href="#ref-for-process-a-navigate-fetch②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-process-a-navigate-response">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-response">https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-response</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-navigate-response">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-process-a-navigate-url-scheme">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-url-scheme">https://html.spec.whatwg.org/multipage/browsing-the-web.html#process-a-navigate-url-scheme</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-process-a-navigate-url-scheme">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-prompt-to-unload-a-document">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document">https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prompt-to-unload-a-document">1.2. Prerendering browsing contexts</a> <a href="#ref-for-prompt-to-unload-a-document①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-queue-a-global-task">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-global-task">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-refused-to-allow-the-document-to-be-unloaded">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#refused-to-allow-the-document-to-be-unloaded">https://html.spec.whatwg.org/multipage/browsing-the-web.html#refused-to-allow-the-document-to-be-unloaded</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-refused-to-allow-the-document-to-be-unloaded">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-global">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-global">1.2. Prerendering browsing contexts</a> <a href="#ref-for-concept-relevant-global①">(2)</a>
    <li><a href="#ref-for-concept-relevant-global②">6.3.4. Geolocation API</a> <a href="#ref-for-concept-relevant-global③">(2)</a> <a href="#ref-for-concept-relevant-global④">(3)</a>
    <li><a href="#ref-for-concept-relevant-global⑤">6.3.5. Web Serial API</a> <a href="#ref-for-concept-relevant-global⑥">(2)</a> <a href="#ref-for-concept-relevant-global⑦">(3)</a> <a href="#ref-for-concept-relevant-global⑧">(4)</a>
    <li><a href="#ref-for-concept-relevant-global⑨">6.3.6. Notifications API</a>
    <li><a href="#ref-for-concept-relevant-global①⓪">6.3.9. Generic Sensor API</a>
    <li><a href="#ref-for-concept-relevant-global①①">6.3.11. Battery Status API</a>
    <li><a href="#ref-for-concept-relevant-global①②">6.3.12. Screen Orientation API</a>
    <li><a href="#ref-for-concept-relevant-global①③">6.3.13. Gamepad</a> <a href="#ref-for-concept-relevant-global①④">(2)</a>
    <li><a href="#ref-for-concept-relevant-global①⑤">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-realm">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relevant-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-settings-object">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-bcg-remove">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#bcg-remove">https://html.spec.whatwg.org/multipage/browsers.html#bcg-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-bcg-remove">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-params-request">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-request">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params-request">2.2. Navigation fetch changes</a> <a href="#ref-for-navigation-params-request①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigation-params-reserved-environment">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-reserved-environment">https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-params-reserved-environment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigation-params-reserved-environment">2.2. Navigation fetch changes</a> <a href="#ref-for-navigation-params-reserved-environment①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-same-origin">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#same-origin">https://html.spec.whatwg.org/multipage/origin.html#same-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-same-origin">2.2. Navigation fetch changes</a>
    <li><a href="#ref-for-same-origin①">2.3. Delaying cross-origin nested browsing context navigations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-same-site">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#same-site">https://html.spec.whatwg.org/multipage/origin.html#same-site</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-same-site">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-same-site①">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-sandboxed-orientation-lock-browsing-context-flag">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#sandboxed-orientation-lock-browsing-context-flag">https://html.spec.whatwg.org/multipage/origin.html#sandboxed-orientation-lock-browsing-context-flag</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sandboxed-orientation-lock-browsing-context-flag">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-script-closable">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#script-closable">https://html.spec.whatwg.org/multipage/window-object.html#script-closable</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-script-closable">5.1. APIs for creating and navigating browsing contexts by name</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-secure-context">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">https://html.spec.whatwg.org/multipage/webappapis.html#secure-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-secure-context">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-session-history">
   <a href="https://html.spec.whatwg.org/multipage/history.html#session-history">https://html.spec.whatwg.org/multipage/history.html#session-history</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-session-history">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-session-history①">2.4. Maintaining a trivial session history</a>
    <li><a href="#ref-for-session-history②">5.1. APIs for creating and navigating browsing contexts by name</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-source-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context">https://html.spec.whatwg.org/multipage/browsing-the-web.html#source-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-source-browsing-context">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-sticky-activation">
   <a href="https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation">https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sticky-activation">6.4. Implicitly restricted APIs</a> <a href="#ref-for-sticky-activation①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-tlbc-system-focus">
   <a href="https://html.spec.whatwg.org/multipage/interaction.html#tlbc-system-focus">https://html.spec.whatwg.org/multipage/interaction.html#tlbc-system-focus</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tlbc-system-focus">3.2. Interaction with system focus</a>
    <li><a href="#ref-for-tlbc-system-focus①">6.4. Implicitly restricted APIs</a> <a href="#ref-for-tlbc-system-focus②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-worker&apos;s-lifetime">
   <a href="https://html.spec.whatwg.org/multipage/workers.html#the-worker&apos;s-lifetime">https://html.spec.whatwg.org/multipage/workers.html#the-worker's-lifetime</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-worker&apos;s-lifetime">2.5. Interaction with Worker Lifetime</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-top-level-browsing-context">
   <a href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-top-level-browsing-context">1.2. Prerendering browsing contexts</a> <a href="#ref-for-top-level-browsing-context①">(2)</a> <a href="#ref-for-top-level-browsing-context②">(3)</a>
    <li><a href="#ref-for-top-level-browsing-context③">2.1. Allowing activation in place of navigation</a>
    <li><a href="#ref-for-top-level-browsing-context④">2.3. Delaying cross-origin nested browsing context navigations</a> <a href="#ref-for-top-level-browsing-context⑤">(2)</a>
    <li><a href="#ref-for-top-level-browsing-context⑥">5. Preventing nonsensical behaviors</a>
    <li><a href="#ref-for-top-level-browsing-context⑦">5.1. APIs for creating and navigating browsing contexts by name</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-transient-activation">
   <a href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation">https://html.spec.whatwg.org/multipage/interaction.html#transient-activation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transient-activation">6.3.8. Idle Detection API</a>
    <li><a href="#ref-for-transient-activation①">6.4. Implicitly restricted APIs</a> <a href="#ref-for-transient-activation②">(2)</a> <a href="#ref-for-transient-activation③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-traverse-the-history">
   <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history">https://html.spec.whatwg.org/multipage/browsing-the-web.html#traverse-the-history</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-traverse-the-history">2.4. Maintaining a trivial session history</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-url-and-history-update-steps">
   <a href="https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps">https://html.spec.whatwg.org/multipage/history.html#url-and-history-update-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-url-and-history-update-steps">2.4. Maintaining a trivial session history</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-visibility-state">
   <a href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state">https://html.spec.whatwg.org/multipage/interaction.html#visibility-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-visibility-state">3.1. Interaction with Page Visibility</a>
    <li><a href="#ref-for-visibility-state①">6.4. Implicitly restricted APIs</a> <a href="#ref-for-visibility-state②">(2)</a> <a href="#ref-for-visibility-state③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-api-idledetector-requestpermission">
   <a href="https://wicg.github.io/idle-detection/#api-idledetector-requestpermission">https://wicg.github.io/idle-detection/#api-idledetector-requestpermission</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-api-idledetector-requestpermission">6.3.8. Idle Detection API</a>
    <li><a href="#ref-for-api-idledetector-requestpermission①">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-api-idledetector-start">
   <a href="https://wicg.github.io/idle-detection/#api-idledetector-start">https://wicg.github.io/idle-detection/#api-idledetector-start</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-api-idledetector-start">6.3.8. Idle Detection API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-assert">
   <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-assert">1.2. Prerendering browsing contexts</a> <a href="#ref-for-assert①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-contain">
   <a href="https://infra.spec.whatwg.org/#list-contain">https://infra.spec.whatwg.org/#list-contain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-contain">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-empty">
   <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-empty">2.6. Cleanup upon discarding a Document</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-exists">
   <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-exists">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-map-exists①">2.1. Allowing activation in place of navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-extend">
   <a href="https://infra.spec.whatwg.org/#list-extend">https://infra.spec.whatwg.org/#list-extend</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-extend">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-iterate">
   <a href="https://infra.spec.whatwg.org/#map-iterate">https://infra.spec.whatwg.org/#map-iterate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-iterate">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-item">
   <a href="https://infra.spec.whatwg.org/#list-item">https://infra.spec.whatwg.org/#list-item</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-item">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list">
   <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-list①">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ordered-map">
   <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ordered-map">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-ordered-map①">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-remove">
   <a href="https://infra.spec.whatwg.org/#map-remove">https://infra.spec.whatwg.org/#map-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-remove">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-set">
   <a href="https://infra.spec.whatwg.org/#map-set">https://infra.spec.whatwg.org/#map-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-set">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-set-union">
   <a href="https://infra.spec.whatwg.org/#set-union">https://infra.spec.whatwg.org/#set-union</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-union">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-user-agent">
   <a href="https://infra.spec.whatwg.org/#user-agent">https://infra.spec.whatwg.org/#user-agent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-agent">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-user-agent①">6.3.12. Screen Orientation API</a> <a href="#ref-for-user-agent②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-keyboard-lock">
   <a href="https://wicg.github.io/keyboard-lock/#dom-keyboard-lock">https://wicg.github.io/keyboard-lock/#dom-keyboard-lock</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-keyboard-lock">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-device-change-notification-steps">
   <a href="https://w3c.github.io/mediacapture-main/#dfn-device-change-notification-steps">https://w3c.github.io/mediacapture-main/#dfn-device-change-notification-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-device-change-notification-steps">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-mediadevices">
   <a href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices">https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-mediadevices">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-mediadevices-enumeratedevices">
   <a href="https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices">https://www.w3.org/TR/mediacapture-streams/#dom-mediadevices-enumeratedevices</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-mediadevices-enumeratedevices">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-navigator-getusermedia">
   <a href="https://www.w3.org/TR/mediacapture-streams/#dom-navigator-getusermedia">https://www.w3.org/TR/mediacapture-streams/#dom-navigator-getusermedia</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-getusermedia">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-supports-prefetch">
   <a href="prefetch.html#supports-prefetch">prefetch.html#supports-prefetch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-supports-prefetch">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-current-document">
   <a href="https://w3c.github.io/navigation-timing/#dfn-current-document">https://w3c.github.io/navigation-timing/#dfn-current-document</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-current-document">3.3. Extensions to the PerformanceNavigationTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-performancenavigationtiming">
   <a href="https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming">https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-performancenavigationtiming">3.3. Extensions to the PerformanceNavigationTiming interface</a> <a href="#ref-for-dom-performancenavigationtiming①">(2)</a> <a href="#ref-for-dom-performancenavigationtiming②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-notification-notification">
   <a href="https://notifications.spec.whatwg.org/#dom-notification-notification">https://notifications.spec.whatwg.org/#dom-notification-notification</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-notification-notification">6.3.6. Notifications API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-get-the-notifications-permission-state">
   <a href="https://notifications.spec.whatwg.org/#get-the-notifications-permission-state">https://notifications.spec.whatwg.org/#get-the-notifications-permission-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-get-the-notifications-permission-state">6.3.6. Notifications API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-notification-permission">
   <a href="https://notifications.spec.whatwg.org/#dom-notification-permission">https://notifications.spec.whatwg.org/#dom-notification-permission</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-notification-permission">6.3.6. Notifications API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-notification-requestpermission">
   <a href="https://notifications.spec.whatwg.org/#dom-notification-requestpermission">https://notifications.spec.whatwg.org/#dom-notification-requestpermission</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-notification-requestpermission">6.3.6. Notifications API</a> <a href="#ref-for-dom-notification-requestpermission①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-paymentrequest-show">
   <a href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show">https://www.w3.org/TR/payment-request/#dom-paymentrequest-show</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-paymentrequest-show">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-htmlvideoelement-requestpictureinpicture">
   <a href="https://w3c.github.io/picture-in-picture/#dom-htmlvideoelement-requestpictureinpicture">https://w3c.github.io/picture-in-picture/#dom-htmlvideoelement-requestpictureinpicture</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-htmlvideoelement-requestpictureinpicture">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-request-picture-in-picture-algorithm">
   <a href="https://w3c.github.io/picture-in-picture/#request-picture-in-picture-algorithm">https://w3c.github.io/picture-in-picture/#request-picture-in-picture-algorithm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-picture-in-picture-algorithm">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-htmlvideoelement-autopictureinpicture">
   <a href="https://w3c.github.io/picture-in-picture/#dom-htmlvideoelement-autopictureinpicture">https://w3c.github.io/picture-in-picture/#dom-htmlvideoelement-autopictureinpicture</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-htmlvideoelement-autopictureinpicture">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-requestpointerlock-pointerlockoptions-options">
   <a href="https://w3c.github.io/pointerlock/#dfn-requestpointerlock-pointerlockoptions-options">https://w3c.github.io/pointerlock/#dfn-requestpointerlock-pointerlockoptions-options</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-requestpointerlock-pointerlockoptions-options">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-presentationrequest-start">
   <a href="https://w3c.github.io/presentation-api/#dom-presentationrequest-start">https://w3c.github.io/presentation-api/#dom-presentationrequest-start</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-presentationrequest-start">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-pushmanager-subscribe">
   <a href="https://w3c.github.io/push-api/#dom-pushmanager-subscribe">https://w3c.github.io/push-api/#dom-pushmanager-subscribe</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-pushmanager-subscribe">6.3.18. Push API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-name-lists">
   <a href="https://www.rfc-editor.org/rfc/rfc8941.html#name-lists">https://www.rfc-editor.org/rfc/rfc8941.html#name-lists</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-name-lists">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-section-1">
   <a href="https://www.rfc-editor.org/rfc/rfc8941.html#section-1">https://www.rfc-editor.org/rfc/rfc8941.html#section-1</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-section-1">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-name-tokens">
   <a href="https://www.rfc-editor.org/rfc/rfc8941.html#name-tokens">https://www.rfc-editor.org/rfc/rfc8941.html#name-tokens</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-name-tokens">4. The `Supports-Loading-Mode` HTTP response header</a> <a href="#ref-for-name-tokens①">(2)</a> <a href="#ref-for-name-tokens②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-mediadevices-getdisplaymedia">
   <a href="https://w3c.github.io/mediacapture-screen-share#dom-mediadevices-getdisplaymedia">https://w3c.github.io/mediacapture-screen-share#dom-mediadevices-getdisplaymedia</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-mediadevices-getdisplaymedia">6.3.21. Screen Capture</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-apply-an-orientation-lock">
   <a href="https://w3c.github.io/screen-orientation/#dfn-apply-an-orientation-lock">https://w3c.github.io/screen-orientation/#dfn-apply-an-orientation-lock</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-apply-an-orientation-lock">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-screenorientation-lock">
   <a href="https://w3c.github.io/screen-orientation/#dom-screenorientation-lock">https://w3c.github.io/screen-orientation/#dom-screenorientation-lock</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-screenorientation-lock">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-pre-lock-conditions">
   <a href="https://w3c.github.io/screen-orientation/#dfn-pre-lock-conditions">https://w3c.github.io/screen-orientation/#dfn-pre-lock-conditions</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-pre-lock-conditions">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-screenorientation-unlock">
   <a href="https://w3c.github.io/screen-orientation/#dom-screenorientation-unlock">https://w3c.github.io/screen-orientation/#dom-screenorientation-unlock</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-screenorientation-unlock">6.3.12. Screen Orientation API</a> <a href="#ref-for-dom-screenorientation-unlock①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-request-method">
   <a href="https://w3c.github.io/screen-wake-lock/#the-request-method">https://w3c.github.io/screen-wake-lock/#the-request-method</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-request-method">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serial-getports">
   <a href="https://wicg.github.io/serial/#dom-serial-getports">https://wicg.github.io/serial/#dom-serial-getports</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serial-getports">6.3.5. Web Serial API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serial-requestPort">
   <a href="https://wicg.github.io/serial/#dom-serial-requestPort">https://wicg.github.io/serial/#dom-serial-requestPort</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serial-requestPort">6.3.5. Web Serial API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serviceworker-postmessage-message-options">
   <a href="https://w3c.github.io/ServiceWorker/#dom-serviceworker-postmessage-message-options">https://w3c.github.io/ServiceWorker/#dom-serviceworker-postmessage-message-options</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serviceworker-postmessage-message-options">6.3.2. Service Workers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serviceworker-postmessage">
   <a href="https://w3c.github.io/ServiceWorker/#dom-serviceworker-postmessage">https://w3c.github.io/ServiceWorker/#dom-serviceworker-postmessage</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serviceworker-postmessage">6.3.2. Service Workers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serviceworkercontainer-register">
   <a href="https://w3c.github.io/ServiceWorker/#dom-serviceworkercontainer-register">https://w3c.github.io/ServiceWorker/#dom-serviceworkercontainer-register</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serviceworkercontainer-register">6.3.2. Service Workers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serviceworkerregistration-unregister">
   <a href="https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-unregister">https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-unregister</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serviceworkerregistration-unregister">6.3.2. Service Workers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-serviceworkerregistration-update">
   <a href="https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-update">https://w3c.github.io/ServiceWorker/#dom-serviceworkerregistration-update</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-serviceworkerregistration-update">6.3.2. Service Workers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechrecognition-abort">
   <a href="https://wicg.github.io/speech-api/#dom-speechrecognition-abort">https://wicg.github.io/speech-api/#dom-speechrecognition-abort</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechrecognition-abort">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechsynthesis-cancel">
   <a href="https://wicg.github.io/speech-api/#dom-speechsynthesis-cancel">https://wicg.github.io/speech-api/#dom-speechsynthesis-cancel</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechsynthesis-cancel">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechsynthesis-pause">
   <a href="https://wicg.github.io/speech-api/#dom-speechsynthesis-pause">https://wicg.github.io/speech-api/#dom-speechsynthesis-pause</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechsynthesis-pause">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechsynthesis-resume">
   <a href="https://wicg.github.io/speech-api/#dom-speechsynthesis-resume">https://wicg.github.io/speech-api/#dom-speechsynthesis-resume</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechsynthesis-resume">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechsynthesis-speak">
   <a href="https://wicg.github.io/speech-api/#dom-speechsynthesis-speak">https://wicg.github.io/speech-api/#dom-speechsynthesis-speak</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechsynthesis-speak">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechrecognition-start">
   <a href="https://wicg.github.io/speech-api/#dom-speechrecognition-start">https://wicg.github.io/speech-api/#dom-speechrecognition-start</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechrecognition-start">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-speechrecognition-stop">
   <a href="https://wicg.github.io/speech-api/#dom-speechrecognition-stop">https://wicg.github.io/speech-api/#dom-speechrecognition-stop</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-speechrecognition-stop">6.3.27. Web Speech API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-storagemanager-persist">
   <a href="https://storage.spec.whatwg.org/#dom-storagemanager-persist">https://storage.spec.whatwg.org/#dom-storagemanager-persist</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagemanager-persist">6.3.20. Storage API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-origin">
   <a href="https://url.spec.whatwg.org/#concept-url-origin">https://url.spec.whatwg.org/#concept-url-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-origin">1.2. Prerendering browsing contexts</a> <a href="#ref-for-concept-url-origin①">(2)</a>
    <li><a href="#ref-for-concept-url-origin②">2.2. Navigation fetch changes</a>
    <li><a href="#ref-for-concept-url-origin③">2.3. Delaying cross-origin nested browsing context navigations</a>
    <li><a href="#ref-for-concept-url-origin④">3.4. Interaction with Client Hint Cache</a> <a href="#ref-for-concept-url-origin⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url-scheme">
   <a href="https://url.spec.whatwg.org/#concept-url-scheme">https://url.spec.whatwg.org/#concept-url-scheme</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url-scheme">1.2. Prerendering browsing contexts</a> <a href="#ref-for-concept-url-scheme①">(2)</a>
    <li><a href="#ref-for-concept-url-scheme②">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url">
   <a href="https://url.spec.whatwg.org/#concept-url">https://url.spec.whatwg.org/#concept-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url">1.2. Prerendering browsing contexts</a> <a href="#ref-for-concept-url①">(2)</a> <a href="#ref-for-concept-url②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-bluetooth-getdevices">
   <a href="https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetooth-getdevices">https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetooth-getdevices</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-bluetooth-getdevices">6.3.23. Web Bluetooth</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-bluetooth-requestdevice">
   <a href="https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetooth-requestdevice">https://webbluetoothcg.github.io/web-bluetooth/#dom-bluetooth-requestdevice</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-bluetooth-requestdevice">6.3.23. Web Bluetooth</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-lockmanager-query">
   <a href="https://w3c.github.io/web-locks/#dom-lockmanager-query">https://w3c.github.io/web-locks/#dom-lockmanager-query</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-lockmanager-query">6.3.28. Web Locks API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-lockmanager-request">
   <a href="https://w3c.github.io/web-locks/#dom-lockmanager-request">https://w3c.github.io/web-locks/#dom-lockmanager-request</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-lockmanager-request">6.3.28. Web Locks API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-ndefreader-scan">
   <a href="https://w3c.github.io/web-nfc/#dom-ndefreader-scan">https://w3c.github.io/web-nfc/#dom-ndefreader-scan</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-ndefreader-scan">6.3.10. Web NFC</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-ndefreader-write">
   <a href="https://w3c.github.io/web-nfc/#dom-ndefreader-write">https://w3c.github.io/web-nfc/#dom-ndefreader-write</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-ndefreader-write">6.3.10. Web NFC</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-navigator-share">
   <a href="https://www.w3.org/TR/web-share/#dom-navigator-share">https://www.w3.org/TR/web-share/#dom-navigator-share</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-share">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMException">
   <a href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMException">6.3.5. Web Serial API</a>
    <li><a href="#ref-for-idl-DOMException①">6.3.12. Screen Orientation API</a> <a href="#ref-for-idl-DOMException②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-notsupportederror">
   <a href="https://webidl.spec.whatwg.org/#notsupportederror">https://webidl.spec.whatwg.org/#notsupportederror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notsupportederror">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-promise">
   <a href="https://webidl.spec.whatwg.org/#idl-promise">https://webidl.spec.whatwg.org/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-securityerror">
   <a href="https://webidl.spec.whatwg.org/#securityerror">https://webidl.spec.whatwg.org/#securityerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-securityerror">6.3.5. Web Serial API</a>
    <li><a href="#ref-for-securityerror①">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-new-promise">
   <a href="https://webidl.spec.whatwg.org/#a-new-promise">https://webidl.spec.whatwg.org/#a-new-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-new-promise">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-promise-rejected-with">
   <a href="https://webidl.spec.whatwg.org/#a-promise-rejected-with">https://webidl.spec.whatwg.org/#a-promise-rejected-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-rejected-with">6.3.5. Web Serial API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">1.1. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-exposure-set">
   <a href="https://webidl.spec.whatwg.org/#dfn-exposure-set">https://webidl.spec.whatwg.org/#dfn-exposure-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-exposure-set">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-promise-type">
   <a href="https://webidl.spec.whatwg.org/#dfn-promise-type">https://webidl.spec.whatwg.org/#dfn-promise-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-promise-type">6.3.1. The [DelayWhilePrerendering] extended attribute</a> <a href="#ref-for-dfn-promise-type①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-regular-operation">
   <a href="https://webidl.spec.whatwg.org/#dfn-regular-operation">https://webidl.spec.whatwg.org/#dfn-regular-operation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-regular-operation">6.3.1. The [DelayWhilePrerendering] extended attribute</a> <a href="#ref-for-dfn-regular-operation①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-reject">
   <a href="https://webidl.spec.whatwg.org/#reject">https://webidl.spec.whatwg.org/#reject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reject">6.3.12. Screen Orientation API</a> <a href="#ref-for-reject①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-resolve">
   <a href="https://webidl.spec.whatwg.org/#resolve">https://webidl.spec.whatwg.org/#resolve</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolve">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-return-type">
   <a href="https://webidl.spec.whatwg.org/#dfn-return-type">https://webidl.spec.whatwg.org/#dfn-return-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-return-type">6.3.1. The [DelayWhilePrerendering] extended attribute</a> <a href="#ref-for-dfn-return-type①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-static-operation">
   <a href="https://webidl.spec.whatwg.org/#dfn-static-operation">https://webidl.spec.whatwg.org/#dfn-static-operation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-static-operation">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-this">
   <a href="https://webidl.spec.whatwg.org/#this">https://webidl.spec.whatwg.org/#this</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-this">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-this①">6.2. User prompts</a>
    <li><a href="#ref-for-this②">6.3.1. The [DelayWhilePrerendering] extended attribute</a> <a href="#ref-for-this③">(2)</a> <a href="#ref-for-this④">(3)</a> <a href="#ref-for-this⑤">(4)</a>
    <li><a href="#ref-for-this⑥">6.3.4. Geolocation API</a> <a href="#ref-for-this⑦">(2)</a> <a href="#ref-for-this⑧">(3)</a> <a href="#ref-for-this⑨">(4)</a> <a href="#ref-for-this①⓪">(5)</a> <a href="#ref-for-this①①">(6)</a>
    <li><a href="#ref-for-this①②">6.3.5. Web Serial API</a> <a href="#ref-for-this①③">(2)</a> <a href="#ref-for-this①④">(3)</a> <a href="#ref-for-this①⑤">(4)</a>
    <li><a href="#ref-for-this①⑥">6.3.6. Notifications API</a> <a href="#ref-for-this①⑦">(2)</a>
    <li><a href="#ref-for-this①⑧">6.3.9. Generic Sensor API</a> <a href="#ref-for-this①⑨">(2)</a> <a href="#ref-for-this②⓪">(3)</a> <a href="#ref-for-this②①">(4)</a>
    <li><a href="#ref-for-this②②">6.3.11. Battery Status API</a> <a href="#ref-for-this②③">(2)</a> <a href="#ref-for-this②④">(3)</a>
    <li><a href="#ref-for-this②⑤">6.3.12. Screen Orientation API</a> <a href="#ref-for-this②⑥">(2)</a>
    <li><a href="#ref-for-this②⑦">6.3.13. Gamepad</a>
    <li><a href="#ref-for-this②⑧">6.3.16. Media Capture and Streams</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-undefined">
   <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-undefined">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-navigator-requestmidiaccess">
   <a href="https://webaudio.github.io/web-midi-api/#dom-navigator-requestmidiaccess">https://webaudio.github.io/web-midi-api/#dom-navigator-requestmidiaccess</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-requestmidiaccess">6.3.7. Web MIDI API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-usb-getdevices">
   <a href="https://wicg.github.io/webusb/#dom-usb-getdevices">https://wicg.github.io/webusb/#dom-usb-getdevices</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-usb-getdevices">6.3.22. WebUSB API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-usb-requestdevice">
   <a href="https://wicg.github.io/webusb/#dom-usb-requestdevice">https://wicg.github.io/webusb/#dom-usb-requestdevice</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-usb-requestdevice">6.3.22. WebUSB API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-xrsystem-requestsession">
   <a href="https://immersive-web.github.io/webxr/#dom-xrsystem-requestsession">https://immersive-web.github.io/webxr/#dom-xrsystem-requestsession</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-xrsystem-requestsession">6.3.25. WebXR Device API</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[AUDIO-OUTPUT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-mediadevices-selectaudiooutput">selectAudioOutput()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[BACKGROUD-FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-backgroundfetchmanager-fetch">fetch()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[BATTERY]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-battery-promise">battery promise</span>
     <li><span class="dfn-paneled" id="term-for-dom-navigator-getbattery">getBattery()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CLIENT-HINTS-INFRASTRUCTURE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-accept-ch-cache">accept-ch cache</span>
     <li><span class="dfn-paneled" id="term-for-add-a-new-accept-ch-cache-entry">add a new accept-ch cache entry</span>
     <li><span class="dfn-paneled" id="term-for-abstract-opdef-append-client-hints-to-request">append client hints to request</span>
     <li><span class="dfn-paneled" id="term-for-environment-settings-object-client-hints-set">client hints set <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="term-for-abstract-opdef-update-the-client-hints-set">update the client hints set</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CLIPBOARD-APIS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-clipboard-read">read()</span>
     <li><span class="dfn-paneled" id="term-for-dom-clipboard-readtext">readText()</span>
     <li><span class="dfn-paneled" id="term-for-dom-clipboard-write">write()</span>
     <li><span class="dfn-paneled" id="term-for-dom-clipboard-writetext">writeText()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CREDENTIAL-MANAGEMENT-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-credentialscontainer-create">create()</span>
     <li><span class="dfn-paneled" id="term-for-dom-credentialscontainer-get">get()</span>
     <li><span class="dfn-paneled" id="term-for-dom-credentialscontainer-store">store()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSP3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-should-block-navigation-request">should navigation request of type be blocked by content security policy?</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-document">Document</span>
     <li><span class="dfn-paneled" id="term-for-concept-document">document</span>
     <li><span class="dfn-paneled" id="term-for-concept-event-fire">fire an event</span>
     <li><span class="dfn-paneled" id="term-for-concept-node-document">node document</span>
     <li><span class="dfn-paneled" id="term-for-concept-node">nodes</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-origin">origin</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMA262]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-current-realm">current realm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCRYPTED-MEDIA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-requestMediaKeySystemAccess">requestMediaKeySystemAccess(keySystem, supportedConfigurations)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-concept-request-current-url">current url</span>
     <li><span class="dfn-paneled" id="term-for-concept-fetch">fetch</span>
     <li><span class="dfn-paneled" id="term-for-concept-header-list-get-structured-header">get a structured field value</span>
     <li><span class="dfn-paneled" id="term-for-concept-response-header-list">header list</span>
     <li><span class="dfn-paneled" id="term-for-http-scheme">http(s) scheme</span>
     <li><span class="dfn-paneled" id="term-for-concept-request-method">method</span>
     <li><span class="dfn-paneled" id="term-for-concept-network-error">network error</span>
     <li><span class="dfn-paneled" id="term-for-concept-request-referrer-policy">referrer policy</span>
     <li><span class="dfn-paneled" id="term-for-concept-request">request</span>
     <li><span class="dfn-paneled" id="term-for-concept-response">response</span>
     <li><span class="dfn-paneled" id="term-for-concept-response-status">status</span>
     <li><span class="dfn-paneled" id="term-for-concept-response-url">url <small>(for response)</small></span>
    </ul>
   <li>
    <a data-link-type="biblio">[FILE-SYSTEM-ACCESS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-window-showdirectorypicker">showDirectoryPicker()</span>
     <li><span class="dfn-paneled" id="term-for-dom-window-showopenfilepicker">showOpenFilePicker()</span>
     <li><span class="dfn-paneled" id="term-for-dom-window-showsavefilepicker">showSaveFilePicker()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FULLSCREEN]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-element-requestfullscreen">requestFullscreen()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GAMEPAD]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-gamepad">Gamepad</span>
     <li><span class="dfn-paneled" id="term-for-dom-gamepadevent">GamepadEvent</span>
     <li><span class="dfn-paneled" id="term-for-dom-gamepadevent-gamepad">gamepad</span>
     <li><span class="dfn-paneled" id="term-for-dfn-gamepadconnected">gamepadconnected</span>
     <li><span class="dfn-paneled" id="term-for-dfn-gamepaddisconnected">gamepaddisconnected</span>
     <li><span class="dfn-paneled" id="term-for-dom-navigator-getgamepads">getGamepads()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GENERIC-SENSOR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-sensor-state-slot">[[state]]</span>
     <li><span class="dfn-paneled" id="term-for-dom-sensor-start">start()</span>
     <li><span class="dfn-paneled" id="term-for-dom-sensor-stop">stop()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GEOLOCATION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-clearwatch-method">clearWatch(watchId)</span>
     <li><span class="dfn-paneled" id="term-for-getcurrentposition-method">getCurrentPosition(successCallback, errorCallback, options)</span>
     <li><span class="dfn-paneled" id="term-for-dfn-watch-process">watch process</span>
     <li><span class="dfn-paneled" id="term-for-watchposition-method">watchPosition(successCallback, errorCallback, options)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HID]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-hid-getdevices">getDevices()</span>
     <li><span class="dfn-paneled" id="term-for-dom-hid-requestdevice">requestDevice()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-domhighrestimestamp">DOMHighResTimeStamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-relative-high-resolution-time">relative high resolution time</span>
     <li><span class="dfn-paneled" id="term-for-dfn-unsafe-shared-current-time">unsafe shared current time</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dedicatedworkerglobalscope">DedicatedWorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="term-for-eventhandler">EventHandler</span>
     <li><span class="dfn-paneled" id="term-for-htmlmediaelement">HTMLMediaElement</span>
     <li><span class="dfn-paneled" id="term-for-window">Window</span>
     <li><span class="dfn-paneled" id="term-for-abort-a-document">abort</span>
     <li><span class="dfn-paneled" id="term-for-active-document">active document</span>
     <li><span class="dfn-paneled" id="term-for-active-needed-worker">active needed worker</span>
     <li><span class="dfn-paneled" id="term-for-active-sandboxing-flag-set">active sandboxing flag set</span>
     <li><span class="dfn-paneled" id="term-for-active-window">active window</span>
     <li><span class="dfn-paneled" id="term-for-allowed-to-use">allowed to use</span>
     <li><span class="dfn-paneled" id="term-for-concept-document-window">associated document</span>
     <li><span class="dfn-paneled" id="term-for-auxiliary-browsing-context">auxiliary browsing context</span>
     <li><span class="dfn-paneled" id="term-for-event-beforeunload">beforeunload</span>
     <li><span class="dfn-paneled" id="term-for-window-bc">browsing context <small>(for Window)</small></span>
     <li><span class="dfn-paneled" id="term-for-cannot-show-simple-dialogs">cannot show simple dialogs</span>
     <li><span class="dfn-paneled" id="term-for-bc-container">container</span>
     <li><span class="dfn-paneled" id="term-for-creating-a-new-nested-browsing-context">create a new nested browsing context</span>
     <li><span class="dfn-paneled" id="term-for-initialise-the-document-object">create and initialize a document object</span>
     <li><span class="dfn-paneled" id="term-for-creating-a-new-top-level-browsing-context">creating a new top-level browsing context</span>
     <li><span class="dfn-paneled" id="term-for-cross-origin-opener-policy-2">cross-origin-opener-policy</span>
     <li><span class="dfn-paneled" id="term-for-current-global-object">current global object</span>
     <li><span class="dfn-paneled" id="term-for-current-playback-position">current playback position</span>
     <li><span class="dfn-paneled" id="term-for-a-browsing-context-is-discarded">discard</span>
     <li><span class="dfn-paneled" id="term-for-discard-a-document">discard a document</span>
     <li><span class="dfn-paneled" id="term-for-she-document">document</span>
     <li><span class="dfn-paneled" id="term-for-downloading-hyperlinks">download the hyperlink</span>
     <li><span class="dfn-paneled" id="term-for-environment-discarding-steps">environment discarding steps</span>
     <li><span class="dfn-paneled" id="term-for-event-handler-event-type">event handler event type</span>
     <li><span class="dfn-paneled" id="term-for-event-handler-idl-attributes">event handler idl attribute</span>
     <li><span class="dfn-paneled" id="term-for-event-loop">event loop</span>
     <li><span class="dfn-paneled" id="term-for-fully-active">fully active</span>
     <li><span class="dfn-paneled" id="term-for-concept-settings-object-global">global object <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="term-for-history-handling-behavior">history handling behavior</span>
     <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel</span>
     <li><span class="dfn-paneled" id="term-for-list-of-the-descendant-browsing-contexts">list of the descendant browsing contexts</span>
     <li><span class="dfn-paneled" id="term-for-concept-navigate-mature">mature</span>
     <li><span class="dfn-paneled" id="term-for-navigate">navigate</span>
     <li><span class="dfn-paneled" id="term-for-nested-browsing-context">nested browsing context</span>
     <li><span class="dfn-paneled" id="term-for-networking-task-source">networking task source</span>
     <li><span class="dfn-paneled" id="term-for-handler-onreadystatechange">onreadystatechange</span>
     <li><span class="dfn-paneled" id="term-for-dom-open">open(url, target, features)</span>
     <li><span class="dfn-paneled" id="term-for-opener-browsing-context">opener browsing context</span>
     <li><span class="dfn-paneled" id="term-for-concept-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-WorkerGlobalScope-owner-set">owner set</span>
     <li><span class="dfn-paneled" id="term-for-playing-the-media-resource">playing the media resource</span>
     <li><span class="dfn-paneled" id="term-for-dom-broadcastchannel-postmessage">postMessage(message)</span>
     <li><span class="dfn-paneled" id="term-for-dom-print">print()</span>
     <li><span class="dfn-paneled" id="term-for-process-a-navigate-fetch">process a navigate fetch</span>
     <li><span class="dfn-paneled" id="term-for-process-a-navigate-response">process a navigate response</span>
     <li><span class="dfn-paneled" id="term-for-process-a-navigate-url-scheme">process a navigate url scheme</span>
     <li><span class="dfn-paneled" id="term-for-prompt-to-unload-a-document">prompt to unload</span>
     <li><span class="dfn-paneled" id="term-for-queue-a-global-task">queue a global task</span>
     <li><span class="dfn-paneled" id="term-for-refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be unloaded</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-global">relevant global object</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">relevant realm</span>
     <li><span class="dfn-paneled" id="term-for-relevant-settings-object">relevant settings object</span>
     <li><span class="dfn-paneled" id="term-for-bcg-remove">remove</span>
     <li><span class="dfn-paneled" id="term-for-navigation-params-request">request</span>
     <li><span class="dfn-paneled" id="term-for-navigation-params-reserved-environment">reserved environment</span>
     <li><span class="dfn-paneled" id="term-for-same-origin">same origin</span>
     <li><span class="dfn-paneled" id="term-for-same-site">same site</span>
     <li><span class="dfn-paneled" id="term-for-sandboxed-orientation-lock-browsing-context-flag">sandboxed orientation lock browsing context flag</span>
     <li><span class="dfn-paneled" id="term-for-script-closable">script-closable</span>
     <li><span class="dfn-paneled" id="term-for-secure-context">secure context</span>
     <li><span class="dfn-paneled" id="term-for-session-history">session history</span>
     <li><span class="dfn-paneled" id="term-for-source-browsing-context">source browsing context</span>
     <li><span class="dfn-paneled" id="term-for-sticky-activation">sticky activation</span>
     <li><span class="dfn-paneled" id="term-for-tlbc-system-focus">system focus</span>
     <li><span class="dfn-paneled" id="term-for-the-worker&apos;s-lifetime">the worker's lifetime</span>
     <li><span class="dfn-paneled" id="term-for-top-level-browsing-context">top-level browsing context</span>
     <li><span class="dfn-paneled" id="term-for-transient-activation">transient activation</span>
     <li><span class="dfn-paneled" id="term-for-traverse-the-history">traverse the history</span>
     <li><span class="dfn-paneled" id="term-for-url-and-history-update-steps">url and history update steps</span>
     <li><span class="dfn-paneled" id="term-for-visibility-state">visibility state</span>
    </ul>
   <li>
    <a data-link-type="biblio">[IDLE-DETECTION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-api-idledetector-requestpermission">requestPermission()</span>
     <li><span class="dfn-paneled" id="term-for-api-idledetector-start">start()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-assert">assert</span>
     <li><span class="dfn-paneled" id="term-for-list-contain">contain</span>
     <li><span class="dfn-paneled" id="term-for-list-empty">empty</span>
     <li><span class="dfn-paneled" id="term-for-map-exists">exist</span>
     <li><span class="dfn-paneled" id="term-for-list-extend">extend</span>
     <li><span class="dfn-paneled" id="term-for-map-iterate">for each <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="term-for-list-item">item</span>
     <li><span class="dfn-paneled" id="term-for-list">list</span>
     <li><span class="dfn-paneled" id="term-for-ordered-map">ordered map</span>
     <li><span class="dfn-paneled" id="term-for-map-remove">remove</span>
     <li><span class="dfn-paneled" id="term-for-map-set">set</span>
     <li><span class="dfn-paneled" id="term-for-set-union">union</span>
     <li><span class="dfn-paneled" id="term-for-user-agent">user agent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[KEYBOARD-LOCK]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-keyboard-lock">lock()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIACAPTURE-MAIN]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-device-change-notification-steps">device change notification steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIACAPTURE-STREAMS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-mediadevices">MediaDevices</span>
     <li><span class="dfn-paneled" id="term-for-dom-mediadevices-enumeratedevices">enumerateDevices()</span>
     <li><span class="dfn-paneled" id="term-for-dom-navigator-getusermedia">getUserMedia() <small>(for Navigator)</small></span>
    </ul>
   <li>
    <a data-link-type="biblio">[NAV-SPECULATION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-supports-prefetch">supports prefetch</span>
    </ul>
   <li>
    <a data-link-type="biblio">[NAVIGATION-TIMING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-current-document">current document</span>
    </ul>
   <li>
    <a data-link-type="biblio">[NAVIGATION-TIMING-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-performancenavigationtiming">PerformanceNavigationTiming</span>
    </ul>
   <li>
    <a data-link-type="biblio">[NOTIFICATIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-notification-notification">Notification(title)</span>
     <li><span class="dfn-paneled" id="term-for-get-the-notifications-permission-state">get the notifications permission state</span>
     <li><span class="dfn-paneled" id="term-for-dom-notification-permission">permission</span>
     <li><span class="dfn-paneled" id="term-for-dom-notification-requestpermission">requestPermission()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PAYMENT-REQUEST]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-paymentrequest-show">show()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PICTURE-IN-PICTURE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-htmlvideoelement-requestpictureinpicture">autoPictureInPicture</span>
     <li><span class="dfn-paneled" id="term-for-request-picture-in-picture-algorithm">request picture-in-picture</span>
     <li><span class="dfn-paneled" id="term-for-dom-htmlvideoelement-autopictureinpicture">requestPictureInPicture()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[POINTERLOCK]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-requestpointerlock-pointerlockoptions-options">requestPointerLock(options)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PRESENTATION-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-presentationrequest-start">start()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PUSH-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-pushmanager-subscribe">subscribe()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC8941]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-name-lists">list</span>
     <li><span class="dfn-paneled" id="term-for-section-1">structured header</span>
     <li><span class="dfn-paneled" id="term-for-name-tokens">token</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SCREEN-CAPTURE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-mediadevices-getdisplaymedia">getDisplayMedia()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SCREEN-ORIENTATION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-apply-an-orientation-lock">apply an orientation lock</span>
     <li><span class="dfn-paneled" id="term-for-dom-screenorientation-lock">lock()</span>
     <li><span class="dfn-paneled" id="term-for-dfn-pre-lock-conditions">pre-lock conditions</span>
     <li><span class="dfn-paneled" id="term-for-dom-screenorientation-unlock">unlock()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SCREEN-WAKE-LOCK]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-the-request-method">request()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SERIAL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-serial-getports">getPorts()</span>
     <li><span class="dfn-paneled" id="term-for-dom-serial-requestPort">requestPort(options)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SERVICE-WORKERS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-serviceworker-postmessage-message-options">postMessage(message, options)</span>
     <li><span class="dfn-paneled" id="term-for-dom-serviceworker-postmessage">postMessage(message, transfer)</span>
     <li><span class="dfn-paneled" id="term-for-dom-serviceworkercontainer-register">register(scriptURL, options)</span>
     <li><span class="dfn-paneled" id="term-for-dom-serviceworkerregistration-unregister">unregister()</span>
     <li><span class="dfn-paneled" id="term-for-dom-serviceworkerregistration-update">update()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SPEECH-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-speechrecognition-abort">abort()</span>
     <li><span class="dfn-paneled" id="term-for-dom-speechsynthesis-cancel">cancel()</span>
     <li><span class="dfn-paneled" id="term-for-dom-speechsynthesis-pause">pause()</span>
     <li><span class="dfn-paneled" id="term-for-dom-speechsynthesis-resume">resume()</span>
     <li><span class="dfn-paneled" id="term-for-dom-speechsynthesis-speak">speak(utterance)</span>
     <li><span class="dfn-paneled" id="term-for-dom-speechrecognition-start">start()</span>
     <li><span class="dfn-paneled" id="term-for-dom-speechrecognition-stop">stop()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-storagemanager-persist">persist()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-concept-url-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-url-scheme">scheme</span>
     <li><span class="dfn-paneled" id="term-for-concept-url">url</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-BLUETOOTH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-bluetooth-getdevices">getDevices()</span>
     <li><span class="dfn-paneled" id="term-for-dom-bluetooth-requestdevice">requestDevice()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-LOCKS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-lockmanager-query">query()</span>
     <li><span class="dfn-paneled" id="term-for-dom-lockmanager-request">request()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-NFC]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-ndefreader-scan">scan()</span>
     <li><span class="dfn-paneled" id="term-for-dom-ndefreader-write">write()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-SHARE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-navigator-share">share()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
     <li><span class="dfn-paneled" id="term-for-notsupportederror">NotSupportedError</span>
     <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
     <li><span class="dfn-paneled" id="term-for-securityerror">SecurityError</span>
     <li><span class="dfn-paneled" id="term-for-a-new-promise">a new promise</span>
     <li><span class="dfn-paneled" id="term-for-a-promise-rejected-with">a promise rejected with</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
     <li><span class="dfn-paneled" id="term-for-dfn-exposure-set">exposure set</span>
     <li><span class="dfn-paneled" id="term-for-dfn-promise-type">promise type</span>
     <li><span class="dfn-paneled" id="term-for-dfn-regular-operation">regular operation</span>
     <li><span class="dfn-paneled" id="term-for-reject">reject</span>
     <li><span class="dfn-paneled" id="term-for-resolve">resolve</span>
     <li><span class="dfn-paneled" id="term-for-dfn-return-type">return type</span>
     <li><span class="dfn-paneled" id="term-for-dfn-static-operation">static operations</span>
     <li><span class="dfn-paneled" id="term-for-this">this</span>
     <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBMIDI]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-navigator-requestmidiaccess">requestMIDIAccess()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBUSB]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-usb-getdevices">getDevices()</span>
     <li><span class="dfn-paneled" id="term-for-dom-usb-requestdevice">requestDevice(options)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBXR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-xrsystem-requestsession">requestSession(mode)</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-audio-output">[AUDIO-OUTPUT]
   <dd>Justin Uberti; Guido Urdaneta; youenn fablet. <a href="https://w3c.github.io/mediacapture-output/"><cite>Audio Output Devices API</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-output/">https://w3c.github.io/mediacapture-output/</a>
   <dt id="biblio-client-hints-infrastructure">[CLIENT-HINTS-INFRASTRUCTURE]
   <dd><a href="https://wicg.github.io/client-hints-infrastructure/"><cite>Client Hints Infrastructure</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/client-hints-infrastructure/">https://wicg.github.io/client-hints-infrastructure/</a>
   <dt id="biblio-clipboard-apis">[CLIPBOARD-APIS]
   <dd>Gary Kacmarcik; Grisha Lyukshin. <a href="https://w3c.github.io/clipboard-apis/"><cite>Clipboard API and events</cite></a>. URL: <a href="https://w3c.github.io/clipboard-apis/">https://w3c.github.io/clipboard-apis/</a>
   <dt id="biblio-credential-management-1">[CREDENTIAL-MANAGEMENT-1]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-credential-management/"><cite>Credential Management Level 1</cite></a>. URL: <a href="https://w3c.github.io/webappsec-credential-management/">https://w3c.github.io/webappsec-credential-management/</a>
   <dt id="biblio-csp3">[CSP3]
   <dd>Mike West; Antonio Sartori. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 3</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-encrypted-media">[ENCRYPTED-MEDIA]
   <dd>David Dorwin; et al. <a href="https://w3c.github.io/encrypted-media/"><cite>Encrypted Media Extensions</cite></a>. URL: <a href="https://w3c.github.io/encrypted-media/">https://w3c.github.io/encrypted-media/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-file-system-access">[FILE-SYSTEM-ACCESS]
   <dd><a href="https://wicg.github.io/file-system-access/"><cite>File System Access</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/file-system-access/">https://wicg.github.io/file-system-access/</a>
   <dt id="biblio-fullscreen">[FULLSCREEN]
   <dd>Philip Jägenstedt. <a href="https://fullscreen.spec.whatwg.org/"><cite>Fullscreen API Standard</cite></a>. Living Standard. URL: <a href="https://fullscreen.spec.whatwg.org/">https://fullscreen.spec.whatwg.org/</a>
   <dt id="biblio-gamepad">[GAMEPAD]
   <dd>Steve Agoston; James Hollyer; Matthew Reynolds. <a href="https://w3c.github.io/gamepad/"><cite>Gamepad</cite></a>. URL: <a href="https://w3c.github.io/gamepad/">https://w3c.github.io/gamepad/</a>
   <dt id="biblio-generic-sensor">[GENERIC-SENSOR]
   <dd>Rick Waldron. <a href="https://w3c.github.io/sensors/"><cite>Generic Sensor API</cite></a>. URL: <a href="https://w3c.github.io/sensors/">https://w3c.github.io/sensors/</a>
   <dt id="biblio-geolocation">[GEOLOCATION]
   <dd>Marcos Caceres; Reilly Grant. <a href="https://w3c.github.io/geolocation-api/"><cite>Geolocation API</cite></a>. URL: <a href="https://w3c.github.io/geolocation-api/">https://w3c.github.io/geolocation-api/</a>
   <dt id="biblio-hr-time-2">[HR-TIME-2]
   <dd>Ilya Grigorik. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time Level 2</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-hr-time-3">[HR-TIME-3]
   <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-idle-detection">[IDLE-DETECTION]
   <dd>Reilly Grant. <a href="https://wicg.github.io/idle-detection/"><cite>Idle Detection API</cite></a>. CG-DRAFT. URL: <a href="https://wicg.github.io/idle-detection/">https://wicg.github.io/idle-detection/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-keyboard-lock">[KEYBOARD-LOCK]
   <dd><a href="https://wicg.github.io/keyboard-lock/"><cite>Keyboard Lock</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/keyboard-lock/">https://wicg.github.io/keyboard-lock/</a>
   <dt id="biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]
   <dd>Cullen Jennings; et al. <a href="https://w3c.github.io/mediacapture-main/"><cite>Media Capture and Streams</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-main/">https://w3c.github.io/mediacapture-main/</a>
   <dt id="biblio-navigation-timing">[NAVIGATION-TIMING]
   <dd>Zhiheng Wang. <a href="https://www.w3.org/TR/navigation-timing/"><cite>Navigation Timing</cite></a>. 17 December 2012. REC. URL: <a href="https://www.w3.org/TR/navigation-timing/">https://www.w3.org/TR/navigation-timing/</a>
   <dt id="biblio-navigation-timing-2">[NAVIGATION-TIMING-2]
   <dd>Yoav Weiss; Noam Rosenthal. <a href="https://w3c.github.io/navigation-timing/"><cite>Navigation Timing Level 2</cite></a>. URL: <a href="https://w3c.github.io/navigation-timing/">https://w3c.github.io/navigation-timing/</a>
   <dt id="biblio-notifications">[NOTIFICATIONS]
   <dd>Anne van Kesteren. <a href="https://notifications.spec.whatwg.org/"><cite>Notifications API Standard</cite></a>. Living Standard. URL: <a href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
   <dt id="biblio-payment-request">[PAYMENT-REQUEST]
   <dd>Marcos Caceres; Rouslan Solomakhin; Ian Jacobs. <a href="https://w3c.github.io/payment-request/"><cite>Payment Request API</cite></a>. URL: <a href="https://w3c.github.io/payment-request/">https://w3c.github.io/payment-request/</a>
   <dt id="biblio-picture-in-picture">[PICTURE-IN-PICTURE]
   <dd>Francois Beaufort. <a href="https://w3c.github.io/picture-in-picture/"><cite>Picture-in-Picture</cite></a>. URL: <a href="https://w3c.github.io/picture-in-picture/">https://w3c.github.io/picture-in-picture/</a>
   <dt id="biblio-pointerlock">[POINTERLOCK]
   <dd>Vincent Scheib. <a href="https://w3c.github.io/pointerlock/"><cite>Pointer Lock</cite></a>. URL: <a href="https://w3c.github.io/pointerlock/">https://w3c.github.io/pointerlock/</a>
   <dt id="biblio-presentation-api">[PRESENTATION-API]
   <dd>Mark Foltz; Dominik Röttsches. <a href="https://w3c.github.io/presentation-api/"><cite>Presentation API</cite></a>. URL: <a href="https://w3c.github.io/presentation-api/">https://w3c.github.io/presentation-api/</a>
   <dt id="biblio-push-api">[PUSH-API]
   <dd>Peter Beverloo; Martin Thomson; Marcos Caceres. <a href="https://w3c.github.io/push-api/"><cite>Push API</cite></a>. URL: <a href="https://w3c.github.io/push-api/">https://w3c.github.io/push-api/</a>
   <dt id="biblio-rfc8941">[RFC8941]
   <dd>M. Nottingham; P-H. Kamp. <a href="https://www.rfc-editor.org/rfc/rfc8941"><cite>Structured Field Values for HTTP</cite></a>. February 2021. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc8941">https://www.rfc-editor.org/rfc/rfc8941</a>
   <dt id="biblio-screen-capture">[SCREEN-CAPTURE]
   <dd>Martin Thomson; et al. <a href="https://w3c.github.io/mediacapture-screen-share/"><cite>Screen Capture</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-screen-share/">https://w3c.github.io/mediacapture-screen-share/</a>
   <dt id="biblio-screen-orientation">[SCREEN-ORIENTATION]
   <dd>Mounir Lamouri; Marcos Caceres; Johanna Herman. <a href="https://w3c.github.io/screen-orientation/"><cite>The Screen Orientation API</cite></a>. URL: <a href="https://w3c.github.io/screen-orientation/">https://w3c.github.io/screen-orientation/</a>
   <dt id="biblio-screen-wake-lock">[SCREEN-WAKE-LOCK]
   <dd>Kenneth Christiansen; Marcos Caceres; Raphael Kubo da Costa. <a href="https://w3c.github.io/screen-wake-lock/"><cite>Screen Wake Lock API</cite></a>. URL: <a href="https://w3c.github.io/screen-wake-lock/">https://w3c.github.io/screen-wake-lock/</a>
   <dt id="biblio-service-workers">[SERVICE-WORKERS]
   <dd>Jake Archibald; Marijn Kruisselbrink. <a href="https://w3c.github.io/ServiceWorker/"><cite>Service Workers</cite></a>. URL: <a href="https://w3c.github.io/ServiceWorker/">https://w3c.github.io/ServiceWorker/</a>
   <dt id="biblio-speech-api">[SPEECH-API]
   <dd><a href="https://wicg.github.io/speech-api/"><cite>Web Speech API</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/speech-api/">https://wicg.github.io/speech-api/</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-web-bluetooth">[WEB-BLUETOOTH]
   <dd>Jeffrey Yasskin. <a href="https://webbluetoothcg.github.io/web-bluetooth/"><cite>Web Bluetooth</cite></a>. URL: <a href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a>
   <dt id="biblio-web-locks">[WEB-LOCKS]
   <dd>Joshua Bell; Kagami Rosylight. <a href="https://w3c.github.io/web-locks/"><cite>Web Locks API</cite></a>. ED. URL: <a href="https://w3c.github.io/web-locks/">https://w3c.github.io/web-locks/</a>
   <dt id="biblio-web-nfc">[WEB-NFC]
   <dd><a href="https://w3c.github.io/web-nfc/"><cite>Web NFC API</cite></a>. ED. URL: <a href="https://w3c.github.io/web-nfc/">https://w3c.github.io/web-nfc/</a>
   <dt id="biblio-web-share">[WEB-SHARE]
   <dd>Matt Giuca; Eric Willigers; Marcos Caceres. <a href="https://w3c.github.io/web-share/"><cite>Web Share API</cite></a>. URL: <a href="https://w3c.github.io/web-share/">https://w3c.github.io/web-share/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
   <dt id="biblio-webmidi">[WEBMIDI]
   <dd>Chris Wilson; Jussi Kalliokoski. <a href="https://webaudio.github.io/web-midi-api/"><cite>Web MIDI API</cite></a>. URL: <a href="https://webaudio.github.io/web-midi-api/">https://webaudio.github.io/web-midi-api/</a>
   <dt id="biblio-webusb">[WEBUSB]
   <dd><a href="https://wicg.github.io/webusb/"><cite>WebUSB API</cite></a>. cg-draft. URL: <a href="https://wicg.github.io/webusb/">https://wicg.github.io/webusb/</a>
   <dt id="biblio-webxr">[WEBXR]
   <dd>Brandon Jones; Manish Goregaokar; Rik Cabanier. <a href="https://immersive-web.github.io/webxr/"><cite>WebXR Device API</cite></a>. URL: <a href="https://immersive-web.github.io/webxr/">https://immersive-web.github.io/webxr/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-prerendering"><c- g>prerendering</c-></a>;

    // Under "special event handler IDL attributes that only apply to Document objects"
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-document-onprerenderingchange"><c- g>onprerenderingchange</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming"><c- g>PerformanceNavigationTiming</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMHighResTimeStamp" href="#dom-performancenavigationtiming-activationstart"><c- g>activationStart</c-></a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue">The concept of a fenced frame browsing context is not yet defined but we need to link to it once it exists. <a class="issue-return" href="#issue-441858a6" title="Jump to section">↵</a></div>
   <div class="issue">What about portals? Portals might not be hidden, and portals are envisioned to be a type of prerendering browsing context. <a class="issue-return" href="#issue-1c569c2c" title="Jump to section">↵</a></div>
  </div>
  <aside class="dfn-panel" data-for="dom-document-onprerenderingchange">
   <b><a href="#dom-document-onprerenderingchange">#dom-document-onprerenderingchange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-onprerenderingchange">1.1. Extensions to the Document interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-document-prerenderingchange">
   <b><a href="#eventdef-document-prerenderingchange">#eventdef-document-prerenderingchange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventdef-document-prerenderingchange">1.2. Prerendering browsing contexts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="browsing-context-loading-mode">
   <b><a href="#browsing-context-loading-mode">#browsing-context-loading-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-browsing-context-loading-mode">1.2. Prerendering browsing contexts</a> <a href="#ref-for-browsing-context-loading-mode①">(2)</a> <a href="#ref-for-browsing-context-loading-mode②">(3)</a> <a href="#ref-for-browsing-context-loading-mode③">(4)</a> <a href="#ref-for-browsing-context-loading-mode④">(5)</a> <a href="#ref-for-browsing-context-loading-mode⑤">(6)</a>
    <li><a href="#ref-for-browsing-context-loading-mode⑥">1.3. Modifications to creating browsing contexts</a> <a href="#ref-for-browsing-context-loading-mode⑦">(2)</a> <a href="#ref-for-browsing-context-loading-mode⑧">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prerendering-browsing-context">
   <b><a href="#prerendering-browsing-context">#prerendering-browsing-context</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prerendering-browsing-context">1.2. Prerendering browsing contexts</a> <a href="#ref-for-prerendering-browsing-context①">(2)</a> <a href="#ref-for-prerendering-browsing-context②">(3)</a> <a href="#ref-for-prerendering-browsing-context③">(4)</a> <a href="#ref-for-prerendering-browsing-context④">(5)</a> <a href="#ref-for-prerendering-browsing-context⑤">(6)</a> <a href="#ref-for-prerendering-browsing-context⑥">(7)</a> <a href="#ref-for-prerendering-browsing-context⑦">(8)</a> <a href="#ref-for-prerendering-browsing-context⑧">(9)</a>
    <li><a href="#ref-for-prerendering-browsing-context⑨">2.1. Allowing activation in place of navigation</a> <a href="#ref-for-prerendering-browsing-context①⓪">(2)</a> <a href="#ref-for-prerendering-browsing-context①①">(3)</a>
    <li><a href="#ref-for-prerendering-browsing-context①②">2.2. Navigation fetch changes</a> <a href="#ref-for-prerendering-browsing-context①③">(2)</a> <a href="#ref-for-prerendering-browsing-context①④">(3)</a>
    <li><a href="#ref-for-prerendering-browsing-context①⑤">2.3. Delaying cross-origin nested browsing context navigations</a> <a href="#ref-for-prerendering-browsing-context①⑥">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context①⑦">2.4. Maintaining a trivial session history</a> <a href="#ref-for-prerendering-browsing-context①⑧">(2)</a> <a href="#ref-for-prerendering-browsing-context①⑨">(3)</a>
    <li><a href="#ref-for-prerendering-browsing-context②⓪">2.5. Interaction with Worker Lifetime</a> <a href="#ref-for-prerendering-browsing-context②①">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context②②">3.1. Interaction with Page Visibility</a>
    <li><a href="#ref-for-prerendering-browsing-context②③">3.2. Interaction with system focus</a>
    <li><a href="#ref-for-prerendering-browsing-context②④">3.4. Interaction with Client Hint Cache</a> <a href="#ref-for-prerendering-browsing-context②⑤">(2)</a> <a href="#ref-for-prerendering-browsing-context②⑥">(3)</a> <a href="#ref-for-prerendering-browsing-context②⑦">(4)</a>
    <li><a href="#ref-for-prerendering-browsing-context②⑧">4. The `Supports-Loading-Mode` HTTP response header</a>
    <li><a href="#ref-for-prerendering-browsing-context②⑨">5. Preventing nonsensical behaviors</a>
    <li><a href="#ref-for-prerendering-browsing-context③⓪">5.1. APIs for creating and navigating browsing contexts by name</a> <a href="#ref-for-prerendering-browsing-context③①">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context③②">6. Preventing intrusive behaviors</a>
    <li><a href="#ref-for-prerendering-browsing-context③③">6.1. Downloading resources</a> <a href="#ref-for-prerendering-browsing-context③④">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context③⑤">6.2. User prompts</a> <a href="#ref-for-prerendering-browsing-context③⑥">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context③⑦">6.3. Delaying async API results</a>
    <li><a href="#ref-for-prerendering-browsing-context③⑧">6.3.1. The [DelayWhilePrerendering] extended attribute</a> <a href="#ref-for-prerendering-browsing-context③⑨">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context④⓪">6.3.4. Geolocation API</a> <a href="#ref-for-prerendering-browsing-context④①">(2)</a> <a href="#ref-for-prerendering-browsing-context④②">(3)</a>
    <li><a href="#ref-for-prerendering-browsing-context④③">6.3.5. Web Serial API</a>
    <li><a href="#ref-for-prerendering-browsing-context④④">6.3.6. Notifications API</a> <a href="#ref-for-prerendering-browsing-context④⑤">(2)</a> <a href="#ref-for-prerendering-browsing-context④⑥">(3)</a>
    <li><a href="#ref-for-prerendering-browsing-context④⑦">6.3.9. Generic Sensor API</a>
    <li><a href="#ref-for-prerendering-browsing-context④⑧">6.3.11. Battery Status API</a>
    <li><a href="#ref-for-prerendering-browsing-context④⑨">6.3.12. Screen Orientation API</a>
    <li><a href="#ref-for-prerendering-browsing-context⑤⓪">6.3.13. Gamepad</a> <a href="#ref-for-prerendering-browsing-context⑤①">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context⑤②">6.3.16. Media Capture and Streams</a>
    <li><a href="#ref-for-prerendering-browsing-context⑤③">6.4. Implicitly restricted APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-document-prerendering">
   <b><a href="#dom-document-prerendering">#dom-document-prerendering</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-prerendering">1.1. Extensions to the Document interface</a> <a href="#ref-for-dom-document-prerendering①">(2)</a>
    <li><a href="#ref-for-dom-document-prerendering②">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-dom-document-prerendering③">6.3.15. Media Autoplay</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prerendering-browsing-context-empty">
   <b><a href="#prerendering-browsing-context-empty">#prerendering-browsing-context-empty</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prerendering-browsing-context-empty">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-prerendering-browsing-context-empty①">2.1. Allowing activation in place of navigation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-prerendering-browsing-contexts-map">
   <b><a href="#document-prerendering-browsing-contexts-map">#document-prerendering-browsing-contexts-map</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-document-prerendering-browsing-contexts-map">1.2. Prerendering browsing contexts</a> <a href="#ref-for-document-prerendering-browsing-contexts-map①">(2)</a>
    <li><a href="#ref-for-document-prerendering-browsing-contexts-map②">2.1. Allowing activation in place of navigation</a> <a href="#ref-for-document-prerendering-browsing-contexts-map③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-post-prerendering-activation-steps-list">
   <b><a href="#document-post-prerendering-activation-steps-list">#document-post-prerendering-activation-steps-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-document-post-prerendering-activation-steps-list">1.2. Prerendering browsing contexts</a> <a href="#ref-for-document-post-prerendering-activation-steps-list①">(2)</a> <a href="#ref-for-document-post-prerendering-activation-steps-list②">(3)</a>
    <li><a href="#ref-for-document-post-prerendering-activation-steps-list③">2.6. Cleanup upon discarding a Document</a>
    <li><a href="#ref-for-document-post-prerendering-activation-steps-list④">6.3.5. Web Serial API</a>
    <li><a href="#ref-for-document-post-prerendering-activation-steps-list⑤">6.3.13. Gamepad</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="platform-object-post-prerendering-activation-steps-list">
   <b><a href="#platform-object-post-prerendering-activation-steps-list">#platform-object-post-prerendering-activation-steps-list</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list">6.1. Downloading resources</a>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list①">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list②">6.3.4. Geolocation API</a> <a href="#ref-for-platform-object-post-prerendering-activation-steps-list③">(2)</a> <a href="#ref-for-platform-object-post-prerendering-activation-steps-list④">(3)</a>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list⑤">6.3.6. Notifications API</a>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list⑥">6.3.9. Generic Sensor API</a>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list⑦">6.3.11. Battery Status API</a>
    <li><a href="#ref-for-platform-object-post-prerendering-activation-steps-list⑧">6.3.12. Screen Orientation API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="document-activation-start-time">
   <b><a href="#document-activation-start-time">#document-activation-start-time</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-document-activation-start-time">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-document-activation-start-time①">3.3. Extensions to the PerformanceNavigationTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prerendering-browsing-context-activate">
   <b><a href="#prerendering-browsing-context-activate">#prerendering-browsing-context-activate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prerendering-browsing-context-activate">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-prerendering-browsing-context-activate①">2.1. Allowing activation in place of navigation</a> <a href="#ref-for-prerendering-browsing-context-activate②">(2)</a> <a href="#ref-for-prerendering-browsing-context-activate③">(3)</a>
    <li><a href="#ref-for-prerendering-browsing-context-activate④">2.2. Navigation fetch changes</a>
    <li><a href="#ref-for-prerendering-browsing-context-activate⑤">2.3. Delaying cross-origin nested browsing context navigations</a>
    <li><a href="#ref-for-prerendering-browsing-context-activate⑥">6.1. Downloading resources</a>
    <li><a href="#ref-for-prerendering-browsing-context-activate⑦">6.3. Delaying async API results</a>
    <li><a href="#ref-for-prerendering-browsing-context-activate⑧">6.3.1. The [DelayWhilePrerendering] extended attribute</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prerendering-browsing-context-finalize-activation">
   <b><a href="#prerendering-browsing-context-finalize-activation">#prerendering-browsing-context-finalize-activation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prerendering-browsing-context-finalize-activation">1.2. Prerendering browsing contexts</a> <a href="#ref-for-prerendering-browsing-context-finalize-activation①">(2)</a>
    <li><a href="#ref-for-prerendering-browsing-context-finalize-activation②">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prerendering-browsing-context-remove-from-initiator">
   <b><a href="#prerendering-browsing-context-remove-from-initiator">#prerendering-browsing-context-remove-from-initiator</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prerendering-browsing-context-remove-from-initiator">1.2. Prerendering browsing contexts</a> <a href="#ref-for-prerendering-browsing-context-remove-from-initiator①">(2)</a> <a href="#ref-for-prerendering-browsing-context-remove-from-initiator②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="can-activate-a-prerender">
   <b><a href="#can-activate-a-prerender">#can-activate-a-prerender</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-can-activate-a-prerender">2.1. Allowing activation in place of navigation</a>
    <li><a href="#ref-for-can-activate-a-prerender①">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-performancenavigationtiming-activationstart">
   <b><a href="#dom-performancenavigationtiming-activationstart">#dom-performancenavigationtiming-activationstart</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-performancenavigationtiming-activationstart">3.3. Extensions to the PerformanceNavigationTiming interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prerendering-browsing-context-prerender-scoped-accept-ch-cache">
   <b><a href="#prerendering-browsing-context-prerender-scoped-accept-ch-cache">#prerendering-browsing-context-prerender-scoped-accept-ch-cache</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prerendering-browsing-context-prerender-scoped-accept-ch-cache">1.2. Prerendering browsing contexts</a>
    <li><a href="#ref-for-prerendering-browsing-context-prerender-scoped-accept-ch-cache①">3.4. Interaction with Client Hint Cache</a> <a href="#ref-for-prerendering-browsing-context-prerender-scoped-accept-ch-cache②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="add-a-new-prerender-accept-ch-cache-entry">
   <b><a href="#add-a-new-prerender-accept-ch-cache-entry">#add-a-new-prerender-accept-ch-cache-entry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-add-a-new-prerender-accept-ch-cache-entry">3.4. Interaction with Client Hint Cache</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="http-headerdef-supports-loading-mode">
   <b><a href="#http-headerdef-supports-loading-mode">#http-headerdef-supports-loading-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-http-headerdef-supports-loading-mode">4. The `Supports-Loading-Mode` HTTP response header</a> <a href="#ref-for-http-headerdef-supports-loading-mode①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="supports-loading-mode-credentialed-prerender">
   <b><a href="#supports-loading-mode-credentialed-prerender">#supports-loading-mode-credentialed-prerender</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-supports-loading-mode-credentialed-prerender">2.2. Navigation fetch changes</a>
    <li><a href="#ref-for-supports-loading-mode-credentialed-prerender①">4. The `Supports-Loading-Mode` HTTP response header</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-the-supported-loading-modes">
   <b><a href="#get-the-supported-loading-modes">#get-the-supported-loading-modes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-get-the-supported-loading-modes">2.2. Navigation fetch changes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="extendedattrdef-delaywhileprerendering">
   <b><a href="#extendedattrdef-delaywhileprerendering">#extendedattrdef-delaywhileprerendering</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering">6.3.1. The [DelayWhilePrerendering] extended attribute</a> <a href="#ref-for-extendedattrdef-delaywhileprerendering①">(2)</a> <a href="#ref-for-extendedattrdef-delaywhileprerendering②">(3)</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering③">6.3.2. Service Workers</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering④">6.3.3. BroadcastChannel</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering⑤">6.3.5. Web Serial API</a> <a href="#ref-for-extendedattrdef-delaywhileprerendering⑥">(2)</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering⑦">6.3.6. Notifications API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering⑧">6.3.7. Web MIDI API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering⑨">6.3.8. Idle Detection API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①⓪">6.3.10. Web NFC</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①①">6.3.12. Screen Orientation API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①②">6.3.14. Encrypted Media Extensions</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①③">6.3.16. Media Capture and Streams</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①④">6.3.17. Audio Output Devices API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①⑤">6.3.18. Push API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①⑥">6.3.19. Background Fetch</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①⑦">6.3.20. Storage API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①⑧">6.3.21. Screen Capture</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering①⑨">6.3.22. WebUSB API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering②⓪">6.3.23. Web Bluetooth</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering②①">6.3.24. WebHID API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering②②">6.3.25. WebXR Device API</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering②③">6.3.26. Credential Management</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering②④">6.3.27. Web Speech API</a> <a href="#ref-for-extendedattrdef-delaywhileprerendering②⑤">(2)</a>
    <li><a href="#ref-for-extendedattrdef-delaywhileprerendering②⑥">6.3.28. Web Locks API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="post-prerendering-activation-geolocation-watch-process-id">
   <b><a href="#post-prerendering-activation-geolocation-watch-process-id">#post-prerendering-activation-geolocation-watch-process-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-post-prerendering-activation-geolocation-watch-process-id">6.3.4. Geolocation API</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>